# 文字コード

## 外字

[1] wiki:  
外字とは特定の文字集合（文字コードなど）に含まれない文字のことをいう。  
日本で一般には、JIS規格の文字コード（通常はJIS X 0208、稀にJIS X 0213やJIS X 0221）に含まれない文字のことをさし、「表外字」、「拡張漢字(ベンダ選定拡張漢字)」とも呼ばれる。  
常用漢字に含まれない文字のことを外字ということもある。  

[2]  
一般的に外字とは、IMEなどの文字入力ソフトに登録されていない文字で、テキスト入力の際に変換しても表示できない文字を意味します。  
外字に分類されている多くは人名・地名に該当しますが、その他にも枠付き文字・単位記号・省略文字・シンボルマークなどを含んでいます。  

---

## ansi

>歴史的な経緯等は原典を見つけられなかったのですが、『ANSI』はそのロケールの既定の文字コードを表す単語らしく日本語だとShift_JIS（CP932）を表します。  
>[Shift_JISと死の文字化け](https://jyuch.hatenablog.com/entry/2018/12/21/000000)  

---

## UTF-8

Unicode用の符号化方式の1つ。  
ASCIIで定義している文字をUnicodeでそのまま使用する事を目的として制定している。  
Unicodeを使った文字コードで、1文字を1バイトから6バイトで表す。

ASCIIと同じ部分は1バイトで表現し、そのほかの部分を2~6バイトで表現する可変長の符号化方式。  
漢字、かな文字は3~4で表現するため、UTF-16を比較するとデータサイズが大きくなる。  

---

## UTF8とUTF16の違い

>文字を表現する単位が違う。  
>UTF-8は8ビット、UTF-16は16ビットの可変長マルチバイトで文字を表現する。  
>
>UTF-16は、2バイトで表現できる文字はそのまま2バイトで表現し、それ以降の文字は4バイトで表す。  
>そのため、英数も日本語も全て2バイトで表現される。  
>対して、UTF-8は英数は1バイトで表現し、日本語は3バイトで表現するようになっている。  
>
>つまり、英数の割合が多い場合はUTF-8のほうが効率がいいが、日本語が多い場合はUTF-16のほうが効率が良いと言える。  
>
>[UTF-8とUTF16の違いは？](https://atmarkit.itmedia.co.jp/fxml/askxmlexpert/024utf/24utf.html)  

---

## サロゲートペア

1つの文字に対して 2つの文字コードを使って表される文字のこと。  

>ユニコードにおいて標準化された文字符号化方式、UTF-16で用いられる符号化の拡張方法。  
>2バイトで定義された基本多言語面に含まれない拡張領域の文字を、2バイトのバイト列二つを組み合わせて、計4バイトで表す。  
>追加漢字面の漢字をはじめ、約100万字の文字の符号化が可能となる。  
>[サロゲートペアとは？ 意味や使い方 - コトバンク](https://kotobank.jp/word/%E3%82%B5%E3%83%AD%E3%82%B2%E3%83%BC%E3%83%88%E3%83%9A%E3%82%A2-1825148>)  

コンピューターで文字を表すために世界中が頑張った。  
様々な符号化文字集合と文字符号化方式が乱立した。  
Unicode「全世界のあらゆる文字を1つの符号化文字集合のもとに統一しよう!!!」  
Unicode「16bit,65536種分の領域があれば、あらゆる文字を格納できるはず!!!!!!」  
Unicode「あかん、これ65536文字じゃたらんくね？でももう世界中で実装されてるし、今更なかったことにはできん!!!!」  
Unicode「しゃーない!!!使われてない2つの領域があるから、そいつら組み合わせて1文字ってことにしたろ!!!!組み合わせ増えたら事足りるやろ!!!!」  
→サロゲートペア  

弊害は1文字だと思ったら0.5文字だったみたいな事が出てくること。  

[サロゲートペアってなんでコワイの](https://qiita.com/wingsys/items/81d46451d8b93ab065de)  

---

## 全角文字は何バイト？

>【全角文字は何バイト？】  
>知らない ... 論外  
>2バイト ... 老害  
>3バイト ... 及第点  
>3～4バイト ... 合格  
>KI/KO ... 引退勧告  
><https://twitter.com/ito_yusaku/status/1605410137245569024>  

<!--  -->
>エンコーディングが Shift_JIS であれば半角文字を1バイト、全角文字を2バイトで符号化します。  
>3バイト以上の文字は一つもありません。  
>
>エンコーディングが UTF-8 の場合は1文字を1〜6バイトで符号化します。  
>半角文字は1バイトですが、全角文字は2〜6バイトとなります。  
>
>HTML文書やプログラムを記述する際、エンコーディングに UTF-8 を使う場面は少なくありません。  
>ですから、一律に半角文字は1バイト、全角文字は2バイトと考えることはできません。  
>
>純粋に文字列のバイト数を知りたい場合、PHP では strlen を使用し、全角も1文字として文字数を数えたい場合は mb_strlen を使用します。  
>UTF-8 でも Shift_JIS のように全角を2バイトとして文字を数えたい場合には、mb_convert_encoding を併用すると良いです。  
>[全角文字が3バイト?! PHP で文字を数えるときの注意点](https://www.webmagazine.kakisiti.co.jp/?p=449)  
