# 平成28年春季

---

## 情報セキュリティ Webサイトを用いた書籍販売システムのセキュリティ

珍しくダメだった。  
話はわかったけど、細かい認識が欠落していた。  
ざっくり疑問に思ったのは以下の点。  

・HTTPS以外にセキュアなプロトコルってあったっけ？SSHくらいしか思いつかないけど？  
・Webサーバにおける脆弱性と認識される情報ってなんだろう。  
・ポートスキャンへの対応って単純に応答しないように設定するだけ？  
・通信元のIPアドレスが想定範囲と離れていることで何が不都合？  
・DNSを経由せず、直接IPアドレスを入力されるのはリスクになりえるのか？  

疑問に思ったところはすべて間違っていたので、しっかり確認していきたい。  

``` txt : 16分 5/10
HTTP × TLS
踏み台
ゼロデイ

イ
ア

通信プロトコル × 種類
ポート × バージョン
応答しないようにする × 必要なポートだけ開ける
WAF

ウ、オ × ア、ウ、オ

---

[1]
〔aについて〕
Webシステムという性格上、顧客はWebサーバと通信を行うことになるため、やり取りに使用されるプロトコルはHTTPになります。HTTP通信の暗号化を行うインターネット標準規格はTLS(Transport Layer Security)です。
TLSはSSL3.0をもとに策定された規格で、現在のインターネット通信において認証・暗号化・改ざん検知の機能を提供する標準プロトコルです。2020年現在の最新版はTLS1.3です。

なぜSSLではなくTLSなのかということにも言及しておきます。以前からHTTP通信の暗号化ではSSLがインターネット標準として使用され、今でもTLS/SSLというように併記されることがあります。しかし現在、SSLはセキュリティ上の脆弱性により使用が非推奨とされている※ためインターネット標準という観点からいえば不適切となります。

∴a＝TLS

※2015年6月、RFC7568によってSSL3.0の使用は禁止された(Wikipediaより)
→
セキュアな通信プロトコルはHTTPSがダメならTLSとかSSLとかそういうのがある。  
てかよくよく考えればHTTP over SSL/TLSなんだからTLSでも十分伝わったか。  
午前のほうでもがっつりまとめてるのでこれは完全に俺の落ち度ですね。  


[3]
ポートスキャンは、コンピュータやルータのアクセス可能な通信ポートを外部から調査する行為で、不正アクセスを行うための下調べや、脆弱性検査などの目的で実施されます。スキャン対象の応答からOSの種類、稼働しているサービスとそのバージョンなどの情報が得ることが可能です。
WebサーバはDMZに設置され外部からのアクセスを受け付けている状態です。このためポートスキャンは容易に成功し、Webサーバソフトウェアの種類とそのバージョン情報などを得ることができます。

∴種類，バージョン

表2の項番1の改善対策欄にて「Webシステムのサービスに必要なポートだけをインターネットに公開する。Webサーバが必要のない問合せに応答しないようにする。」とポートスキャンへの対策が説明されています。不必要なポートを開けたままにしておくと攻撃者に情報や攻撃チャンスを与えることになってしまうため、「必要なポートだけ開ける」ように設定を変更し、構成情報をできるだけ秘匿する必要があります。

∴必要なポートだけ開ける



[4]
ア
正しい。通常であればWebサイトへのアクセスはドメイン名で行うため、IPアドレスの直打ちでのアクセス自体がかなり特殊です。IPアドレスを1ずつ増加させながらpingを送信し、インターネット上に存在するホストを検出するPINGスイープという行為がありますが、「ア」はそれのHTTP版にあたる行為であると推測できます。したがってサイバー攻撃の可能性があると判断できます。

オ
正しい。送信元が偽装されている、又は、本来アクセスがあるはずのない地域から行われたものと考えられるため、サイバー攻撃の可能性があると判断できます。
```

---

## プログラミング ライフゲーム

30分は超えてしまったが、全問正解した。  
話はわかったが、表現が思いつかなかったのと、最後のなぞなぞが解けなかったために30分を超えてしまった。  
それ以外は全部わかっているので、特に解説の必要はないかな。  

``` txt 30分オーバー 9/10
×
×
○
○

(k-1) * N + j

temp[c]と1が等しい
(temp[i]と0が等しい) and (eが3と等しい) → 正確には(eと3が等しい)だな。
m[i] ← 1

盤上における1行目、N行目、1列目、N列目の端のマス 100%
他)チェックするマスが盤の第1列または第N列の場合
→これ微妙に違うかも。行については言及してはいけないやつだ。
まぁ、部分点はもらえるかな。

2
for(iを2からpまで1ずつ増やす)

---

[3]
αを含む一連の処理は、aとbの値を調整する処理です。aとbは、その後のfor文でx(列)の開始位置と終了位置を指定する変数です。なぜこのような処理をしなければならないのかというと、チェックするマスの隣接するマスの数と位置が、中心となるマスの位置によって変わるからです。
pm03_13.gif/image-size:363×82
上記のように、現在チェックしているマスが盤上の1列目ないしN列目に位置するときは、隣接するマスの数が少なくなります。具体的には、中心となるマスがどの列に位置するかによって開始位置と終了位置の調整が行われます。
1列目のとき
隣接するマスは1列目と2列目なので、a←0、b←1 にする
N列目のとき
隣接するマスはN－1列目とN列目なので、a←-1、b←0 にする
その他(x列目のとき)
隣接するマスはx－1列目、x列目、x＋1列目なので、a←-1、b←1 にする
これを踏まえて、αの2つの条件のいずれかを満たすのはどのような場合かを考えていきます。

まず、「i-1がNで割り切れる」場合を考えます。仮に N＝5 だとすると、i-1 が N で割り切れるときの i は、6、11、16、21、…です。これは i×N＋1 の数であり、どれも盤上の1列目に対応します。
次に、「iがNで割り切れる」場合を考えます。先程と同様に N＝5 だとすると、i が N で割り切れるときの i は、5、10、15、20、…です。これは i×N の数であり、どれも盤上のN列目に対応します。

よって、αの2つの条件を満たすのは、「チェックするマスが盤の第1列又は第N列の場合」となります。

∴チェックするマスが盤の第1列又は第N列の場合



[4]
update関数は配列mを次世代に更新する関数です。最初の世代（第1世代）に対してupdate関数を1回実行すると、配列mは第2世代に更新されます。

図3のテストプログラムでは、第p世代が正しい結果であることを確認するためのプログラムです。仮に第5世代を検証したい場合、p＝5ですので、2行目のfor文内のupdate関数は(i=1…5までの)5回実行されます。第1世代にupdate関数を5回適用すると配列mは第6世代になります。検証したいのは第5世代の配列mですが、図3のプログラムでは第6世代の配列mと第5世代の配列rを比較することになってしまいます。

配列mを第p世代にしたいときには、update関数をp-1回実行しなければなりません。図3のプログラムではp回実行してしまうので、テストは常に失敗します。つまり、誤りがあるのは2行目のfor文の継続条件です。

これを改善するには、update関数がp-1回実行されるようにプログラムを変更する必要があります。for文の「1からpまで」を「2からpまで」若しくは「1から(p-1)まで」に変更することでこの目的を達成できます。模範解答では「2からpまで」の方が採用されていますが、for文内でiが使用されているわけではないため、プログラム的にはどちらでも構わないと思います。

∴(1) ケ＝2
　(2) for (iを2からpまで1ずつ増やす)
```

---

## ネットワーク スイッチ間の接続経路の冗長化

簡単。  
口で説明できるくらいの余裕があれば問題ないと思われる。  
外した1問も表現の問題で言いたいことは間違っていない。

``` txt : 25分 9/10
[1]
オ
ア
ク
カ

[2]
VLAN10のポートIDにp10を追加 100%
他)p10にVLAN10を設定する

[3]
部署2サーバ
VLAN20からのアクセスとみなされるため 0%
→PC1と部署1サーバが所属するVLANが異なるから
VLAN10
VLAN20

[4]
イ、ウ
```

---

## データベース コンビニエンスストアにおけるデータウェアハウス構築及び分析

久しぶりのデータベースの問題でうまくできるか不安だったが、簡単なほうだったので問題なくいけた。  
全体的にオードソックスなデータベースの問題だった。  
長文は微妙に間違えてるかもしれないが、部分点くらいはもらえる出来ではなかろうか？  

・ORDER BY でAVG関数を実行した別名で指定できるっけ？  
→できるっぽい。ORACLEでもやってる。できないと記憶していたのは何だったのか。  
・長文における肝は販売されたのに在庫が動いていないデータ。そこをつければなんでもいい？  
→具体的なテーブルは必要なかった。販売したのに在庫が変動していないデータを抽出できれば十分そうだった。  
・SUM(NULL)の結果は?0?じゃなきゃ販売されていない数量は0になるという案件を満たせない。ちゃんと確認する。  
→結果的には勘違いだったが、SUMはNULLが1件でも含まれていると結果がNULLになるので、ISNULLでNULL変換する必要あり。  

ORDER BY句は、結果レコードの順序を指定するときに使用します。  
結果レコードをソートするには、属性名または任意式を指定します。  

``` sql
RETURN Results AS
SELECT SUM(Price) AS Total
GROUP BY WineType
ORDER BY Total DESC
```

``` txt : 22分 8/9 実質全問正解
販売時単価
←
←

LEFT OUTER JOIN
ST.店舗ID = SS.店舗ID
ST.商品ID = SS.商品ID

ORDER BY SF.売上年月 DESC,SF.店舗ID,AVG(SF.日間在庫数量) DESC ×
ORDER BY SF.売上年月 DESC，SF.店舗ID ASC，平均在庫数量 DESC

α
売上ファクト表から販売実績があるのに在庫実績が存在しない在庫実績のデータ 100%
他)在庫数量を記録していない日の商品の在庫数量を実績から導出したデータ 

---

[3]
〔gについて〕
〔売行きが悪い商品分類の一覧の作成〕には「一覧は，売上年月が新しいものから，店舗IDを昇順にして，平均在庫数量が多い順に表示させる。」とあります。図3のSQL文には表示順に関する記述がないので「ORDER BY句」を追加する必要があります。SELECT文で取得されたレコードを、ORDER BY句を用いて売上年月の降順、店舗IDの昇順、平均在庫数量の降順に並び替えるには以下の指定が必要です。

※昇順にする場合は列名の直後にASCを記述し、降順にする場合は列名の直後にDESCを記述しますが、ASCの方は省略可能です

売上年月が新しいものから(降順) → SF.売上年月 DESC
店舗IDを昇順にして → SF.店舗ID ASC
平均在庫数量が多い順(降順)に → 平均在庫数量 DESC

したがって、空欄には「ORDER BY SF.売上年月 DESC, SF.店舗ID ASC, 平均在庫数量 DESC」が当てはまります。
（※SF.はつけなくてもSQL文は動作しますが、問題の指示により列名の前に表名をつける必要があるので注意してください）

∴g＝ORDER BY SF.売上年月 DESC，SF.店舗ID ASC，平均在庫数量 DESC


[4]
(1)で述べたように、不足しているデータとは在庫記録がなかった日の在庫数量データです。1日3回の在庫確認を徹底すれば済みそうですが、在庫変動が乏しい商品をチェックするのは手間ですし、設問の指示に「販売及び在庫管理の運用方法は変更しないこと。」とあるので、現状の運用方法のままで解決する方法を考えます。

在庫記録がない場合であっても、日ごとの在庫数は、直前に記録された在庫数量と販売表および販売詳細表の販売実績から論理的に導出できるので、在庫記録がなかった日の在庫数量データとしてこのデータを挿入すれば期待どおりに動作するようになります。したがって、"α"の表に追加されるべき不足するデータとは「記録していない日の在庫数量を、直前に記録した日の在庫数量と販売数量から求めたデータ」になります。

∴在庫数量を記録していない日の商品の在庫数量を実績から導出したデータ

```

---

## 組込みシステム開発 飲食店向けタッチ式注文端末

30分かけてしまったが、25分の地点でほぼ回答は完了していたし、何より簡単だった。  
久しぶりにやってみたけど、これは簡単な部類の問題なので特に問題ない。  

今回は都度、ノートにグラフや流れを書きながら問題文を追っていったのでとても解きやすかった。  
この程度の工夫でこれほどまでに効果が出るのに驚いている。  
残りの問題もこのペースでやってみる。  

``` txt : 30分 6/7

0.7
ウ
エ

タッチパネル
タッチされた座標 (タッチされた座標情報)

画面の切替え中か

呼び出し元の画面種別 ×
有効なボタンの座標情報

---

[4]
下線②の情報とは、入力判定タスクからメインタスクへの通知に含まれる二つの情報です。

ボタンをタッチした場合、端末はタッチされたボタンに対応する画面を表示しますが、次にどの画面を表示するかはメインタスクで決定されます（入力判定タスクはタッチの有効性を判断するだけで、どのボタンが押されたかまでは判断しません）。このため、入力判定タスクからは次の画面を判断するために必要な情報をメインタスクに通知する必要があります。

メインタスクが次の画面を判断するためには、どの画面のどのボタンが押されたかを知らなくてはなりません。つまり、必要な情報とは「現在の画面種別」と「有効なボタンの座標情報」です。したがって「有効なボタンの座標情報」が答えとなります。

∴有効なボタンの座標情報

→
最初に書いた「ボタンの座標」ってのもあながち間違いではなかったのかもしれない。
少なくとも部分点くらいはもらえる回答だったと思う。
画面種別ってのは現在の画面のことを言っているのだとわかれば悩む必要はなかった。
だとしたら、次の画面に遷移するための情報は限られてくるからある程度の予測はできただろうに。

```

---

## 情報システム開発 通信販売用Webサイトにおける決済処理の設計

ばちくそ設計の話でとても好感の持てる問題でした。  
話も簡単で全問正解かと思いきや、2つも間違ってしまった。  
それほど悩んではいないので、サラッと確認して終わりの問題。  

``` txt : 24分 6/8
配送センターに商品の発送を指示する
他)配送センタへ商品の発送を指示する
Webサイトで顧客に商品の発送を通知する
他)顧客に商品の発送を通知する
入金期限の期間内である
他)入金期限を過ぎている
入金期限を過ぎている
他)入金期限を過ぎていない
→よく見たらcとdの順番間違えてる。
やべーやつだ。

ウ × カ
エ

コンビニ支払、入金データ確認 × 決済番号取得、決済情報通知

期限当日に入金した場合、期限外判定となり取消処理される 0%
入金されている購入情報が取り消されてしまう
→言いたいことあってるから部分点はもらえると思うけどな。

---

メモ

期限内に入金したのに、先にチェックが走ったら期限外の判定になって購入が取り消されてしまう
期限日に入金した場合に期限外判定になり購入が取り消されてしまうため

---

[2]

[e]はクラス「クレジット購入情報」のメソッド名、[f]はクラス「コンビニ購入情報」のメソッド名です。両クラスは共にクラス「購入情報」の子クラス（派生クラス）になっている事から、[e]と[f]は購入手続きに関わる処理のうち、クレジット購入時とコンビニ購入時それぞれに固有の処理であることがわかります。

〔eについて〕
クレジット決済処理をまとめた表1を見ると、クレジットカードが決済完了した場合は「商品発送」を行うことになっており、この処理はクラス「クレジット購入情報」にあります
。一方これと対になる処理として、カード利用不可であった場合に「再決済依頼」をする事になっていますが、図4のクラス図には記載されていません。
したがって[e]には「再決済依頼」が入ります。

∴e＝カ：再決済依頼

→
決済情報通知にしたのは、前の問題でそう答えた奴があったからな気がするなぁ。
入金データチェックのアクティビティでそう答えたからだ。
でも、これはコンビニ決済の話であってクレジットカードではなさそうなので、確かに間違って正解だなって思った。
ようやく納得が行きました。


[3]

抽象操作（抽象メソッド）は、処理の内容が入っておらず、外部から呼び出すときのインタフェース、すなわち戻り値の型、メソッド名、引数の型、引数の数のみが定義されているメソッドです。抽象メソッドを1つ以上含むクラスは抽象クラスといいます。処理内容が定義されていないため、抽象クラスをインスタンス化することはできず、必ずサブクラスに継承してオーバーライドし、処理内容を確定する必要があります。

オーバーライド（Override）
上位クラスで定義されたメソッド(メンバ関数)を、下位クラス側の役割に応じて再定義し動作を変更すること

図4のクラス図を見ると、クラス「決済」は「クレジット決済」と「コンビニ決済」の2クラスに継承され、それぞれでメソッド「決済手続」をオーバーライドしています。
クラス「コンビニ決済」でオーバライドしたメソッド「決済手続」には、コンビニ決済固有の処理（すなわち、クレジット決済とは異なる処理）が入ります。
なぜなら、仮に決済手続に関わる「クレジット決済」と「コンビニ決済」で共通の処理があるならば、「決済方法選択」のようにスーパークラスである「決済」側で処理を定義するべきだからです。

コンビニの決済処理の処理内容が記載された表2には、「決済方法選択」「決済番号取得」「決済情報通知」「コンビニ支払」という4つの処理名称がありますが、このうち「決済方法選択」はクレジット決済と共通の処理であり、スーパークラスで定義済です。
また「コンビニ支払」は、図1のアクティビティ図でもWebサイトの処理範囲外とされているように、顧客が行うものであってシステムは関与しません。
したがって、残った「決済番号取得」及び「決済情報通知」がコンビニ決済クラスで実装すべき処理内容となります。

∴決済番号取得，決済情報通知

→
思いっきり客が操作する内容も答えに含めていた。
考えるのはあくまでシステムで行う事か。
そう考えれば、消去法で残った奴のみって事になるかね。

決済するときに、その番号を取得する。
決済が確認出来たらデータを生成する。
データの存在が確認出来たら通知を行う。
普通に考えればこの流れ。
しかし、仕様書ばかりに目を通していると、そういうのを考える余裕がなくなる。
そういうわけだ。


[4]
改めて「入金データチェック処理」及び「入金期限チェック処理」の内容を簡単にまとめておきましょう。
入金データチェック処理
入金データを取り込み、その決済番号がWebサイトで保持している決済番号と一致し、該当の購入情報が取り消されていない場合に商品発送を行う
入金期限チェック処理
商品発送前かつ取消前の購入情報に対して、入金期限が過ぎていないかをチェックする
以上を踏まえて解答するにあたっては、問題文に示された「日付が変わった後」という記述がヒントになります。仮に1月31日が入金期限日の注文について、その注文の料金支払いが1月31日の23時以降に行われたことを考えます（バッチ処理は1時間毎に行われるので）。日付が変わって2月1日になってからバッチ処理が実行される際、先に「入金期限チェック処理」を行ってしまうと、当該注文は「未発送かつ入金期限日を過ぎている」と判断され、（顧客は入金期限日内に支払いをしていたにも関わらず）購入取消の処理が進められてしまいます。これが、処理順の先後によって生じる不具合です。

逆に「入金データチェック」を先に行えば、入金確認→商品発送の手続きで発送済となり入金期限チェックの対象から外れるため、購入が取り消されることはありません。

∴入金されている購入情報が取り消されてしまう

```
