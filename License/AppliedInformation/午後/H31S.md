# 平成31年春季

---

## セキュリティ ECサイトの利用者認証

久しぶりにセキュリティやったけど意外と間違えた。  
しかし12分で鼻くそほじりながらできる程度には精神安定剤足りえる。  
簡単ではあるがもっと詰める必要があるということか。  

``` txt 12分 6/9
カ × ウ
ア
ウ

ブルートフォース
パスワードリスト
パスワードを一定回数間違えたらロックする 0%
→パスワード入力試行回数の上限値の設定

ハッシュ化した値から元の値を類推できないため 100%
他)ハッシュ値からパスワードの割り出しは難しいから
イ × ア

外部から不正アクセスによる通販事業の甚大な損害が発生する可能性 0%
→他サイトから流出したパスワードによって、不正ログインされる

---
[1][1]
本人認証は、知識ベースの認証(ナレッジベース認証とも呼ばれる)、所有物認証、生体認証に大別できます。

〔aについて〕
(ⅱ)は所有物認証に該当します。
所有者認証は、正当な利用者が認証情報を持っていることをもとに認証を行う方式です。
所有物認証の代表的な方式に、ICカードやPCに利用者のディジタル証明書を組込み、PKIによってその正当性を確認することで利用者認証を行う仕組みがあります。

∴a＝ウ：ディジタル証明書

→
利用者の所有物にディジタル証明書は含まれない。
これはサーバーが配布するモノであって、利用者が確認するもの。
それが利用者を特定するモノにはならない。

と、思っていた時期が僕にもありました。
所有者情報としてあっていいものなんですねこれ・・・。
割と知らなかった。
ちゃんとメモっておこう。
てか、ディジタル証明書ってなにさ？午前のほうにもまとめてなかったんだが？
→
デジタル署名が印鑑なら、デジタル証明書は印鑑証明みたいなモノらしい。
で、デジタル証明書には本人情報も含まれるっぽいので、実質所有者の照明になるって理屈なのかな？
それか、アクセスしてくる利用者が生成したデジタル証明書ってことかな。
PKIに従うなら自身の秘密鍵で生成可能だしなぁ。



[3][2]
レインボー攻撃は、レインボーテーブルと呼ばれる、ハッシュ値からパスワードを特定するための逆引き表を用いて、パスワードを高速に解読する手法です。

レインボーテーブル(以下、Rテーブル)は、使用される文字種と文字数の組合せごとに作成されます。解説対象となるパスワードの長さが長くなったり、使用可能な文字種が増えたりすると、全ての組合せを網羅するためのRテーブルのサイズも当然大きくなります。例えば、文字種が本問の通り70種、ソルトを加えた文字列長が60文字だったとすると、70^60種類のキー値を網羅するRテーブルの作成が必要になります。パスワードの長さは可変長であり、ソルトの長さも公開されていない状態で、幾つものRテーブルを作成するのは現実的に困難となります。したがって、十分な長さのソルト値を加えてからハッシュ化するのは、Rテーブルの作成を難しくするための対策になります。

イ アカウント情報が窃取されてもソルトの値が不明だから
→
ソルトの値は認証情報データベースに登録されているため、アカウント情報が窃取されると当該アカウントのソルトの値を特定されてしまいます。

∴ア：Rテーブルの作成が難しくなるから
→
ソルトと結合させるってことはソルトがわからない間は大丈夫じゃね？って思ったけど、盗まれた地点でこいつも盗まれるんだから意味ないって話か。
それよりも桁数不明のソルトも含めたレインボーテーブル作成のほうが困難を極めるって方向のほうが正しかったか。


[4]
表1「パスワードに対する主な攻撃」の項番5の説明にあるように、複数のサイトで同じパスワードを使いまわしている利用者は、パスワードリスト攻撃により不正ログインの被害を受ける可能性があります。

M社の立場に当てはめると、パスワードの使いまわしが行われると、セキュリティ強度の低い他サイトから流出したパスワードによって、M社サイトに対してパスワードリスト攻撃が試みられ、不正ログインされてしまうリスクがあるということです。

∴他サイトから流出したパスワードによって，不正ログインされる

→
最初「他サイトから不正ログインされる」って書いたけど、短すぎたので盛大に持ったら逆にダメになった。
```

---

## プログラミング 券売機の注文の状態を判定するプログラム

めっちゃ簡単だったので特にいうことはない。  
業務システム的な側面が強かったのですんなり理解できた。  
最後の間違えた問題だけ知見を得る。  

``` txt : 30分 8/9
0,2,3,4,5
false
3:0

order[i].A
order[i].N * 100 + order[i].S * 10
status_table[status][event_index].discount
status_table[status][event_index].status
acceptedがtrueに等しい

イ
ウ × エ

---

イ
実現可能です。
まず表1のオプションにつゆの量として、普通、多め、少なめをN=4、S=0、O=1として追加します。次に、新しく状態6を作成し、状態1から状態6を経て状態2に移るように表2を変更します。
これにより、オプション指定が必須なメイン商品の状態遷移を「1→6→2」とすることができ、2つのオプション項目を必須選択にできます。

ウ
「1回の注文でセットメニューに組み込めるサイドメニュー1+サイドメニュー2のセットが複数あった場合は、50円×セット数の値引きを行う」と解釈します。例えば、牛丼+野菜サラダ+漬物+みそ汁+スープの注文があった場合を考えます。
問題文の条件の場合は、図1の〔セットメニューの値引きのルール〕に「値引きは食券購入ごとに1回だけ適用される。」とあるため、値引き金額は50円になります。それに対して、「ウ」の変更を加えた場合は、100円の値引きになります。
これを実現するには、セット対象のサイドメニューが注文された数をプログラム中で数える必要があるため、表1、2の内容を変更するだけでは実現できません。

エ
実現可能です。
まず表1のメインメニューに名称=カレー、N=1、S=1、O=3を追加します。次にオプションに、「カレー(並)」と「カレー(大盛り)」をN=4、S=0、O=3で追加することで実現可能です。

ウに関しては表2の状態遷移図を修正すればいけると思ったが、よく考えればダメだった模様。
問題文をよく見ると、商品数をカウントしないといけないらしく、カウントのためにはプログラムの修正の必要があるからダメなんだと。
エは頓智だな。何でもかんでも追加すればいけるなら素直にそうすべきだった。
```

---

## ネットワーク 無線LANの導入

この問題のおかげでチャネルとリレーエージェントを知ったんだ。  
何回もやったおかげで普通にわかるようになってきた。  

``` txt 20分 10/11
サ
イ
キ
エ
オ

周波数が同じにならないようにずらして設定する 0%
→4台のAPに、それぞれ異なる周波数チャネルを設定する
ア
a
b.c,d

L3SW
ルータ2

---

[2][1]
図2を見ると、来訪エリア全体を4台のAPでカバーする配置になっており、各APのカバーする範囲は一部が重なり合っています。

無線LANネットワークでは、近接するネットワークとの電波干渉を避けるために、使用する周波数帯をネットワークごとに微妙にずらすことが可能になっています。
このときに設定する値をチャネル(チャンネル)といいます。
5GHz帯を使用するIEEE802.11acでは19チャネルが使用可能です。
5GHz帯では、各チャネルの周波数帯は完全に独立しているので、2.4GHz帯のように近接するチャネルを設定しても電波干渉は起きません。
しかし、近くの無線LANネットワークで同じチャネルが使用されていれば、やはり電波干渉の発生により通信が不安定になる可能性があります。

4台のAPはカバーする範囲が被っているので、電波干渉を避けるためにそれぞれ異なるチャネルを設定する必要があります。

∴4台のAPに，それぞれ異なる周波数チャネルを設定する

→
4台とわかっているのだからそう書けばよかった。
どこかでチャネルは5Hzづつずらすなんてのを見つけたからそれに意識を取られた。
具体的に書く必要はない。それぞれ異なる周波数を設定すればいいだけの話だから。


[2][2]
[c，d]
通信パケットのVLAN情報はAPで設定されるため、L2SW8のcとdは、VLAN10～50及びVLAN100のどちらの通信も通すようになっていなければなりません。

各ポートに設定されるVLANは、a＝VLAN100、b＝VLAN10～50、cとd＝VLAN10～50及びVLAN100 となります。
1つのVLANが設定される箇所はa、複数のVLANを設定する箇所はb，c，dです。


[3]
デフォルトゲートウェイはIPレベルで通信できる機器じゃないとだめ。
L2SWと書いてあったので、残りの選択肢はルーター2しかない。
```

---

## データベース 薬剤管理システムの再構築

まぁ、及第点ってところじゃないですかね。  
わかるところはわかったけどって感じ。  

でも、昔に解いた時はとても難しく感じたので、それから比べたら意味を理解して解けるようになったと思う。  
最近、デッドロックや移行クエリのおかげもあって、それなりにできるようになってきたように感じる。  

しかし毎回、回答書く必要あるかなぁ？  
なんか段々面倒臭くなってきた。  
まとめる事が目的になりつつある。  
重要なのはそこではないような？  

うん。毎回書くの怠いし、点数見れれば十分だし、後はどう考えてそれを入れたのか書けば十分じゃないか？  

``` txt : 解説 29分 9/11
## 2
[1]処方箋 × 処方箋明細

→
処方箋レコードは削除しないと書いてあったので、ここらへんだと思っていたが、よくよく考えれば、明細側をINSERTしたりDELETEすべきだよな。

→
医師が、(4)処方箋の登録（発行前）を行うと、処方箋テーブルと処方箋明細テーブルに処方しようとしている薬剤が登録されます。
その後〔薬剤併用チェック処理〕により、"併用禁忌"または"併用注意"となる組合せが出力され、医師はその情報を参考にして処方する薬剤を見直します。
見直しでは、処方する薬剤の種類を変えたり、追加したり、取り止めたりといったことが行われ、
その際に処方箋明細テーブルから登録済の薬剤を削除したり、新たに薬剤を追加したりといった操作を行うことになります。

つまり、(5)薬剤チェックの段階では、処方箋明細テーブルに対してレコードの削除や作成が行われると考えられます。したがって、cには「処方箋明細」が当てはまります。
なお、削除の結果、処方箋明細が0件になる場合がありますが、その場合でも「処方箋レコードは削除しない」としているので、処方箋テーブルは操作対象外となります。


## 4
k: <= CURRENT_DATE × IS NULL
表2で思いっきりnullが入るように記述されている。
これだけでも割とヒントだった。
で、処方されていないって事ならIS NULLになるわな。

→
kには上記の3つ目の条件で集計対象を絞るための条件式が入ります。
表1・2を見ると、薬剤が処方されたときは、処方箋テーブルの"薬剤処方年月日"列をNULLから（非NULLの日付に）更新することがわかります。
つまり、処方箋テーブルの"薬剤処方年月日"列の値がNULLのレコードは、まだ薬剤が処方されていない状態ということです。

在庫保証の対象となるのは「まだ薬剤が処方されていない」レコードですから、"薬剤処方年月日"列の値がNULLのレコードを選択すれば、該当するレコードを絞り込めます。
よって、条件式には「薬剤処方年月日 IS NULL」を指定するのが適切です。


## コラム
※WITH句
副問合せに名前を付け、それを他のSQL文内で使用できるようにするものです。
「WITH 副問合せ名 AS (クエリ文)：副問合せ名」を記述することにより、ASの直後のクエリ文を何度も記述することなく使い回すことができます。
```

---

## 組み込みシステム 家庭用浴室給湯システム

簡単なほうだったが、最初の認識を微妙にミスったので点数が取れなかった。  
ほぼ正解みたいなものだけど、実際にはそうは行かないだろう。  
計算問題も普通に出来たし、1問を除いて全て正解とみなしても十分だと思うけどな。  

人感センサーと出入りセンサの部分は、出入りセンサーも連続した値の観測を行う記述が後ろにあったので、  
それで勘違いしたのかもしれない。  

出入りセンサでずっと0を観測していても・・・、というか、異常事態を観測するためには3分の観測が必要なので、  
その地点で人感センサーじゃないと機能しない事がわかるな。  

``` txt : 回答 30分 5/9
## 1
[1]
a : 出入り × 人勧
b : 人感 × 出入り
c : いなくなった × 浴室から出た
[2] 3.2


## 2
[1] : ク
[2] : チ


## 3
[1] d : "異常"を受信したとき 0%
→ 連続して361回"未検出"を受信

[2]
e : 在室
f : 未定
```

``` txt : 解説
## 1
[1]
〔a，bについて〕
本問のシステムには人感センサと出入りセンサしか使われていないので、空欄には2つのいずれかが入ります。

センサの出力が1の状態から連続して0となった場合に異常事象と判定されるのは人感センサの方なので、aには人感(センサ)、bには出入り(センサ)が入ります。

∴a＝人感
　b＝出入り

〔cについて〕
人感センサは、人の動きを検出したときは1を、検出しなかったときは0を出力します。人感センサの出力は浴室内に人がいるかどうかにかかわらず行われるので、
出入りセンサがなければ、浴室から出て浴室内に人がいなくなった場合にもセンサの出力が1の状態から連続して0となり、異常事象と判定されてしまいます。
出入りセンサ単体では入室・退室のどちらかを判別できませんが、人感センサとの組み合わせによって浴室から出たことを判定できるようになっています。

本文中では、「人が浴室に入ったのか，浴室から出たのか判別できない」「浴室から出たと判定する」というように、
人が浴室から出るイベントを"浴室から出た"と記載しているため、cには「浴室から出た」が入ります。

∴c＝浴室から出た

[2]
給湯器の仕様を読むと、各指示のデータ長はいずれも3バイトの固定長とあります。
また、リモコンと給湯器を繋ぐシリアルI/Fの通信速度は9,600ビット／秒であるとわかります。
本問では1バイトのデータは10ビットで送信されるとしているため、指示1つ当たりの通信時間は、

　10ビット×3÷9,600ビット＝3.125ミリ秒

本問では「小数点第2位を切り上げて，小数点第1位まで求めよ。」という指示があるため「3.125→3.2ミリ秒」となります。

∴3.2


## 3
[1]
監視タスクが"異常"を通知するのは、人が浴室に入った後、出入りセンサの確定値が1になる前（すなわち退室する前）に、人感センサの出力が連続して3分以上0であったときです。
人感センサの出力は、人検出タスクによって500ミリ秒周期で読み出され、出力1ならば"検出"、出力0ならば"未検出"が監視タスクに通知されることになっています。
監視タスク側では、"未検出"を連続して受信した回数を数えることで3分経過したか否かを判断することとなります。

「3分÷500ミリ秒＝360回」ですから、"未検出"が360回通知されたら異常に遷移すると考えがちですが、最初に0を読みだしたのを1回目とすると、
そこから3分間の経過をカウントする必要があるので3分を経過した時点は360に1を加えた361回目となります。
pm07_7.gif/image-size:455×65

∴d＝連続して361回"未検出"を受信

なるほどね。そこまで読まないとダメだったか。
```

---

## 情報システム開発 Webサイトの開発

めちゃ簡単だった。  
間違えたところもpxの付け忘れとか、imagesとimageの違いとか、よく確認せずに書いた事なので、これはスルーしてくれ。  
長文等も全部正解したし、悩むことも無かったので特に解説もいらない。  
一番最初のスクリーンサイズ毎に切り替える手法が思いつかなかったけど、突然「レスポンシブデザイン」という言葉を思い出した。  
teela開発でやったはずだったので、それのたわものだなと思った。  

``` txt 17分 : 7/10 実質100点
レスポンシブデザイン
他)レスポンシブWebデザイン

HTML
オ
キ

デバイス毎にファイルを1から全て作る必要があるため
他)デバイスごとのHTMLファイルを開発する必要があるから

768 × 768px
1023 × 1023px
/images/topimages_w768.jpg × /images/topimage_w768.jpg
no-repoeat

画像の読み込みによる遅延防止のため 100%
他) 画像表示の遅延を防ぐため

```
