# 平成26年春季

---

## セキュリティ 営業支援サーバへのSSL導入

最後の問題でしっくりくる答えが思いつかなくて26分もかかってしまった。  
結局あってたからよかったけど、全体的には10分で最後の問題までいけたので難易度は優しい。  

最後の問題、クライアント証明書に対して行う適切な対応について、PCにインストールされたクライアント証明書をどうにかするのかってことしか考えられなかった。  
クライアント証明書に対してパスフレーズの設定等できるのだろうか？なんて考えたけど、そんな話聞いたことがない。  
それかPCを持ち出すときにクライアント証明書の有効期限をその日だけに設定するとかも考えた。  
でも、そんな面倒なことするくらいならサーバ側で失効を確認して拒否すればいいだけだよな。  
証明書は失効リストに載せる話しか聞いたことないし、もうそれでいいやってやったら当たった。  
認識あってマス。  

``` txt 26分 7/8
盗聴
改ざん

P社のノートPCであることを確認するため
→営業支援システムを利用できるPCを限定するため

クライアント証明書のインストール作業 100%
社内からは営業支援サーバを使用可能であるため 100%
他)社内LANからの利用には被害が及ばないから
HTTPS
HTTP

対象のクライアント証明書を失効リストに載せる 100%
他)当該PCのクライアント証明書を失効させる

---

[2]
設問中にも指摘があるように、営業支援サーバが社外の不特定多数のPCからアクセス可能になっていると、不正アクセスや情報漏えいの危険性が高まります。

SSL/TLSにはクライアント証明書を使用したクライアント認証の機能があり、認証されたクライアントのみがサーバと通信を行えるようにできます。上記のセキュリティリスクを踏まえると、PCへのクライアント証明書のインストールは、社外から営業支援サーバにアクセスできるPCを限定する(不特定多数からのアクセスを禁止する)ために行われると判断できます。

∴営業支援システムを利用できるPCを限定するため



[4]
PCの紛失や盗難が発生した場合、通常は以下の事後対応をとります。
PCを遠隔ロックする
ログイン用パスワードを変更する
警察に被害届を出す
顧客情報が保存されている場合は顧客に知らせる
しかし、この設問ではクライアント証明書に対して実施することを問うているため、これに限定して考えます。

営業支援システムを利用するにはクライアント証明書がインストールされたPCを使用して、正しいIDとパスワードの組合せを入力する必要があります。つまり、クライアント証明書が無効であれば営業支援システムにはアクセスできません。運用予定のPC管理台帳では、証明書をインストールしたPC、PCの使用者、証明書の識別情報、証明書の有効・無効などの情報が管理されるため、PC管理台帳をもとに該当する証明書を失効させる手続きをとることが可能です。
この措置によって紛失・盗難が発生したPCを悪用した営業支援システムへの不正アクセスを防止できます。

∴当該PCのクライアント証明書を失効させる


```

---

## プログラミング 循環小数の循環節を検出するアルゴリズム

簡単なほうだと思うのだが、びっくりするくらい当たらなかった。  
表現の問題もあるが、やはり計算量の問題は当たらない。  
それと正解と思っていた問題が間違っていたので、勘違いもあったのかも。  
わかったからと言って、油断してはならないいい例だったな。  
どうでもいいが、問題自体は面白かった。  

解説を見てみるとなんでこんな頓珍漢な回答をしたのか不思議でならない。  
計算量の部分は仕方ないにしても、プログラミングの部分は普通に全問正解できたはず。  
できるところはできているので、もっと訓練を積んで余裕をもって答えられるようになっていきたい。  

``` txt 30分 2/9 実質5門正解
mとpが等しい × mがpと等しい
p ← amari(p * 10 , n) × p ← 1
mとpが等しくない × mがpと等しくない
t ← 1 × t ← s

4
3
→実際にトレースして問題なかったので特になし

戻り値はすべて0になる × s,tともに0である。
→部分点くらいはもらえるだろう

4 × O(1)
O(log n) × O(n)

---
[1]

〔イについて〕
プログラムの14行目から20行目までは、図4で示されている「循環節の先頭の検出」の処理に該当します。このフェーズでは「カメは引き続き，ウサギは最初に戻って今度は両者とも1歩ずつ進む。」と説明されています。
pm03_7.gif/image-size:465×220
ウサギの位置を最初に戻すには、変数 p を初期値の1（分子を1）に戻す必要がありますが、プログラム中にはこの処理が記述されていません。よって、whileループの前処理をしている[イ]には「p ← 1」が入ります。

→
単純に最初の位置に戻すだけなら1を代入するだけでよかった。
これはプログラムの一番最初でやっていること。
なぜさらに余りを求めるようなことをしたのだろうか。


〔エについて〕
図6中の21行目から26行目までは、図5で示されている「循環節の末尾の検出」の処理に該当します。この処理については、本文中に「循環節の先頭を検出した後、図5に示すように、ウサギだけが再びカメと余りが一致するところ(〈9〉と《15》)まで1歩ずつ進むことによって、循環節の末尾を検出する。」とあります。whileループ内では、ウサギが1歩進むたびに変数 t を1増加させていますが、図5を見るとわかるように、変数 t は0からではなく循環節の先頭を基準に1ずつ増加させる必要があります。変数 t はプログラムの冒頭で0に初期化されたままなので、ここには循環節の先頭が格納されている変数 s を使って変数 t に基準位置を設定する処理が入ることが予想できます。

ここで、例示されている n=56 の末尾検出処理を考えてみます。
第2フェーズで循環節の先頭位置4を変数 s に求めた後、[エ]の直前で amari() を1回を実行してウサギの位置を一歩進めているので、whileループ開始時の変数 p は一致位置の次の位置（余り32）になっています。そこから余りが一致するまでウサギを進めると t には5が加算されることになります。
pm03_8.gif/image-size:493×222
変数 t の説明には、「n=56の場合は9」とありますから、変数 t の基準位置として循環節の開始位置である4を与えてやれば、「4＋5＝9」というように末尾位置を正しく求めることが可能です。よって、[エ]には「t ← s」が入ります。

→
循環のスタートからカウントしないと意味ないのに初期化してどーするって感じ。
プログラムだけ見たから惑わされた感じがする。



[4]

O(オーダ)記法は、実行時に処理するデータ量によってアルゴリズムの計算量がどの程度増加するか、という視点でアルゴリズムを評価するものです。[オ]は空間計算量、[カ]では時間計算量について問われています。

空間計算量
処理を達成するために必要な記憶領域の大きさ

時間計算量
処理を達成するために必要な時間

〔オについて〕
関数 junkan のプログラムが必要とする記憶領域の大きさを考えます。

必要とする記憶領域の大きさは、関数内で宣言する変数の数に依存します。
表1「関数junkanで使用する変数及び関数」より、関数junkanのプログラムでは、5つの変数を使用していることがわかります。変数の数は定数であり、与えられたnによらず一定です。計算量がデータ量に依存しない場合、O記法では「O(1)」と表します。

∴オ＝O(1)

〔カについて〕
関数 junkan のプログラムの計算量を考えます。

関数 junkan のプログラムは、「余りが一致するまで」「循環節の先頭の検出」「循環節の末尾の検出」の3つの繰返し処理で構成されています。循環節の桁数が最大 n-1 であることから、3つの処理のいずれも最大 n-1 回で計算可能です。計算量がデータ量nに比例する場合、O記法では「O(n)」と表します。

∴カ＝O(n)
```

---

## ネットワーク サブネットを活用したファイルの保護対策

パズルみたいな問題だったな。  
またIPの数で間違った。何故だ。  

それ以外は特に何もないかな。  
機器名を答えよって問題がさっぱりわからないから適当に「認証サーバ」って書いたけどまさか正解だったとは。  

この問題やってて思ったけど、ネットワークはトレンドがあると思う。  
IPの最大数とかIEEE802.1Xとか直近で出た問題を何回か繰り返している。  
この調子だと25年の問題ってやったとしても意味が内容な気がしてならない。  
だって、直近の傾向に関係なさそうなんだもん。  
ということで、25年の問題に関してはitecの参考書を読むだけで済ませることにします。  
それで知識と考え方だけ抽出できればいいなって思いました。  

``` txt 30分 : 9/10
190 × 191
エ

192.168.0.12
e2
OUT
ANY
22
IN

認証サーバ

ウ

---

[1]
図2「変更後のM社のネットワーク構成」より制作一課PCへのIPアドレス割当て範囲は 192.168.1.64～192.168.1.254 とわかります。
サブネットマスクは255.255.255.0なので下位8ビットがホストアドレス部です。下位8ビットのうち"0～63"までの64個と"255"は使用できないため、2^8＝256個から上記65個を減じた191個が割当て可能なホストアドレス数です。

∴191


[3]
M社のネットワークでは各課のPCがサプリカント、スイッチがオーセンティケータに相当します。しかし認証サーバを担う機器は存在しないため新たに導入する必要があります。

∴認証サーバ


[4]

表2より毎日のバックアップが必要な最大量は、
制作一課用FS…10Gバイト
制作二課用FS…5Gバイト
制作三課用FS…15Gバイト
M社全体では30Gバイトになります。

30Gバイトのデータを90分以内に転送するために最低限必要な帯域は、

　(30Gバイト＝240Gビット，90分＝5,400秒)

　240÷5,400＝0.04444≒44(Mビット／秒)

さらに転送効率が80%なので、

　44÷0.8＝55(Mビット／秒)

したがって約55Mビット／秒を上回り、かつ最も小さい60Mビット／秒が正解です。

∴ウ：60Mビット／秒

30Gバイト
240Gビット / 
3600 + 1800

30Mビット/s

```

---

## データベース 旅客船Web予約システムの構築

いえーい100点。  
しかも20分。  
この年のデータベースは簡単だな。  
特にいうことがない。  
最後の長文も考えてる事はほぼ同じだった。  
と、思ったら微妙に違ったけど、まぁ部分点はもらえるだろう。  

``` txt : 20分 9/9
## メモ

問題はログまでロールバックされている事か。
ログをトランザクションに含めないようには出来ないのだろうか。
それかロールバックしてからログに書き込めるようにするとか。
変数受けして、ロールバックしてからその変数の内容をログに書き込むなんて対処が出来ればいいけど、あくまで流れだからな。

トランザクションを開始する前と完了した後にログを記録するようにする。
流れと言えばこれくらいか？


a : -
運賃係数
ユーザID = :ユーザID
パスワードハッシュ値 = HASH(:パスワード)
COUNT(*)
座席クラス
B.座席クラス番号 = C.座席クラス番号
A.船便番号,A.船便名,C.座席クラス番号,C座席クラス名
トランザクションを開始する前と完了した後にログを記録するようにする 100%
他)操作ログ表への記録を予約受付処理とは別のトランザクションにする


[a]
〔aについて〕
顧客エンティティとWebユーザエンティティには共通の属性「顧客番号」があります。
この属性「顧客番号」は、顧客エンティティ側では主キーであり、顧客を一意に特定します。
また、Webユーザエンティティ側でも主キーであり、Webユーザを一意に特定します。
どちらののエンティティもある顧客番号につき一意のエンティティですから、同一の顧客番号をもつ複数のレコードが存在することはありません。
したがって、顧客エンティティとWebユーザエンティティのカーディナリティは1対1であり、[a]には「―」が当てはまります。

つまり、主キーが同じなら1対1になるってことだ。


[4]
図4を見ると、「トランザクションを開始」から「トランザクションをコミット／ロールバック」までに予約受付処理自体とその操作ログ表への記録がひとまとめになっていることがわかります。
トランザクションには原子性という性質があり、一連の処理全部が正しく実行されたか、全く実行されなかったかのどちらかの状態で終了しなけばなりません。
このため、予約受付処理が失敗した際のロールバックでは、予約表、予約明細表、座席表だけでなく、操作ログ表もトランザクション前の状態に戻ってしまいます。
これが処理失敗時に操作ログ表のレコードが記録されなかった原因です。

予約受付処理が失敗した際にも、操作ログを操作ログ表に記録するためには、操作ログの記録処理を予約受付処理のトランザクションから分離しなければなりません。
したがって、適切な対応策は「操作ログ表への記録を予約受付処理とは別のトランザクションにする」です。
実装上はエラーハンドリングを行い、例外処理の中でロールバック処理＋操作ログの記録を行うことになります。

∴操作ログ表への記録を予約受付処理とは別のトランザクションにする

→

流れっていうからこの中で何とかするもんだと思うじゃん。
トランザクションの外に出せる回答が許されるならそうしたさ。
これは問題が悪いな。
```

---

## 組込みシステム 園芸用自動給水機

まぁ、できたほうではなかろうか？  
結構サービス問題もあったし、優しいほうだと思うけど、根本的にわからない問題もあったので、それはそれでまとめる。  
短絡の意味って何さね。  
短絡する条件って言われても短絡の意味がわからないのでなんともだったが、複数ボタン押してやればいろいろつながりそうだからってことで答えたらまさかの正解だった。  
セマフォの下りはわけわからん。  

``` txt : 30分 7/10
給水設定
給水弁操作
128
0 × 2
排他 × アクセス権

ユニット × 6
その列のキーを2つ以上押す 100%
他)複数のキーを同時に押す

給水設定

認証
暗号化

---

[1]
〔cについて〕
セマフォとは複数のプロセスが並行動作している状況で、共通資源（リソース）の排他制御をする仕組みです。基本となるセマフォは、セマフォ変数、P操作、V操作という3つの要素で構成されます。
セマフォ変数
現時点で利用可能な資源数を表す整数型の変数
P操作
セマフォ変数が0でなければ資源のアクセス権を獲得し、セマフォ変数の値を1だけ減らす
V操作
資源を解放し、セマフォ変数の値を1だけ増やす
セマフォの値は同時に利用可能な資源数を表しています。本問の給水器は、同時に給水できるのは最大2ユニットまでですので、セマフォの初期値は「2」となります。

∴c＝2

〔dについて〕
セマフォ変数の値は利用可能な給水可能なユニット残数を表しています。給水弁操作ユニットでは給水弁を開ける前にセマフォの獲得を試みます。このとき、セマフォ変数の値によって動作が分岐します。
セマフォ変数が2 または 1
給水弁を開く
セマフォ変数が0
待ち状態に移行
模範解答では「アクセス権」となっていますが、「セマフォ」や「使用権」といった語句でも問題ないはずです。

∴アクセス権


[2][1]
キースキャン回路はスイッチを格子状の配線にした回路で、出力ポートから1（H：ハイレベル）を出力し、そのときの入力ポートの値をスキャンすることで各スイッチのON/OFFを判断するものです。本問のキースキャン回路では、MCUから出力ポートP0～P3に順次1を出力し、スイッチが押されていれば通電により対応する入力ポートの値が1になるという具合です。

表2は上から1行ごとに次のように見ます。
P0をハイレベル（=1）にしても、P4～P7は変化なし
P1をハイレベル（=1）にしたら、P5がハイレベル（=1）になった
P2をハイレベル（=1）にしても、P4～P7は変化なし
P3をハイレベル（=1）にしても、P4～P7は変化なし
本問では入力ポートのうち値が1になっているP5に注目します。出力ポートP1=1のときに、あるキーを押下することでP5=1となったのですから、図3の回路図でP5とP1の線が交わる「6」が押されたと判断できます。

∴6
<https://www.ap-siken.com/kakomon/26_haru/img/pm07_6.gif>

→
根本的に勘違いしていた。
キースイッチがつながったらアース側に流れるモノだと思ってたけど、全然違ったわ。
出力から入力に流れてそのパターンで何が押されたのか認識するって流れなら入力ポートって名称も納得だわな。
その前提から問題文を見れば納得だが、当時それでわかったかといえば無理だろうな。


[2][2]
例えば、P0=1の場合にP1～P3のいずれかが1となるとに短絡（ショート）が発生します。短絡が発生すると定格以上の電流が流れるので出力ポートが破損する恐れがあります。ダイオードは電流の流れを一方向にする装置で、過電流が出力ポートに流れるのを防止します。

キースキャン回路で短絡が起こるのは、「設定開始」と「7」「8」「9」のいずれかを同時に押下するなどのように、同じ行に配置されている複数のキーを同時に押したときです。
<https://www.ap-siken.com/kakomon/26_haru/img/pm07_7.gif>

∴複数のキーを同時に押す

→
上に戻るわけがないと思っていたが戻る模様。
そんなことなら複数同時押し以外はないだろうな。

```

---

## 情報システム開発 地図を利用するアプリケーションプログラムの設計

もっと正解できる問題だったが、結構認識に抜けが合って正答率を下げてしまった。  
応えているときにふんわりした手ごたえだと、それなりに間違えるのは当たり前か。  
解説を読んでみると、文中にそれなりのヒントが散りばめられているので、まじで問題文を読む練習というか、  
応用特有の読み方を徹底しないといけないなーって思う。  

とはいいつつ、全体的に難しいことは無かったので、解きやすかった部類ではある。

``` txt : 28分 5/9 実質6
1
1
住所
属性クラス × 位置
操作盤、画像 × 位置緯度、位置経度

メールを作成する画面へ × - メールを作成する画面へ
→反例に習っていなかった。privateを明記しないといけなかった。
定義だけが定められており、処理は記述されていない 100%
他)操作の定義だけ行われ、実装は行われない

アイコンの要素数 × アイコンリストの大きさ

操作盤           地図
||   操作盤を描く ||
|| ←────── ||
|| ------------→ ||

---

[1][3]
基本データ型を用いていること、地図クラスとアイコンクラスに共通する属性、複数の関連する属性という記述から、属性"位置緯度"と"位置経度"についての指摘であることがわかります。

緯度と経度は2つ合わせて1つの情報という側面があるので、2つの情報をまとめて管理するクラスを作り、値のチェック（緯度であれば-90≦0≦90、経度であれば-180≦0≦180）などを加えた方が堅牢なシステムとなります。クラス名としては"位置"、最低限持つべき属性としては"緯度"と"経度"が適切です。

∴クラス：位置
　属性：位置緯度，位置経度

→
あーそういうことね。
ちょっと何言ってるかわからなかったけど、そういうことね。
プリミティブ型を使ってこういう意味で使ってるよって情報があるからそれをクラスとしてまとめろ。
操作盤とアイコンはそうしてるだろって事か。


[3]
〔eについて〕
シーケンス図では以下の書式で繰返し処理を記述できます。
pm08_5.gif/image-size:301×113
図3を見ると"アイコンを描く"がループ処理になっています。拡大ボタンが押された場合、地図上の全ての要素を再描画する必要があるので、地図クラスが保持するアイコンごとに"アイコンを描く"操作を呼び出すことになります。地図上のアイコン数は地図クラスの属性"アイコンリスト"のサイズを参照すればわかるので、1から「アイコンリストの大きさ」まで当該処理を繰り返すことになります。

∴アイコンリストの大きさ
→
アイコンリストの文言は必要だったな。
ただ、要素数ってところは部分点もらえそうな気がするけどなぁ。


```
