# GNUとUNIXコマンド

- コマンドライン操作  
- パイプとリダイレクト  
- テキスト処理フィルタ  
- 正規表現を使ったテキスト検索  
- ファイルの基本的な編集  

---

## コマンドライン操作

---

## パイプとリダイレクト

---

## テキスト処理フィルタ

---

## 正規表現を使ったテキスト検索

---

## ファイルの基本的な編集

### viエディタ

コマンドモード、入力モードの2つの動作モードを切り替えながら使用する。  
コマンドモードで起動する。  
入力モードでEscキーを押すとコマンドモードに切り替わる。  

viを起動するためには、ファイル名を指定してviコマンドを実行する。  
ファイル名を指定しない場合、空の新規ファイルが開く。  
-Rオプションは読み取り専用モードでファイルを開く。  

`vi [-R] [ファイル名]`  

#### viの入力モード

``` txt
i :: カーソルの前にテキストを入力する
a :: カーソルの後にテキストを入力する

I :: 行頭の最初の文字にカーソルを移動し、その直前にテキストを入力する
A :: 行末にカーソルを移動し、その直後にテキストを入力する

o :: カレント行の下に空白行を挿入し、その行でテキストを入力する
O :: カレント行の上に空白行を挿入し、その行でテキストを入力する
```

#### viのカーソル操作

``` txt
h :: 1文字左へ移動する。 左矢印(←) キーと同じ 
j :: 1行下へ移動する。 下矢印(↓)キーと同じ
k :: 1行上へ移動する。 上矢印(↑) キーと同じ
l :: 文字右へ移動する。 右矢印(→) キーと同じ

0 :: 行の先頭へ移動する
$ :: 行の末尾へ移動する
H :: 画面の一番上の行頭へ移動する
L :: 画面の一番下の行頭へ移動する

gg :: ファイルの先頭行へ移動する
G  ::ファイルの最終行へ移動する
nG :: ファイルのn行目に移動する
:n :: ファイルのn行目に移動する
```

#### viの終了、ファイル保存、シェルコマンドの実行

``` txt
:q   :: ファイルへ保存せずに終了する (編集した場合は保存するかどうかを確認してくる)
:q!  :: 編集中の内容を保存せずに終了する
:wq  :: 編集中の内容を保存して終了する
ZZ   :: 編集中の内容を保存して終了する (:wq と同じ)
:W   :: 編集中の内容でファイルを上書き保存する
e!   :: 最後に保存した内容に復帰する

:r ファイル名 :: ファイルの内容をカレント行以降に読み込む
:! コマンド   :: viを終了せずにシェルコマンドを実行する
r! コマンド   :: シェルコマンドの実行結果を挿入する
```

#### viの編集コマンド

``` txt
x  :: カーソル位置の文字を削除する(Delete)
X  :: カーソル位置の手前の文字を削除する(Backspace)
dd :: カレント行を削除する
dw :: カーソル位置から次の単語までを削除する
yy :: カレント行をバッファにコピーする
p  :: カレント行の下にバッファの内容を貼り付ける
P  :: カレント行の上にバッファの内容を貼り付ける
r  :: カーソル位置の1文字を置換する
```

5dd → カーソル位置から5行削除できる。  
20x → 20文字を削除できる。  

#### viの検索コマンド

``` txt
/パターン :: カーソル位置から後半に向かって指定したパターンを検索する
?パターン :: カーソル位置から前方に向かって指定したパターンを検索する

n :: 次を検索する
N :: 次を検索する(逆方向)

:noh      :: 候補のハイライト表示を解除する
:%s/A/B   :: 最初に見つかった文字列Aを文字列Bに置換する
:%s/A/B/g :: 全ての文字列Aを文字列Bに置換する
```

#### viの設定変更

``` txt
:set nu   :: 行番号を表示する
※nu は nubmerでも可能  

:set nonu :: 行番号を非表示にする
※nonu は nonumberでも可能  

:set ts=タブ幅 :: タブ幅を数値で指定する
```

:setで行った変更はviを終了させると消える。  
常に有効にするためには、ホームディレクトリ内の`.exrc`ファイルに設定を記述する。  
vimの場合は`.vimrc`  
その際は「:」を除いて記述する。  
