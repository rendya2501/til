# Docker勉強まとめ

linux立ち上げて、開発環境構築して、localhostからアクセスして、サーバーとして動いてくれるまで。

- DockerのUbuntuにデスクトップ環境を作成
<https://qiita.com/FukuharaYohei/items/a6c1e1a2ba8d1285cfa5>
- 無駄な拡張子はつけずに"Dockerfile"としてください。
<https://teratail.com/questions/98334>
- Dockerコンテナに外部ネットワークからアクセスできるように環境構築しました(CentOS7)
<https://zassinojunin.jp/20190504/1493>

## ■プログラマのためのDocker教科書 第2版

● 5章

ずいぶん回りくどいことしてるから色々迷ってしまった。
参考書を読めばちゃんと書いてあるが、この参考書どこまで信用していいかわからないからな。

`RUN apt-get -y update && apt-get -y upgrade`
ここでこけた。原因を探る。
upgrateがダメだといわれたからいろいろいじったが、関係なさそう。

Dockerfileで`apt-get upgrade`をつかってはいけない。注：古い日本語版だと誤訳されています。
<https://qiita.com/aimof/items/8f08671c5ab356b01e2b>

`FROM ubuntu:17.10`
のバージョン指定を外したらいけた。
バージョン指定って必要なのかね？

そのあとすぐにrunでイメージからコンテナを作ったが動かず。
ポートの問題。
ウェブコンテンツがアップロードされていない問題。

よく参考書を見てみたら、Dockerfileからphotoviewコンテナをビルドしないとファイルがアップロードされないようにできている模様。
ポートは最近たくさんポート使ってるからね。意図的に80を避けないと動いてくれない。
というわけで手順通りにやったらいけた。
簡単なサンプルのはずなのに、手間をかけてしまった。
普段の調査力が生かされた形になっただろうか？
特に、ファイルがアップロードされているかどうか確かめる下りは、会社にいてもやりそうなことだったなと思う。
しかし、直接の原因は単純なところにあるので、こういうところが弱いのかもしれない。

● Google Cloud Platform

JavascriptのYoutubeサンプルやったときに登録は済ませていたっぽい。
メニューバーにKubernetes Engineと見えるので、まぁ、普通に使えるでしょう。
