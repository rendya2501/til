# 制約

## UNIQUE制約

・「カラムまたはカラムのグループに含まれるデータが、テーブル内の全ての行で一意であることを確実にする」ということ  
・つまり行データを識別する必要は無いけれど、あるカラムに対して重複した値が入るのを禁止したいときに使う  

・重複した値の入力が不可能になる。  
・NULLは許可されている。  
・この制約は一つのテーブルに対して複数設定することができる。  

### PRIMARY KEY(主キー) と UNIQUE の違いとは？

・PRIMARY KEYもUNIQUEもデータに一意性を持たせる点は同じ  
・目的によって使い分けができる  

|||
|---|---|
|PRIMARY KEY|テーブル内の行データを特定するために一意性を持たせる。                        |
|UNIQUE     |重複した値を格納したくないカラム（またはカラムのグループ）に一意性を持たせる。|

AカラムとBカラムを主キーにするってことは出来なくて、AカラムとBカラムを合わせて複合キーとして、その複合キーに対して主キーを設定する形になる。  
UNIQUE制約なら、AカラムとBカラムにユニーク制約を課すってのはOK。  
この違いが主キーとユニークキーの違いってところじゃないですかね。  

### PRYMARY KEY(主キー)

・「テーブル内の行データを識別するために設定でき、重複した値を許さないカラム」のこと
・複数のカラムに対して設定可能
・NULLは許可されない
・UNIQUE制約と非NULL制約を組み合わせたもの
・この制約は一つのテーブルに対して一つしか設定できない

主キーが1つだけしか許可されないなら、複数のカラムに主キーを設定してるあれはなんなの？  
→  
複数のカラムをまとめて複合キーとして、その複合キーに対して主キーを設定している。  
なので主キーを実質1つしか設定していないことになるので、問題がないということ。  

---

[主キー（primary key）を複数のカラムに、その名は複合主キー（composite primary key ）](https://ts0818.hatenablog.com/entry/2017/02/04/162513)  
[PostgreSQL - PRIMARY KEY (主キー) と UNIQUE の違い](https://esthersoftware.hatenablog.com/entry/deference-between-primarykey-and-unique-postgresql)  
