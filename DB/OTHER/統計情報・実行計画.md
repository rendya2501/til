# 統計情報・実行計画

---

## 統計情報

SQLServerにおける統計情報は、テーブルやインデックス内で、どのような値が、どのくらいの頻度で出現するのか(カーディナリティ)をまとめた情報のことを指す。  
この統計情報を元に、実行計画が考えられて、効率的に処理を実行することができる。  

---

統計情報はテーブルのデータが更新される度に更新されるわけではない。  
ある程度のデータが溜まってから自動で更新される。  
おおよそ20%以上のデータ変動があった場合に自動更新される模様。  

レコード検索にはスキャンとシークの2種類が存在する。  
スキャンはテーブルに存在するデータを全て検索する方法。  
シークはインデックスを活用して検索する方法。  

基本的にシークのほうが早い。  
クエリの実行プランを生成する際に統計情報が参照されるため、定期的な更新が必要となる。  
クエリのパフォーマンスが低下した場合等に考慮する要素の1つとなりえる。  

---

## 実行計画

---

[SQL Serverで統計情報を更新する。UPDATE STATISTICSの使い方](https://www.fenet.jp/dotnet/column/database/sql/5389/)
[データベースの「統計情報」と「パフォーマンス遅延」の関係](https://atmarkit.itmedia.co.jp/ait/articles/1703/13/news001.html#:~:text=SQL%20Server%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E7%B5%B1%E8%A8%88%E6%83%85%E5%A0%B1,%E3%81%A6%E6%8E%A8%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99%E3%80%82)  

[トラブルシューティングから学ぶSQL Server統計情報の更新タイミング](https://techblog.zozo.com/entry/sqlserver-troubleshooting-statistics)  

[実行計画？？統計情報？？って人へ](https://qiita.com/NagaokaKenichi/items/5b6eb9887f88046a594d)  

[実行計画とは？コストなどの用語やチューニング方法も解説](https://products.sint.co.jp/siob/blog/executeplan)  
