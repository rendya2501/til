# ネットワーク

---

## データ通信と制御

### OSI基本参照モデル

異機種間のデータ通信を実現するために，通信サービスを7つの階層に分割し，各層ごとに標準的なプロトコルや通信サービスの仕様を定めるという考え方をモデル化したものです。

#### アプリケーション層(第7層)

各層のうち，最も利用者に近い部分であり，ファイル転送や電子メールなどの機能が実現されている。

#### プレゼンテーション層(第6層)

データの表示形式を管理したり、文字コードやエンコードの種類などを規定する役割をもつ。

#### セション層(第5層)

アプリケーションプロセス間での会話を構成し，同期をとり，データ交換を管理するために必要な手段を提供する役割をもつ。

#### トランスポート層(第4層)

エラー検出/再送などの伝送制御を担い通信の品質を保証する役割をもつ。

#### ネットワーク層(第3層)

エンドシステム間のデータ伝送を実現するために，ルーティング(通信経路選択)や中継などを行う役割をもつ。

#### データリンク層(第2層)

隣接ノード間の伝送制御手順(誤り検出，再送制御など)を提供する役割をもつ。

#### 物理層(第1層)

物理的な通信媒体の特性の差を吸収し，上位の層に透過的な伝送路を提供する役割をもつ。

### TCP/IP階層モデル

OSI基本参照モデルと異なり全部で4つの階層から成っています。
また両モデルの対応関係は次のようになっています。(TCP/IP階層モデルは一般的には4層ですが、設問に合わせてネットワークインタフェース層をリンク層とハードウェア層に分割しています)

アプリケーション層
トランスポート層
インターネット層
ネットワークインターフェース層(リンク層、ハードウェア層)

### リピータ(Repeater)

データ伝送中に弱くなった電気信号を増幅し、データの伝送可能距離を延長するLAN間接続装置です。  
OSI基本参照モデルの物理層での接続を行います。  
リピータは，同種のセグメント間で信号を増幅することによって伝送距離を延長する。  

### ルータ(Router)

[1]  
異なる2つのネットワークをOSI基本参照モデルのネットワーク層で接続し、通過するパケットのIPアドレスを見てパケットを最適な経路に中継する通信装置です。  
ルータは、パケットを受信すると、そのヘッダ情報に含まれる`宛先IPアドレス`を確認します。  
そして自身が持つルーティングテーブルと照合して、適切なインタフェースからパケットを送出します。  

[2]  
OSI基本参照モデルのネットワーク層でネットワーク同士を接続し、通過するパケットのIPアドレスを見てパケットを最適な経路に転送する通信装置です。  
ネットワーク層は、OSI基本参照モデル第3層に位置するため下層の伝送媒体(物理層)やアクセス制御方式(データリンク層)の方式に影響されることなく接続することが可能です。  

### スイッチングハブ(レイヤ2スイッチ)

OSI基本参照モデルのデータリンク層で接続し、通過するパケットの**MACアドレス**を見てパケットを送信ポートを判断する装置です。  
スイッチングハブと同様にデータリンク層で動作する機器にブリッジがありますが、ブリッジがソフトウェアで宛先制御を行うのに対して、  
スイッチングハブはハードウェア機構によって宛先制御を行うためより高速に動作するという違いがあります。  

スイッチングハブは、LANポートとMACアドレスの関係が登録されたMACアドレステーブルを内部に持っています。  
データを受信した際には、このMACアドレステーブルを見ることで適切なLANポートから送出できる仕組みになっています。  
受信したデータの宛先MACアドレスがMACアドレステーブルに登録されていない場合や、ブロードキャストフレームを受信したときには、  
機器内部でデータをコピーして受信ポート以外の全LANポートから送出（フラッティング）します。  

### ブリッジ(Bridge)

OSI基本参照モデルのデータリンク層で接続し、通過するパケットのMACアドレスを見てパケットを中継するかどうかを判断する通信装置です。  
MACフレームを受け取ったブリッジは、ヘッダ情報内のMACアドレスと自身がもつMACアドレステーブルに基づき、宛先が存在するポートのみにMACフレームを送出します。  

### ゲートウェイ

OSI基本参照モデルの全階層(主に4層より上)を解釈し、ネットワークの接続を行う機器です。  

### デフォルトゲートウェイ

同一リンク内（ルータやL3SWを超えない範囲＝ブロードキャストドメイン）に存在しない機器と通信を行うときに、外部ネットワークとの接続点となる機器のことです。  
ある端末が外部セグメントの端末と通信を行う場合には、一旦デフォルトゲートウェイにデータを送信することで経路選択と中継を依頼します。  
なぜそうなっているかというと、通信相手のMACアドレスを得るためのARPリクエストはブロードキャスト通信で行われるため、ブロードキャストドメイン外に届かないからです。  

ルーターやL3SWを設定可能。  

>ぴよぴよ  
>通信において「こいつ、どこに届ければ良いんだ？分からん」なときに取りあえず送る送り先  
>「よく分かんないから取りあえず送ります。後は、そっちで何とかしてください」な送り先が「デフォルトゲートウェイ」です。  

デフォルトゲートウェイに送られたデータは別のネットワークに流れていくからです。  

データの送り先が同じネットワークであれば、直接お届けできます。  
わざわざデフォルトゲートウェイさんに送ってよこす必要は、ありません。  
デフォルトゲートウェイさんに送ってきたということは、送り先は同じネットワーク内にない（他のネットワークにある）ことを意味します。  

見方を変えれば[ネットワークから出ていくデータはデフォルトゲートウェイを通る]と言えます。  
よって「デフォルトゲートウェイはネットワークの出入口である」という言い方がされるのです……多分。  

なお、一般的な構成のネットワークにおいて、他のネットワークとの中継役をやってくれる機器はルータさんです。  
デフォルトゲートウェイを設定する際には、ルータのIPアドレスを指定する場合が多いと思います。  

ルータはデフォルトゲートウェイの役目をします。  
そのせいで、ルータとデフォルトゲートウェイがごっちゃになっちゃう人もいるようです。  
ですが本来、ルータとデフォルトゲートウェイは別の用語です。  
区別できるようにしておいてください。  

ルータは「ネットワーク中のデータ（の中にあるIPアドレス）を見て、行き先を振り分けてくれる機器」です。  
デフォルトゲートウェイは「ネットワークの出入口に相当する機器」です。  
あまり見かけませんが、ルータ以外をデフォルトゲートウェイとして使うことも可能は可能です。  

ルータ：機器の名称  
デフォルトゲートウェイ：機器の役割  

### レイヤ3スイッチ

[1]  
レイヤ2スイッチにルーティング機能を追加したものです。ルータの高速版と覚えておけばよいと思います。  
同じくOSI基本参照モデル第3層（ネットワーク層）で動作するルータがソフトウェアでパケットを処理するのに対して、  
スイッチはASICと呼ばれる専用のハードウェアチップを用いるため、はるかに速く処理を行うことができます。  

ルーティング専用に開発されたASIC（特定用途向けICチップ）  

[2]  
L3スイッチとは、ネットワークの中継機器の一つで、プロトコル階層でいうネットワーク層（第3層）とリンク層（第2層）の両方の制御情報に基づいてデータの転送先の決定を行うもの。  

通常のネットワークスイッチはL2スイッチ（レイヤ2スイッチ）であり、送信元や宛先のMACアドレスなどリンク層の制御情報に基づいて転送を行うが、  
L3スイッチではこれに加えIPアドレスなどのネットワーク層の制御情報を解析して転送を行う。  

#### ルータとの違い

ズバリ！言います。  
仕組みが違います。  
役割が違います。  

ルーティングプロトコルによる経路情報の交換や複数のIPネットワーク間の中継・転送など、ネットワーク層の転送機能のほとんどはルータと重複しているが、  
経路制御はL2スイッチともルータとも異なり、IP層の経路情報とARPテーブルを統合したFDB（Forwarding Database）による制御を行う製品が多い。  

ルータの多くはWAN（広域ネットワーク）用のインターフェースを持ち、主に広域回線とLAN、あるいは広域回線間の接続を担うことが多いのに対し、  
一般的なL3スイッチは多数のEthernetポートなどLAN側インターフェースのみを備え、L2スイッチと同じくLAN内の通信制御に特化したものが多い。  

また、ルータには機能がソフトウェアで実装され修正や機能追加などが容易な製品も多いが、  
L3スイッチはASICやFPGAなど専用の半導体チップを用いてハードウェアにすべての機能を実装した製品が多く、ルータよりもはるかに高速に転送処理を行うことができる。  

[「ルータ」「L3スイッチ」どっちが便利?!](https://www.enecom.co.jp/business/enewings/itdictionary/routerorl3/index.html)  

### ソケット(socket)

アプリケーションがTCP/IPを使用して通信を行うための仮想的なプログラミングインタフェースです。  
通信相手に繋がる電話回線のようなもので、ソケットにデータを書き込んで相手にデータを送ったり、逆に相手から届いたデータをソケットから読み込んだりできる仕組みになっています。  

通常、コンピュータでは同時に使用可能なソケット数に制限があります。  
TCPコネクションが1つ確立されるとソケットが1つ消費されるので、同時接続数がソケットの上限に達してしまうと、  
いずれかのTCPコネクションが切断されるまで新たなTCPコネクションを確立できなくなってしまいます。  

### FW

IPアドレスやポート番号を用いたパケットフィルタリング(通過の可否判定)を行う。  
これらの値が特定できないアクセスは通過させてしまう。  
極端な事を言えば、FWで全ての宛先IPアドレスについて拒否してしまえば、全ての攻撃を防ぐことが出来る。  
外部から受け付ける必要があるアクセスと同じ宛先IPアドレスと宛先ポート番号をもったものは通過させる必要がある。  
なので、これを偽装した攻撃をFWは防ぐ事が出来ない。  

### OSPF(Open Shortest Path First)

主に中規模から大規模のAS内部ネットワーク向けのリンクステート型のルーティングプロトコルです。  
OSPFでは、最初に他のルータとやり取りすることでネットワーク構成図が作成され、それをもとに動的に経路制御表(ルーティングテーブル)が作成されます。  
リンクステート型では、各リンクに対して回線の帯域幅から算出されたコスト(重み)が付けられ、このコストの合計値が最も小さくなるものが最適経路として選択されます。  
また、障害発生時には自動で経路情報の再構築が行われます。  

コストを経路選択の要素に取り入れる。  

### RIP(Routing Information Protocol)

主に小規模ネットワークで使用されるルーティングプロトコルです。  
RIPではホップ数(経由するルータ数)を基準に最適ルートを選択する距離ベクトル型のアルゴリズムを採用しています。  

### CSMA/CD方式(Carrier Sense Multiple Access with Collision Detection)(搬送波感知多重アクセス／衝突検出方式)

各ノードは伝送媒体が使用中かどうかを調べ，使用中でなければ送信を行う。衝突を検出したらランダムな時間の経過後に再度送信を行う。  

CSMA/CD方式は一本の同軸ケーブルに複数のコンピュータが接続されているバス型のトポロジを前提としており、次のような手順で送信が行われます。  

1.伝送路上に他のノードからフレームが送出されていないかを確認する  
2.複数のクライアントは同じ回線を共用し、他者が通信をしていなければ自分の通信を開始する。  
3.複数の通信が同時に行われた場合は衝突を検出し、送信を中止してランダム時間待ってから再び送信をする。  

伝送路上での衝突を許容する仕組みとなっていて、制御が簡単な割に伝送効率が良いという特徴があります。  
→それぞれのステーションがキャリア検知を行うとともに，送信データの衝突が起きた場合は再送する。  

CSMA/CDは、伝送路上の通信量が増加するにつれて衝突の発生も増加し、さらに再送が増え通信量が増えてしまうという欠点があります。  
一般にCSMA/CD方式では、伝送路の使用率が30%を超えると急激に送信遅延時間が長くなってしまい実用的ではなくなると言われています。  
→衝突発生時の再送動作によって，衝突の頻度が増すとスループットが下がる。  

### CSMA/CA方式(Carrier Sense Multiple Access with Collision Avoidance)(搬送波感知多重アクセス／衝突回避方式)

無線LANの通信規格のIEEE802.11a、802.11b、802.11g の通信手順として採用されているものです。  
無線LANではフレーム衝突を検出できないため、この手法で衝突を回避（Collision Avoidance）します。  

データ送受信の開始時にデータ送受信のネゴシエーションとしてRTS/CTS方式を用い，受信の確認はACKを使用する。  
→  
無線LANの通信手順であるCSMA/CAの説明です。  
RTS/CTS方式は、無線LANのアクセス制御方式の一つでRTS(Request To Send，送信要求)フレームとCTS(Clear To Send，受信準備完了)フレームを用いてフレームの衝突を防ぐことができるものです。  

### トークンパッシング方式

各ノードを環状に接続して，送信権を制御するための特殊なフレームを巡回させ，これを受け取ったノードだけが送信を行う。  

### 優先度制御方式

各ノードに論理的な順位付けを行い，送信権を順次受け渡し，これを受け取ったノードだけが送信を行う。  

### TDMA方式

タイムスロットを割り当てられたノードだけが送信を行う。  

### IPパケット

IPアドレスによってネットワーク層の通信を行うIPヘッダを付加したパケット

### イーサネットフレーム(MACフレーム)

MACアドレスによってデータリンク層の通信を行うために、IPパケットにMACヘッダを付加したパケット

### 最長一致(ロンゲストマッチ)

ルータは、ルーティングテーブル内に宛先アドレスに合致するエントリが複数ある場合には、プレフィックス長が最も長いエントリを選択します。  
宛先アドレス「10.1.1.250」と各エントリを比較すると以下のように、①、②、③に合致することがわかります。  

![!](https://www.ap-siken.com/kakomon/27_aki/img/32a.gif)  

---

## 通信プロトコル

### HTTP/2

HTTP/1.1の後継となる規格で2015年に策定されました。中身はGoogleが開発したSPDYというプロトコルほぼそのままです。  
HTTP/2ではストリームの採用（後述）、ヘッダの圧縮、HTTPS接続の必須化、サーバプッシュなど、HTTP/1.1から様々な変更が行われています。  

ストリームとは、1つのTCPコネクションの中にハンドシェイク不要の仮想的なTCPソケットを複数作成し、それを用いて並列ダウンロードを実現する仕組みです。  
ストリームを使用すると、複数のリクエストを同時に送り、複数のファイルを並行してダウンロードすることが可能となります。  

![!](https://www.ap-siken.com/kakomon/01_aki/img/pm05_5.gif)  

上図を見るとわかるように、ブラウザ側では前の画像の受信完了を待つことなく次のリクエストを送信でき、サーバ側では複数のリクエストを次々に処理して応答を返せます。

※補足しておくと、HTTP/1.1にも前のリクエストの結果を待つことなく次のリクエストを発行できる仕組みが用意されていました。  
本文中で登場する「HTTPパイプライン機能」が正にそうです（パイプライニングとも呼ばれます）。  
しかし、HTTPパイプライン機能には幾つかの問題があり、期待するほど通信の効率化に寄与できなかったため、一部のブラウザにしか実装されていませんでした。  

### DHCP(Dynamic Host Configuration Protocol)

TCP/IPネットワークで、ネットワークに接続するノードへのIPアドレスの割り当てをアドレスプールから自動的に行うプロトコルです。  
各クライアントにIPアドレスを設定するネットワーク管理の負担が軽減され、使い終わったIPアドレスを回収し、  
他のノードに再割当てを行うことでIPアドレス資源の有効活用が期待できます。  

DHCPクライアントとDHCPサーバは、DHCPDISCOVER、DHCPOFFER、DHCPREQUEST、DHCPACKの4つのメッセージのやり取りによって、ネットワークアドレス等の割当てを行います。  
ざっくりと流れを確認しておきましょう。  

1. IPアドレス割り当てを要求するDHCPクライアント(以下、クライアント)は、ネットワーク内のDHCPサーバ(以下、サーバ)を見つけるためDHCP発見パケットをブロードキャストで送信する（DHCPDISCOVER）。  
2. DHCP発見パケットを受け取ったサーバは、使用可能なIPアドレスとサブネットマスクなどのネットワーク設定をクライアントに通知する（DHCPOFFER）。  
3. クライアントは通知されたネットワーク設定を使用することをサーバにブロードキャストで通知する（DHCPREQUEST）。  
4. サーバは、配布するIPアドレスが未使用であることを確認し、クライアントに確認応答パケットを送信する（DHCP ACK）。  
この際IPアドレスが割当て不能だった場合はその旨をクライアントの通知する（DHCPNACK）。  

![!](https://www.ap-siken.com/kakomon/02_aki/img/35_1.gif)  

DHCPクライアントは、DHCPDISCOVERメッセージの送信時点では自身の属するネットワークが明らかになっていなので、宛先IPアドレスを「255.255.255.255」にしてブロードキャストします。  
これは同一セグメントに属する全てのコンピュータに対して同じメッセージを送信することを意味します。  
また送信元IPアドレスは未割当てなので「0.0.0.0」に設定します。  

DHCPは、クライアント→サーバの通信には67/UDP、サーバ→クライアントの通信には68/UDPを使用します。  
「なぜUDPが使用されるのか」というと、DHCPのシーケンス中でブロードキャストが使用されるためです。  
TCPはコネクション型で相手との接続を確立してから通信を行う特性があり、不特定多数の相手を宛先とするブロードキャストやマルチキャストができません。  
このためDHCPではUDPが使用されているという訳です。  

DHCPサーバによって自動設定されるのは以下の構成情報です。  
・DHCPクライアントのIPアドレス  
・サブネットマスク  
・デフォルトゲートウェイのIPアドレス  
・DNSサーバのIPアドレス  

同じネットワークにDHCPサーバが複数存在する場合はクライアントが送信したDHCP DISCOVERに対して複数のDHCP OFFERが返されます。  
クライアントはこのうち先に受信したものを優先し、受け入れを表明するために、  
そのDHCP OFFERに含まれる「送信元DHCPサーバのIPアドレス」と「提案されたIPアドレス」を格納した[DHCP REQUEST]をブロードキャストします。  
[DHCP REQUEST]を受信したDHCPサーバはパケット内容を確認し、自身の提案が受けれられたならばDHCP ACKで構成情報をクライアントに通知します。  
そうでなければ自身の提案が破棄されたと判断し[DHCP REQUEST]を無視します。  
要するにDHCPサーバがDHCP REQUESTの内容から判断できることは、自身のDHCP OFFERがクライアントで受理されたかどうかという点です。  

### DHCPリレーエージェント

DHCPによるIPアドレスその他ネットワーク情報の割当ては、DHCPクライアントとDHCPサーバとの間で、  
DHCPDISCOVER、DHCPOFFER、DHCPREQUEST、DHCPACKの4つのメッセージをやり取りして行います。  

この手順におけるDHCPDISCOVERとDHCPREQUESTメッセージがブロードキャストで行われる関係で、  
DHCPクライアントとDHCPサーバが異なるセグメントに設置されているときにはDHCPによるネットワーク情報の割当てが正しく動作しません。  

この問題を解決するためにルータやL3SWで稼働させるのが、DHCPリレーエージェントです。  
DHCPリレーエージェントは、異なるネットワークセグメントに存在する（ブロードキャストが届かない）DHCPクライアントとDHCPサーバとの間の通信を取り持つことでDHCPを機能させるものです。  
本問のようにTCとDHCPサーバが別のセグメントに設置されている場合には、DHCPリレーエージェントを利用する必要があります。  

![!](https://www.ap-siken.com/kakomon/02_aki/img/pm05_7.gif)  

### DNS(Domain Name System)

ドメイン名とIPアドレスを結びつけて変換する(名前解決する)仕組みです。

独自のネームサーバを使用する際にはレジストラ（ドメイン名取得業者）を通じて、ネームサーバのFQDNとIPアドレスの組みを登録しておく必要があります。  
これは一般的にホスト登録と呼ばれる作業です。  
これをせずにDNSレコードを設定してもエラーとなってしまい名前解決できません。  

**NSレコード**  
そのドメインのゾーン情報を保持するネームサーバのホスト名を指示するレコードです。  

**Aレコード**  
ドメイン名・ホスト名に対応するIPアドレスを指定するためのレコードです。  

**CNAMEレコード**  
あるホスト名に対して別名(エイリアス)を指定するレコードです。  
DNSの設定上、CNAMEを設定したホスト名は、他のいかなるレコード（AレコードやNSレコードなど）とも重複して設定してはならないというルールがあります。  
例えば以下のような設定は違反となります。  

``` txt
www IN A 200.x.y.1
www IN CNAME hogehoge.com
```

例)
「w3.example.co.jp」にアクセスしてきた利用者を、自動的にWAFサービスのFQDNである「waf-asha.example1.ne.jp」に転送できます。  
このようにWAFサービスを利用する場合でも、CNAMEの設定により、利用者はアクセスするWebサイトのURLを変更する必要がなくなります。  

### PPP(Point-to-Point Protocol)

電話回線を通じてコンピュータをネットワークに接続するダイヤルアップ接続でよく使われる、2点間を接続してデータ通信を行うための通信プロトコルです。  
PPP通信には、リンク制御プロトコル(LCP)とネットワーク制御プロトコル(NCP)という2つの通信プロトコルが使用されています。  

・リンク制御やエラー処理機能をもつ  

### PPPoE(Point-to-Point Protocol over Ethernet)

PPPプロトコルをEthernet上で利用するためのプロトコルです。

### FTP(File Transfer Protocol)

ネットワーク上でファイルの転送を行うための通信プロトコルです。

### TCP(Transmission Control Protocol)

TCP/IPネットワークにおいて通信を行う2つのノード間にコネクションと呼ばれる論理的な通信路を確立し、送達管理や、伝送管理などの機能を提供するプロトコルです。  
OSI基本参照モデルでTCPが属するトランスポート層は、通信の信頼性を確保する機能のほかに、アプリケーション間の通信を実現するという機能があります。  
IPアドレスは、パケットを送信元ホストから宛先ホストに届けるための情報で、パケットを送り届けるアプリケーションの情報は含まれていません。  
このパケットの宛先となるアプリケーションを指定する情報がポート番号です。  
宛先IPアドレス・ポート番号は、パケットを届けるのに必要で、送信元IPアドレス・ポート番号はパケットを受け取ったホストがパケットを返信する際に返信パケットに宛先としてセットするために必要となる。  

### UDP(User Datagram Protocol)

TCP/IPの通信処理で使われる伝送制御プロトコルのひとつでTCPと同じトランスポート層に位置します。  
TCPでは信頼性を担保するために、コネクション確立、再送処理、輻輳処理などの様々な仕組みが取り入れられていますが、その分だけ通信のオーバヘッドは増加してしまいます。  
UDPは、TCPから信頼性確保を取り除いたコネクションレス型の通信を実現するプロトコルです。ヘッダ構成もTCPと比べて簡素化されデータ比率が高められるようになっています。  
UDPは、リアルタイム性が重視される音声や画像のストリーム配信、および、DNS、DHCP、NTPなどのアプリケーション層プロトコルで用いられています。  

TCP…信頼性重視  
UDP…通信効率、リアルタイム性重視  

![TCPヘッダーとUDPヘッダー](https://www.ap-siken.com/kakomon/03_aki/img/34.gif)  

シーケンス番号は送信したデータの位置を示す情報で、確認応答番号とともに送信データの順序を管理するために使われます。  
TCPにはシーケンス番号のフィールドがありますが、UDPにはありません。  

### NTP(Network Time Protocol)

ネットワークに接続されている環境において、サーバ及びクライアントコンピュータが持つシステム時計を正しい時刻(協定世界時:UTC)へ同期するためのプロトコルです。  

### ARP(Address Resolution Protocol)

IPアドレスから対応する機器のMACアドレスを取得するプロトコルです。  

1.要求パケットに、MACアドレスを得たいIPアドレスと、送信元のIPアドレス・MACアドレスを格納して、同一セグメント内にブロードキャストする。  
2.要求パケットを受け取った各ノードは、解決目的のIPアドレスを確認し、自分のIPアドレスであれば、自分のMACアドレスを送信元に伝える。  

![!](https://www.ap-siken.com/kakomon/03_aki/img/32.gif)  

### RARP(Reverse Address Resolution Protocol)

ARPがIPアドレスから機器のMACアドレスを得るのとは逆に、機器固有のMACアドレスから対応するIPアドレスを取得するためのプロトコルです。  

### ICMP(Internet Control Message Protocol)

インターネットプロトコル(IP)の通信制御を補完するプロトコルで、データ配送中のエラー通知や送達エラーを通知する機能を持ちます。  
TCP/IPで接続しているノード（サーバ、PC等）間の通信状態を確認します。また、誤った通知や通信関連の情報の通知などのためのプロトコルです。  

ping(ピン又はピング)は、ICMPの「echo request」パケットを対象ノードに送信し、  
「echo reply」パケットが返ってくるか否かで、対象ノードおよび到達するまでのネットワーク間が正常であるかを診断する機能です。  

### RIP(Routing Information Protoco)

ゲートウェイ間のホップ数によって経路を制御するルーティングプロトコルです。  
経路数か重み付けかのアレ。  

### SMTP(Simple Mail Transfer Protocol)

インターネット環境において、クライアントからサーバにメールを送信したり、サーバ間でメールを転送するのに用いられるプロトコルです。

### NAT(Network Address Translation)

社内のプライベートIPアドレスをグローバルIPアドレスに変換し，インターネットへのアクセスを可能にする。
IPマスカレードともいう。

### NAPT(Network Address Port Translation,IPマスカレード)

[1]  
プライベートIPアドレスとグローバルIPアドレスを相互変換するNATの考え方にポート番号を組み合わせた技術です。  
NAPTでは、インターネットに接続するノードに対して固有のポート番号を割り当て、IPアドレスだけでなくポート番号も一緒に変換します。  
これにより、1つのグローバルIPアドレスを使ってプライベートネットワーク内の複数のノードが同時にインターネットに接続することが可能となります。  

[2]  
プライベートIPアドレスとグローバルIPアドレスの相互変換するNATの考え方にポート番号を組み合わせた技術です。IPマスカレードとも呼ばれます。  
TCP/IPの原則に則れば、複数の端末がインターネットに接続する場合には、それに対応する数のグローバルIPアドレスが必要です。  
しかし、NAPTを利用すると内部LAN上の複数の端末を、1つのグローバルIPアドレスで同時にインターネットに接続させることが可能です。  
NAPTでは、プライベートIPアドレスとインターネット通信に使用するポート番号を対応させることで端末の識別を行っています。  

![!](https://www.ap-siken.com/kakomon/02_aki/img/34.gif)  

### VRRP(Virtual Router Redundancy Protocol)

ネットワークのデフォルトゲートウェイとなるルータやL3スイッチの冗長構成を実現するプロトコルです。  

VRRPでは複数台のルータに共通して使える仮想IPアドレス・仮想MACアドレスを用意し、障害発生時には2つのアドレスをフェールオーバで待機系に移すことで継ぎ目なく処理を続行します。  
この仕組みによってホストのデフォルトゲートウェイの設定値などを変更することなしに、送信先の装置を正常稼働するものに置き換えることが可能になっています。  

### SOAP(ソープ，Simple Object Access Protocol)

ソフトウェア同士がメッセージを交換する遠隔手続き呼び出し(RPC)のためのプロトコルです。  
汎用なデータ形式であるXMLに基づいて記述されており、Webサービスにとって有効な手段の一つとなっています。  

AmazonのWebサービスを例にすると、ソフトウェアが商品データを要求するときにXML形式であるSOAPリクエストを発行し、  
それに対してWebサービス側からも要求に基づいて商品データがSOAPメッセージとして戻るという仕組みです。  

### REST(Representational State Transfer)

簡単に言うとHTTPのGETメソッドをリクエストを送信するとXML形式のデータが返ってるものです。  
例えばAmazonで指定されたURLに対して要求したいサービスを示すパラメータを指定したリクエストを送ると、商品情報などが含まれるXMLデータを取得することができます。  

### RPC(Remote Procedure Call)

サーバにあるプログラムを，サーバのIPアドレスを意識することなく，プログラム名の指定だけで呼び出すようにする。

### WebSocket

Webアプリケーションにおいてクライアント(Webブラウザ)とWebサーバの間で効率的な双方向通信を実現するプロトコルです。  

Webにおける標準プロトコルであるHTTPは「クライアントのリクエストに対してサーバがレスポンスする」という1組の通信が基本手順になっていて、  
サーバが自発的にクライアントに対してデータを送れるようにはなっていません。  
これまで、このような仕組み(例えば自動的に最新情報に更新されるシステム)を実現するためにはAjaxのようにクライアントから定期的にリクエストを送らせ、  
サーバ側で適宜返答を行う仕組みが必要でした。しかし短い間隔で定期的に行われる情報取得の度にTCPコネクションが確立され、  
HTTPでのやり取りが発生するためパフォーマンス的には決して良い方法ではありませんでした。  

WebSocketを使用したデータ通信では、まずHTTPの手順に則り、クライアントとサーバで1組のHTTP通信を交してWebSocket用の通信路を確立します。  
その後はHTTPの手順に縛られず、1つのTCPコネクション上でデータのやり取りが行えるようになっています。  
この仕組みによりオーバヘッドが少なくなり、リアルタイム性が必要とされるシステムを効率的に実現できるようになります。  

### ポート番号

コンピュータがデータ通信を行う際に通信先のプログラムを特定するための番号のことです。
TCP/IP通信において、コンピュータが通信に使用するプログラムを識別するための16ビットの数値で 0～65535 が指定可能です。

ネットワーク上で相手コンピュータにデータを送信する場合、通信相手のコンピュータはIPアドレスで指定しますが、
そのコンピュータで動いているどのプログラムにデータを送るかを指定する情報がポート番号です。
IPアドレスを建物の住所に例えるなら、ポート番号は部屋番号に相当します。

TCPやUDPのヘッダには、宛先ポート番号と送信元ポート番号というフィールドがあります。
宛先ポート番号は、原則としてクライアントがサービスを要求する場合には「当該サービスを受け付けている番号」、
サーバがクライアントに応答する場合には「サービスを要求してきたクライアントのポート番号」が設定されることになります。
この問題ではパケットのポート番号に注目しながら通信の様子を確認します。

プロキシサーバは8080番でサービスを待ち受けているので、クライアントは宛先ポート番号に8080、送信元ポート番号に任意の番号(p1)を設定してプロキシサーバに送信する。
クライアントからHTTP代理要求を受けたプロキシサーバは、宛先ポート番号に80、送信元ポート番号に任意の番号(p2)を設定してWebサーバに送信する。
プロキシサーバからHTTP要求を受けたWebサーバは、宛先ポート番号にp2、送信元ポート番号に80を設定してWebサーバに送信する。
WebサーバからHTTP応答を受け取ったプロキシサーバは、宛先ポート番号にp1、送信元ポート番号に8080を設定してクライアントに送信する。

### ウェルノウンポート番号(Well-known port numbers)

ポート番号のうち、よく利用される特定のアプリケーション用に予約されている 0～1023 までのことです。

下記のプロトコルとポート番号の組みについては情報処理技術者試験での出題頻度が高いため覚えておいて損はありません。
HTTP → 80/TCP
FTP → 20/TCP，21/TCP
SMTP → 25/TCP
POP3 → 110/TCP
DNS → 53/TCP，53/UDP
HTTPS → 443/TCP
NTP → 123/UDP
SNMP → 161/UDP,162/UDP

・FTPには、データの転送用に「20/TCP」、制御用に「21/TCP」が割り当てられています。
・SNMPでマネージャ側からエージェントに通知するときに使用される宛先ポートが「161/UDP」、逆にエージェント側からマネージャに通知するときに使用される宛先ポートが「162/UDP」です。
・SMTPで通常のメール転送に使用されるのが「25/TCP」、メールソフトからメールサーバに届けるときに使用する送信専用の宛先ポート(サブミッションポート)が「587/TCP」です。
・ポート8080番は代替HTTPポートと呼ばれ、大抵のプロキシサーバは8080番でサービスを待ち受けています。
・1024～49151もRegisteredポートとして予約されているため、クライアント端末のポート番号には、上記以外の49152～65535の範囲を使用することになっています。

### IPv4(Internet Protocol Version 4)

・アドレス長は32ビット
・192.168.0.0～192.168.255.255 は、クラスCのプライベートアドレス
・IPv4におけるループバックアドレスは「127.0.0.1」です。自分自身を指す。
**「127.0.0.1」＝ループバックアドレス＝「自分」を意味するIPアドレス**  

127.158.32.134のように先頭の1バイトが"127"であるIPアドレスは「ローカル・ループバック・アドレス」といい、
自分自身のマシンを指す特別なアドレスとして規定されているため、グローバルIPアドレスには使用できません。

### IPv6(Internet Protocol Version 6)

現在インターネットで主流であるIPv4の次期バージョンです。
IPv4のアドレス空間は32ビットですが、インターネットの世界的な普及で枯渇することが確実になっています。
この問題への対策として、策定されたのがIPv6であり、IPv4からIPv6への主な変更点は次の通りです。

・アドレス空間を32ビットから128ビットに拡大(340澗（かん）は、340兆の1兆倍の1兆倍。)
・ヘッダのサイズを可変長から固定に変更
・IPアドレスの自動設定
・IPSecによるIP層でのセキュリティー強化

・IPv4の$2^96$倍のアドレス空間を持つ
・複数のアドレス表記法があり，その一つは，アドレスの16進数表記を4文字(16ビット)ずつコロン":"で区切る方法である。
  16ビットずつの纏まりを16進数4桁で表記したものを":(コロン)"で区切る表記法になっています。
例題的な表記法を乗せておきたい。

・グローバルアドレスの他に、所属するネットワーク内(ルータを超えない範囲)でのみ有効な「リンクローカルアドレス」や、IPv4のプライベートアドレスに相当する「ユニークローカルユニキャストアドレス」があります。  

![拡張ヘッダ](https://www.ap-siken.com/kakomon/03_aki/img/36_2.gif)  

### IPsec(Security Architecture for IP)

IP(Internet Protocol)を拡張してセキュリティを高め、改ざんの検知、通信データの暗号化、  
送信元の認証などの機能をOSI基本参照モデルのネットワーク層レベル(TCP/IPモデルではインターネット層)で提供するプロトコルです。  

AHとESPはIPsecの仕様に含まれるプロトコルです。  
IPv6環境ではネットワーク層(インターネット層)で暗号化を行うIPsecの実装が必須になっています。  

### IPアドレスクラス

IPv4におけるA～Dの各アドレスクラスは、以下のようにIPアドレスの先頭4ビットによって区別されています。
対象となるIPアドレスの上位8ビットに注目します。

クラスA  
先頭ビットが0 (先頭8ビットの10進表記が0～127)  
0000 0000 ~ 0111 1111  
10.0.0.0～10.255.255.255(10.0.0.0/8) は、クラスAのプライベートアドレス

クラスB  
先頭ビットが10 (先頭8ビットの10進表記が128～191)  
1000 0000 ~ 1011 1111  
172.16.0.0～172.31.255.255(172.16.0.0/12) は、クラスBのプライベートアドレス

クラスC  
先頭ビットが110 (先頭8ビットの10進表記が192～223)  
1100 0000 ~ 1101 1111  
192.168.0.0～192.168.255.255(192.168.0.0/16) は、クラスCのプライベートアドレス  

クラスD  
先頭ビットが1110 (先頭8ビットの10進表記が224～239)  
1110 0000 ~ 1110 1111  

例えば10進数128を2進数表記に変換すると10000000です。  
この定義に当てはめると、128はクラスBの範囲内であるため、128.0.0.0 はクラスBのIPアドレスということになります。  

``` txt
A 0    0000 0000(000) ~ 0111 1111(127)
B 10   1000 0000(128) ~ 1011 1111(191)
C 110  1100 0000(192) ~ 1101 1111(223)
D 1110 1110 0000(224) ~ 1110 1111(239)

16~31 : 0001 0000 ~ 0001 1111

10.0.0.0 – 10.255.255.255
0000 1010 . 0000 0000 . 0000 0000 . 0000 0000
0000 1010 . 1111 1111 . 1111 1111 . 1111 1111

172.16.0.0 - 172.31.255.255
1010 1100 . 0001 0000 . 0000 0000 . 0000 0000
1010 1100 . 0001 1111 . 1111 1111 . 1111 1111

192.168.0.0 – 192.168.255.255
1100 0000 . 1010 1000 . 0000 0000 . 0000 0000
1100 0000 . 1010 1000 . 1111 1111 . 1111 1111
```

IPアドレス208.77.188.166は，どのアドレスに該当するか。  
![グルーバルIPアドレス](https://www.ap-siken.com/kakomon/28_aki/img/33.gif)  

<http://atnetwork.info/tcpip/tcpip44.html>

◆IPアドレス（クラスの概念）

　IPアドレスには、アドレスクラス（address class）という分類方法があります。サブネットやCIDRなどにより、アドレスクラスの概念が薄れてきていますが、ネットワークの設計するときには、必ず考慮しなければならない重要な概念です。
IPアドレスの最上位部分のビットパターンで、クラスA ～ クラスE までの5つに分類されています。

#### クラスA ( 0.0.0.0 ～ 127.255.255.255 )

最初の8ビットがネットワークアドレス、残りの24ビットがホストアドレスになります。

ただし、ネットワークアドレスの最初の1ビットは、識別のため、「0」とすることが決められています。

つまり、第1オクテットは、2進数で「00000000」～「01111111」までを意味します。

　10進法に置き換えると「0.X.X.X」～「127.X.X.X」になり、ネットワークアドレスは128個、ホストアドレスは、各ネットワークアドレスごとに1,677万7,216個あります。

※「x」は、ホストアドレスを示しています。

クラスAは、最も大規模なネットワーク向けのクラスクラスになります。
クラスAアドレスは、IPアドレス全体の空間（≒43億個）のうち、半分を占めています。
※ここで、説明しているIPアドレス数は、予約されているIPアドレスも含まれています。

#### クラスB ( 128.0.0.0 ～ 191.255.255.255 )

最初の16ビットがネットワークアドレス、残りの16ビットがホストアドレスになります。

ただし、ネットワークアドレスの最初の2ビットは、識別のため、「10」とすることが決められています。

　つまり、第1、第2オクテットは、2進数で「10000000.00000000」～「10111111.11111111」までを意味します。

　10進法に置き換えると「128.0.X.X」～「191.255.X.X」になり、ネットワークアドレスは16,384個、ホストアドレスは、各ネットワークアドレスごとに6万5,536個確保されます。

※「x」は、ホストアドレスを示しています。

クラスBは、クラスAに次ぐ規模のネットワーク向けのアドレスクラスになります。

※ネットワークアドレスは最初の2ビットが固定されているので

　214 = 16,384 個になります。

クラスBアドレスは、IPアドレス全体の空間（≒43億個）のうち、1/4を占めています。

※ここで、説明しているIPアドレス数は、予約されているIPアドレスも含まれています。

#### クラスC ( 192.0.0.0 ～ 223.255.255.255 )

最初の24ビットがネットワークアドレス、残りの8ビットがホストアドレスになります。

ただし、ネットワークアドレスの最初の3ビットは、識別のために、「110」とすることが決められています。

　つまり、、第1、第2、第3オクテットは、2進数で「11000000.00000000.00000000」～「11011111.11111111. 11111111」までを意味しています。

　10進法に置き換えると「192.0.0.X」～「223.255.255.X」になり、ネットワークアドレスは209万7,152個、ホストアドレスは、各ネットワークアドレスごとに256個確保されます。

※「x」は、ホストアドレスを示しています。

クラスCは、小規模なネットワーク向けのアドレスクラスになります。
クラスAアドレスは、IPアドレス全体の空間（≒43億個）のうち、1/8を占めています。
※ここで、説明しているIPアドレス数は、予約されているIPアドレスも含まれています。

#### クラスD ( 224.0.0.0 ～ 239.255.255.255 )

クラスDは、クラスAからクラスCまでのいずれのアドレスクラスにも該当しない特殊なクラスです。
クラスDでは、最初の4ビットが識別のために、「1110」とすることが決められています。
クラスDの使用目的は、IPマルチキャスト用です。ホストアドレス部分はありません。

10進数で範囲を表すと、「224.0.0.0」～「239.255.255.255」になります。
マルチキャスト通信は、音声や映像データの一斉放送するために、マルチメディアアプリケーションなどが使用します。
また、ルーティングプロトコルがお互いに経路情報を交換する際にも使用されます。

#### クラスE ( 240.0.0.0～255.255.255.255 )

クラスEでは、最初の4ビットが識別のために、「1111」とすることが決められています。
　クラスEのIPアドレスの範囲は、「240.0.0.0～255.255.255.255」で、このクラスは、実験用としてTCP/IP（IPv4）の開発当初から予約されています。実際に使われることはありません。

### ブロードキャストアドレス

あるネットワーク内のすべての端末に同じ内容を送信する(ブロードキャストする)ときに使われる特別な宛先アドレスで、ホストアドレス部のビットを全て"1"にしたアドレスです。  
IPアドレスからブロードキャストアドレスを得るには、サブネットマスクでビットが"1"になっている部分（ネットワーク部）にはホストのIPアドレスをそのまま使い、  
サブネットマスクのビットが"0"になっている部分（ホストアドレス部）のビットは全て"1"にします。  

サブネットマスクをビット反転すると、ネットワーク部のビットが"0"、ホストアドレス部のビットが"1"になったビット列となります。  
これと対象IPアドレスを論理和(OR)演算すると、ネットワーク部は元のIPアドレスのビットそのまま、ホストアドレス部は全て"1"になったビット列（ブロードキャストアドレス）を得ることができます。  

![!](https://www.ap-siken.com/kakomon/03_aki/img/35.gif)  

あるネットワークに属するすべてのノードに対してデータを同時伝送することです。

### ブロードキャストストーム

ループ状に接続されているネットワークにおいて、同一のブロードキャストフレームが増幅しながら永遠にネットワーク内を回り続ける現象です。  

ネットワークスイッチはブロードキャストフレームを受け取ると、そのフレームをコピーし、受信ポート以外の全てのポートから送出します。  
このときネットワーク内にループ状の構成が含まれていると、いずれはスイッチ自身が送信したフレームを自分で受信し、再び全てのポートに送信してしまうことになります。  
このように増幅したブロードキャストフレームは、やがてネットワークの帯域を圧迫しネットワーク障害をもたらします。  
これが「ブロードキャストストーム」です。  

### ネットワークアドレス

ホストアドレス部がすべて0となるアドレス。
どちらのアドレスもPCに割り振ることができない。

![ユニキャスト、マルチキャスト、ブロードキャスト](https://www.ap-siken.com/kakomon/03_aki/img/31.gif)  

### IEEE802

![!](https://www.ap-siken.com/kakomon/03_haru/img/33.gif)  
![!](https://www.ap-siken.com/kakomon/03_haru/img/33a.gif)  

acが5GHz  
gが2.4GHz  

### イーサネット(Ethernet)

> wiki
>イーサネット (Ethernet) は、家庭・企業・データセンターなどで使用されるコンピューターネットワークにおいて、LANやWANを構成する有線ローカルエリアネットワークの主流な通信規格である。 その技術仕様はIEEE 802.3で規定されている。  
>
>イーサネットとは、主に室内や建物内でコンピュータや電子機器をケーブルで繋いで通信する有線LAN（構内ネットワーク）の標準の一つで、最も普及している規格。  

単純に優先LANの規格の事をいうらしい。  
規格としては1000BASE-T等のアレ。  

### 広域イーサネット

>[大塚商会](https://www.otsuka-shokai.co.jp/words/wide-area-ethernet.html#:~:text=%E5%BA%83%E5%9F%9F%E3%82%A4%E3%83%BC%E3%82%B5%E3%83%8D%E3%83%83%E3%83%88%E3%81%A8%E3%81%AF,%E3%81%AE1%E3%81%A4%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82)  
地理的に離れたLANとLANの間などをEthernetで接続するネットワークのこと。  
その範囲は100km単位の大きさにわたり、「広域LAN」とも呼ばれる。IP-VPNやインターネットVPNと同じように、WAN（広域網）サービスの1つである。  

メリット
IP-VPNやインターネットVPNに比べ、次のようなメリットがある。  
・通信速度が速く、遅延の幅が小さい。  
・安価なVLAN対応のスイッチングハブが利用でき、初期コストを低減できる。  
・IP以外の通信プロトコルを利用する場合でもEthernetへの変換のみで済む。  
・ネットワーク構成の自由度が高く、拠点の追加やプロトコルの変更などに柔軟に対応できる。  

デメリット
・提供地域が狭い
・アクセス回線の選択肢が少ない
・回線の費用が高くなる
最近では、このようなデメリットも改善されつつある模様。  

ネットワーク間はルーターで区切るが、広域イーサネットでは全拠点を同一ネットワークとして扱うため、拠点ごとのルーターが不要になる。  
さらに、IP、AppleTalk、IPXなど、マルチプロトコルにも対応する。  

><https://www.gate02.ne.jp/media/it/column_78/>  
>「広域イーサネット」とは、通信事業者が独自に用意した閉域網を利用するL2（レイヤ2）のVPN接続サービスのことです。  
>L2で通信を行うので、地理的に離れたLAN同士を1つの大きなLANとして構築できます。  
>IP-VPNやインターネットVPNのようにインターネットプロトコルでの通信に限定されず、多様なルーティングプロトコルに対応できる為、 柔軟性のあるネットワーク設計が可能となりま>す。  
>また、公衆網（インターネット）を使わない事で、高いセキュリティレベルを保持する事が出来るほか、安定して高速な通信が実現します。  
>
>一般企業へ最も浸透している拠点間接続方法はインターネットVPNですが、公衆網を利用しL3（レイヤ3）の階層で通信をする事で、VPNルータの用意と設定さえ出来れば容易に、また比較的安>価に導入が実現するVPNとなります。  
>しかし、トラフィックの混雑状況によって通信速度が遅くなる可能性があったり、公衆網が故セキュリティリスクを孕んでいる点ではL2のVPN接続サービスに若干劣るかもしれません。  

→
地理的に離れていても同一拠点同士の通信とみなせるので、ルーターを設置してIPの変換等を行う必要がない模様。  
第2層までで通信が事足りるということか。  

[2]  
回線事業者が提供する閉域ネットワークに接続する。
イーサネットの名の通りL2レベルで接続するため上位の層のプロトコルがIPに限定されない。
事業者の回線を使用するため帯域保証などのサービスがある。

### インターネットVPN

IPsecなどのセキュリティプロトコルを利用して公衆回線上にVPNを構築する。  
通信経路にインターネットを利用するため専用線を用いるサービスと比較して安価なことが多い。  
通信品質を保証しないベストエフォート型なのでネットワークが混雑していると通信の遅延が生じることがある。  

### ベストエフォート

ベストエフォート（best effort）とは、日本語でいうと「最大限の努力」といった意味になります。  
インターネットの世界においては、回線業者が提示した最大通信速度を上限とし、最大限に努力した速度でインターネットに接続することを意味します。  

光回線をはじめとするインターネット回線の通信速度は、回線事業者によって「最大1Gbps」というような表示がされています。  
これは、技術規格上の最大通信速度のことで、実際の通信速度は回線の混み具合によって変化します。  
ほかにも、使用している機器の性能やケーブルの種類、基本ソフトの設定などによっても通信速度は異なります。  

このように、最大通信速度とは、回線に接続するユーザーが少ないために混雑しておらず、PCなどの機器の処理性能が高いなど、諸条件が最高に整っているときに再現できる理論値ということになります。  

実際にインターネット回線を利用した場合、どのくらいの通信速度が出せるのかは、回線事業者でも保証はできません。  
そのためベストエフォートでは、条件によってはうたわれている最大通信速度を下回ることもあります。  
つまり、ベストエフォートとは、最高の条件で出せる最大の通信速度を表示した契約条件ということになります。  

---

## ネットワーク管理

### ping(ピン，ピング)

IPネットワークにおいて対象の端末にパケットを送信し、正しく届いたかを確認するためのコマンドです。  
具体的には、ICMPの"echo request"(エコー要求)パケットを対象ノードに投げ、対象ノードから"echo reply"(エコー応答)が返ってくることで到達性を確認します。  

### arp(アープ)

ARPテーブルの管理に使用されるコマンドで、ARPテーブルの表示およびエントリの追加／削除の機能をもちます。  
IPアドレスから対応する機器のMACアドレスを得るARP(Address Resolution Protocol)と同名です。  

### netstat

自端末のTCP/IPネットワーク接続状況を調べるコマンドです。ルーティングテーブル、通信状態、通信相手、通信量などの情報が得られます。

### ipconfig

自端末のネットワーク設定を表示するコマンドです。IPアドレスやサブネットマスクおよびデフォルトゲートウェイの情報などが得られます。

### 名前解決コマンド

・nslookup : DNSサーバからの応答を見やすい形にして表示する  
・dig : 応答をほぼそのままの形で表示する  

DNSサーバの名前解決テストに使用されるコマンドは「nslookup」コマンドと「dig」コマンドです。  
どちらもホスト名を引数で与えることで、名前解決を手動で実行でき、ホスト名のIPアドレスの確認やDNSが正しく動作しているかどうかを調べることができます。  

### OpenFlow

既存のネットワーク機器がもつ制御処理と転送処理を分離したアーキテクチャです。  
制御部をネットワーク管理者が自ら設計・実装することで、ネットワーク機器ベンダの設定範囲を超えた柔軟な制御機能を実現できます。  

### SDN(Software-Defined Networking)

[1]  
OpenFlow上でソフトウェア制御による動的で柔軟なネットワークを作り上げる技術全般を意味します。  
SDNを用いると、物理的に接続されたネットワーク上で、 別途仮想的なネットワークを構築するといった柔軟な制御が可能になります。  

[2]  
ソフトウェア制御によって物理的なネットワーク構成にとらわれない動的で柔軟なネットワークを実現する技術全般を意味します。  

SDNを実現するための技術標準がOpenFlowプロトコルであり、既存のネットワーク機器がもつ制御処理(コントロールプレーン)と転送処理(データプレーン)を分離することで、  
OpenFlowコントローラが中央集権的に複数のスイッチの転送制御を管理します。  
OpenFlowではパケットやフレームをフローとして扱い、フローの様々な情報を使って柔軟に転送制御できるようになっています。  
スイッチはOpenFlowコントローラと通信を行いながら、OpenFlowコントローラから提供されるフローテーブルや直接の転送指示により転送先を判断します。  

![!](https://www.ap-siken.com/kakomon/30_aki/img/35.gif)  

---

## ネットワーク応用

### MIME(Multipurpose Internet Mail Extension，マイム)

ASCII文字しか使用できないSMTPを利用したメールで、日本語の2バイトコードや画像データを送信するための仕組みです。  
S/MIME(Secure MIME)は、これに暗号化とディジタル署名の機能を付け電子メールの機密性と完全性を高めたものです。  

### Bcc(ブラインドカーボンコピー)

電子メールにおける送信先指定方法の1つで、toで指定した送信先以外に、メールのコピーを送信しておきたい相手を指定する機能のことです。  
この指定を用いると、toの相手及びbccで指定した相手に、自分以外の送り先のアドレスが通知されないため、  
toの相手とbccの相手の相互間で電子メールアドレスを知られたくない場合に使用します。  
メールソフトから送信元サーバへはbccヘッダを付加して送りますが、宛先に到着したときにbccのメールアドレスがメールヘッダ情報として見えてしまうと意味がないので、  
送信元メールサーバではメール送信時にbccヘッダを削除します。  

### Received

メールが到着するまでに経由したメールサーバの一覧を表します。

### CGI(Common Gateway Interface)

ユーザの入力した情報によって表示するWebページを変化させるなど、動的なWebページを作成するための仕組みです。  
Webサーバにおいて，クライアントからの要求に応じてアプリケーションプログラムを実行して，その結果をWebブラウザに返すなどのインタラクティブなページを実現するために，  
Webサーバと外部プログラムを連携させる仕組み。  
CGIはどのプログラム言語を用いても作成できますが、実際にはPHPやPerlが多用されているようです。  

### URL(Uniform Resource Locator)

WWW上において、情報の位置を示す住所のような文字列です。  
URLには、通信に使用するプロトコル名，サーバのホスト名(ドメイン)，ディレクトリ名，ファイル名，使用するポート番号などを記述します。  

### サブネットマスク

IPアドレスをネットワークアドレスとホストアドレスに分割し，複数のより小さいネットワークを形成するために使用する32ビット(IPv4では)のビット列です。  
それぞれのIPアドレスとサブネットマスクをAND演算した結果が同じネットワークアドレスになれば同一のネットワークに属していることになります。  

サブネットがかかっている部分→ネットワークアドレス部  
サブネットかかっていない部分→ホストアドレス部  

192.168.30.32/28  
"192.168.30.32"の後方に付加されている"/28"は**アドレスプレフィックス**といい、先頭から何ビットまでがネットワークアドレスであるかを示す表記法です。  

### スーパーネット(ルート集約)

複数のネットワークアドレスを1つにまとめることを**ルート集約**といい、  
複数のIPアドレスを2進数表記にしたときに共通しているビット列の位置までサブネットマスクを左にずらすことでルート集約を行うことができます。  

二つのIPv4ネットワーク 192.168.0.0/23 と 192.168.2.0/23 をそれぞれ2進数表記にすると、

11000000 10101000 00000010 00000000  
11000000 10101000 00000000 00000000  

となり、上位から22ビットまでが共通のビット列であることがわかります。  
つまり共通している22ビット目までをサブネットマスクとした 192.168.0.0/22 がルート集約後のネットワークになります。  
この操作は共通している22ビット目までをサブネットマスクとし、  
それ以後をホストアドレスとして使用することで2つのネットワークを内包する1つのIPネットワークを定義していると考えることができます。  

### マルチホーミング

インターネット回線を複数ISPの回線で接続し、1つの回線が切れてもほかの回線で通信し続けられるようにすることで、耐障害性の向上や負荷分散を行う仕組みです。  

### DNSラウンドロビン

DNSの機能を使用した負荷分散と言えば「DNSラウンドロビン」です。  
具体的には、以下のように同じホスト名に対して複数のAレコードを設定することで、アクセスを複数のコンピュータに（単純に順繰りに）振り分けます。  

``` txt
www IN A 200.x.y.1
www IN A 200.x.y.2
www IN A 200.x.y.3
```

DNSの機能では死活監視ができず、1つのWebサーバがダウンしてもアクセスを分配し続けてしまうため、可用性対策としては負荷分散装置に劣ります。

### ロードバランサー

[【図で理解】ロードバランサーとは？負荷分散の仕組みを解説](https://www.kagoya.jp/howto/it-glossary/network/loadvalancer/#:~:text=%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%83%BC%E3%81%A8%E3%81%AF%E3%80%81%E3%81%9D%E3%81%AE%E5%90%8D,%E3%81%8C%E3%81%A7%E3%81%8D%E3%81%9F%E3%82%8A%E3%81%97%E3%81%BE%E3%81%99%E3%80%82)  

>ロードバランサーとは、その名の通りサーバーにかかる負荷を、平等に振り分けるための装置のことを指します。  
>これによって1つのサーバーにかかる負担を軽減したり、停止状態を防ぐことができたりします。  
>※ロードバランサーでSSLアクセラレーターを使用することにより、本来サーバーごとに必要なSSL証明書を1本化したり、暗号化通信の負荷を軽減できたりします。  

![!](https://www.ap-siken.com/kakomon/30_aki/img/pm05_3.gif)  

H30A  
LB（ロードバランサ）を使用したシステム構成の場合、クライアント（各部署のPC）はWebサーバのIPアドレスではなく、LBのIPアドレス宛にパケットを送付します。  
その後LBは、どのWebサーバにパケットを振り分けるかを決定して、サーバにパケットを送付します。  
Webサーバは、LBから送付されたパケットを処理して応答結果をLBに送付します。  
その後、LBからクライアントに応答結果が送付されるという流れになります。  
LBは受信したパケットの送信元IPアドレスを書き換えます。  

※LBの負荷分散方式としては、ラウンドロビン方式の他にリーストコネクション方式（コネクション数が最少のサーバに振り分ける）があります。  

### IEEE802.1X

H31S,H26S  
LAN内のユーザ認証の方式を定めたIEEE規格で、正当な端末以外がLANに参加することを防ぐ技術です。  
当初は有線LAN向けとして策定されていましたが、その後にEAP(Extensible Authentication Protocol)として実装され、現在では無線LAN環境(IEEE802.11)における標準の認証機構として利用されています。  
TLS(クライアント証明書)、S/key、MD5によるチャレンジレスポンスなど様々な認証方式をサポートしています。  

IEEE802.1Xの認証システムでは、認証を受けるクライアントである「サプリカント(supplicant)」、RADIUSなどの「認証サーバ(authentication server)」、  
RADIUSクライアントの機能を持ち、認証サーバ間の認証プロセスを相互に中継する認証装置(認証スイッチ)である「オーセンティケータ(authenticator)」の3つの要素で構成されます。  
![!](https://www.ap-siken.com/kakomon/26_haru/img/pm05_5.gif)  

### ICMPリダイレクト

L3SWやルータが特定のネットワーク宛てのパケットに関してよりよい経路情報を送信元に伝達するために使用されるメッセージです。  
本問のケースで言えば、ネクストホップが設定されたL3SW1は、送信元に対し 172.16.2.251 が適切な転送先である旨のICMPリダイレクトメッセージを返します。  
これを受け取った送信元（PC）は、ICMPリダイレクトを解釈し次からサーバ宛てのパケットを 172.16.2.251（つまりL3SW2）に転送するようになります。  

---

## ネットワーク方式

### LTE(Long Term Evolution)

第三世代携帯電話(3G)を拡張した通信規格であり、下り最大100Mbps以上、上り最大50Mbps以上という家庭用ブロードバンドに匹敵する高速通信が可能な携帯電話用の通信規格です(速度は理論値)。  
日本では2012年より各キャリアによりサービスが開始され、2018年現在、一般的な移動通信規格になるに至っています。  
LTEの仕様は標準化団体である3GPP(3rd Generation Partnership Project)にて標準化されました。  
MIMO(Multiple Input Multiple Output)とは、無線通信において送信データを複数のストリームに分割し、それぞれを複数のアンテナで送受信することで高速に伝送する技術です。  

### VoIP(Voice over Internet Protocol)

音声を各種符号化方式で圧縮しパケットに変換した上でIPネットワークでリアルタイム伝送する技術です。

### MAC(Media Access Control)

LANの媒体アクセス制御を行うデータリンク層の副層のことです。イーサネット用のCSMA/CDやトークンリング用のトークンパッシングなどがあります。

### MDM(Mobile Device Management,携帯端末管理)

企業や団体が、自組織の従業員に支給する複数のスマートフォンやタブレット端末を遠隔から一元管理する仕組みのことです。

### RADIUS(Remote Authentication Dial In User Service)

認証情報と認証手続き、および利用ログの記録(アカウンティング)をネットワーク上のサーバに一元化することを目的としたシステムです。

### NAPT(Network Address Port Translation)

プライベートIPアドレスとグローバルIPアドレスの相互変換するNATの考え方にポート番号を組み合わせた技術です。  
ホストごとにユニークなポート番号を割り当てることで、1つのグローバルIPアドレスで複数のプライベートIPアドレスを持つノードを同時にインターネット接続させることが可能です。  

パケットを内部から外部に中継する場合は、パケットの送信元プライベートIPアドレスをルータ(またはファイアウォール)自身のグローバルIPアドレスに変換するとともに、  
送信元ポート番号に任意の空いているポートを割り当てます。逆に外部から内部に応答パケットを中継する場合は、  
「宛先IPアドレスと宛先ポート番号に送信時に保存しておいたプライベートIPアドレスとポート番号を設定」し、内部のノードにパケットを通します。  

![!](https://www.ap-siken.com/kakomon/31_haru/img/31a.gif)  

### LPWA

LowPower=省電力、WideArea=広範囲の名称の通り、省電力・広範囲を特徴とする無線通信規格の総称です。  
伝送速度は遅いものの、Wi-fiやBluetoothが届かない数キロメートルから数十キロメートル間の通信をカバーします。  
LPWA規格には、SIGFOX、LoRaWAN、Wi-SUN、NB-IoT、Cat-M1などがあります。  

IoT(Internet of Things)では、制御や情報取得のために各所に散りばめられたデバイス同士が通信を行うことになります。  
この個々の通信はそれほど大きいデータ量ではないので、LPWAの低い伝送速度が問題になることは余りありません。  
それよりも小型化が進むデバイスのバッテリー消費を抑えられることがIoTにおける強みとなります。  
このような理由から、LPWAは小型デバイスを多数配置した広範囲のIoTネットワークの運用を実現する手段として期待されています。  

### PoE(Power over Ethernet)

イーサネットのLANケーブルを通じて電力を供給する技術です。  
屋外に設置されるネットワークカメラや、天井や壁に設置される無線LANアクセスポイントのように、電源コンセントがない又は電源配線が難しい場合に利用されます。  
利用にはPoEに対応した機器が必要です。  

### PLC(Power Line Communications)

電力線を通信回線としても利用する技術です。  

### BLE(Bluetooth Low Energy)

無線通信規格Bluetoothの一部で、その名前の通り低消費電力に特化した通信モードのことです。  
通信速度は低速ながら、ボタン電池1個で数カ月から1年程度稼働できるほど省電力性に優れ、低コストであることからIoTネットワークでの活用が期待されています。  
最大通信距離は選択する速度によって異なり10ｍ～400ｍ程度です。  

### フォワードプロキシ

Webブラウザの代理として，Webサーバに対するリクエストを送信する。  
プロキシサーバは、内部ネットワーク内の端末からの要求に応じてインターネットへのアクセスを代理する装置です。  
単にプロキシともいいます。  
プロキシサーバを設置すると、キャッシュ機能によるレスポンス向上、認証やフィルタリングによるセキュリティ、内部ネットワークの秘匿化などの効果を期待できます。  

![!](https://www.ap-siken.com/kakomon/01_aki/img/35.gif)  

### リバースプロキシ

クライアントとWebサーバの間のWebサーバ側に位置し、Webサーバを代理する形でクライアントからのリクエストを受け取り、そのリクエストをWebサーバに受け渡す仕組みです。  
クライアントからのリクエストは必ずリバースプロキシを経由するので、リバースプロキシにアクセス制御や認証などの機能をもたせることで、Webサーバのセキュリティ向上が期待できます。  

![!](https://www.ap-siken.com/kakomon/31_haru/img/35.gif)  

### チャネル

無線LANネットワークでは、近接するネットワークとの電波干渉を避けるために、使用する周波数帯をネットワークごとに微妙にずらすことが可能になっています。  
このときに設定する値をチャネル（チャンネル）といいます。  

2.4GHz帯を使用するIEEE802.11gでは1～13のチャネル（11bでは1～14）を選択できますが、1つのチャネルの周波数帯域は22MHz、各チャネルは5MHzずつ区切られているので、  
近接するチャネル同士は周波数帯が一部重なっていて電波干渉が起きます。  
このため、近くの無線LANネットワークで同じまたは近接するチャネルが使用されていると通信が不安定になってしまうという特性があります。  
なお、5GHz帯を使用する無線LAN規格では各チャネルの周波数帯は完全に独立しているので、近接するチャネルを設定しても2.4GHz帯のような電波干渉は起きません。  

![!](https://www.ap-siken.com/kakomon/03_haru/img/36.gif)  

アクセスポイント相互の電波の干渉を避けるために，隣り合うアクセスポイントには，例えば周波数チャネル番号1と6，6と11のように離れた番号を割り当てるのがよい。  
→  
正しい。  
2.4GHz帯ではチャネルが5つ以上離れていないと電波干渉が起こるので、通信範囲が重なり合うアクセスポイントには、1、6、11などの離れた番号を割り当てる必要があります。  

### SSID(Service Set Identifier)

無線LANの規格であるIEEE802.11系において「混信」を避けるためにアクセスポイントと端末に設定されるネットワーク識別子です。  
SSIDには最長で32文字の任意の英数字を設定できます。  
通信を行う端末とスイッチがコードで接続されている有線LANと異なり、無線LAN環境では1つの端末が複数のアクセスポイントと通信できてしまう「混信状態」が発生し得ます。  
これを回避するため、無線LANではアクセスポイントと端末にそれぞれSSIDを設定し、SSIDが一致する機器同士しか通信ができないようにアクセス制御を行っています。  

### NFV(Network Functions Virtualisation，ネットワーク機能の仮想化)

仮想化技術を利用して、従来はルータ、スイッチ、ファイアウォール、ロードバランサなどの専用機器で行われていた機能を、  
汎用サーバ内の仮想マシン上で動くソフトウェアとして実装するアーキテクチャです。  
複数のネットワーク機器の機能を1つの物理サーバに集約できるため、コスト削減や信頼性向上などのメリットがあります。  

SDN(Software-Defined Networking)では、ネットワーク機器の機能のうち制御部だけをソフトウェア化しましたが、NFVでは機器ごと仮想化する点が異なります。  

![!](https://www.ap-siken.com/kakomon/30_haru/img/32.gif)  

### 3ウェイハンドシェイク

TCPがコネクションを確立する手順は次のようになっています。  
(説明中で〇〇パケットとしていますが、正確にはTCPヘッダ中のコントロールフラグの〇〇を1に設定したパケットです)  

1. 要求元から要求先に対してSYNパケットを送信する（接続要求）。  
2. SYNパケットを受信し要求先は、要求者の接続を許可することを表すSYN/ACKパケットを送信する（接続許可）。  
3. SYN/ACKパケットを受信した要求元は接続開始を表すACKパケットを要求先に送信し、相手との通信を開始する（コネクション確立）。  

![!](https://www.ap-siken.com/kakomon/01_aki/img/pm05_4.gif)  

### Keep-Alive

HTTP/1.1では目的の通信が終わった後もTCPコネクションを一定時間維持し、連続した要求が来たときは前回の接続を再利用することで、  
毎回TCPコネクションを確立する無駄を省いています。  
この仕組みを「Keep-Alive」といいます。  

---

## 難しかった問題・残しておきたい問題

**平成28年秋期　問34**
図はNTPによる時刻合わせの基本的な仕組みを表している。NTPサーバからの応答には，NTPサーバでの問合せ受信時刻と，応答送信時刻が含まれており，PCは図に示した四つの時刻からサーバ時刻とのずれを計算する。このとき，PCの内部時計はNTPサーバの時計と比べてどれだけずれているか。ここで，伝送遅延は問合せと応答で等しいものとする。また，図中の時刻は，PCとNTPサーバのそれぞれの内部時計の時刻であり，aa:bb:cc.dddddd は aa時bb分cc.dddddd秒 (ddddddはマイクロ秒)を表す。
→
まず、4つの時刻から問合せ・応答の伝送遅延時間を求めます。
PCの問合せ送信から応答受信までが(900-100=)800マイクロ秒、NTPサーバの問合せ受信から応答送信までが(400-200=)200マイクロ秒なので、問合せ・応答の往復に要した伝送時間は、以下のように計算できます。
　800－200＝600(マイクロ秒)
設問にて「伝送遅延は問合せと応答で等しい」と示されているため、問合せと応答の際の伝送遅延は各々300マイクロ秒とわかります。
次に、求めた伝送遅延時間を用いて時刻のずれを計算します。
NTPサーバの応答送信時刻が aa:bb:cc.000400 なので、これに伝送遅延の300マイクロ秒を足した aa:bb:cc.000700 がPCの応答受信時刻になるはずです。
しかしPCの応答受信時刻は aa:bb:cc.000900 を示しているため、時計のずれが生じていると判断できます。PCとNTPサーバの時計の差は次のように導けます。
　900－700＝＋200(マイクロ秒)
→
300マイクロ秒の差があるなら、問い合わせ開始時間と問い合わせ受信時間のズレに納得がいかないと思ったけど、
最初から200マイクロ秒ずれていると考えたら辻褄は合う。
わかるようでわからない問題だから辛い。
まずやることは、PC側の送信受信時間とNTPサーバーの受信送信時間から伝送遅延を導くこと。
求めた伝送遅延をNPTか送信して到着するまでの時間に当てはめて、そのずれを導けば良いということか。



10Mバイトのデータを100,000ビット／秒の回線を使って転送するとき，転送時間は何秒か。ここで，回線の伝送効率を50%とし，1Mバイト＝10^6バイトとする。
→
伝送効率が50%である100,000ビット／秒の通信回線を使うので、実効転送速度は以下のように計算できます。
　100,000[ビット／秒]×0.5＝50,000[ビット／秒]
転送するデータの単位がバイトなので実効転送速度もバイト単位に直します（1バイト＝8ビット）。
　50,000[ビット]÷8[ビット]＝6,250[バイト／秒]
転送するデータ量（10Mバイト）を1秒当たりの転送量（6,250[バイト／秒]）で割ることで、転送時間を計算できます。
　10,000,000[バイト]÷6,250[バイト／秒]＝1,600[秒]

【別解】
上記の解説ではバイトに揃えて計算していますが、Mビットに揃えた方が計算が容易かもしれません。

【実行転送速度】
　100,000[ビット／秒]×0.5＝50,000[ビット／秒]
＝0.05[Mビット／秒]
【転送するデータ量】
　10[Mバイト]×8[ビット]＝80[Mビット]
【転送時間】
　80[Mビット]÷0.05[Mビット／秒]＝1,600[秒]



64kビット／秒の回線を用いて106バイトのファイルを送信するとき，伝送におよそ何秒掛かるか。ここで，回線の伝送効率は80%とする。
→
回線速度が64kビット／秒で伝送効率が80%なので、

　64kビット／秒＝8kバイト／秒
　8k×0.8＝6.4kバイト／秒

1秒間の伝送可能量は最大で6.4kバイトと計算できます。したがって106バイトのファイルを送信するときの伝送時間は、

　1,000,000÷6,400＝156.25(秒)

およそ「156秒」が適切です。



符号化速度が192kビット／秒の音声データ2.4Mバイトを，通信速度が128kビット／秒のネットワークを用いてダウンロードしながら途切れることなく再生するためには，再生開始前のデータのバッファリング時間として最低何秒間が必要か。
→
音声データサイズを符号化速度※で割ると再生時間がわかります。音声データ2.4Mバイト、符号化速度は192kビット／秒と単位がビット・バイトで異なるので、どちらかに合わせて計算します。ここでは符号化速度の方を「192kビット÷8ビット＝24kバイト」とバイト単位に直します。

　2.4[Mバイト]÷24[kバイト]
＝2,400[kバイト]÷24[kバイト]
＝100[秒]

この計算により再生時間100秒相当の音声データであるとわかります。

次に音声データサイズを通信速度で割って、ダウンロードに要する時間を求めます。音声データサイズは2.4Mバイト、ネットワークの通信速度は128kビット／秒(＝16kバイト／秒)なので、ダウンロードに要する時間は、

　2.4[Mバイト]÷16[kバイト]
＝2,400[kバイト]÷16[kバイト]
＝150[秒]

再生時間よりダウンロード時間が長い状態ではデータの転送が遅れ、再生途中で停止してしまうことになるため、再生開始前にある程度のデータをバッファリング(一時的に蓄えておく処理)する必要が生じます。再生時間と転送時間の差は50秒なので、この差分である50秒分のデータをあらかじめ蓄えた状態で再生を開始し、再生しながらデータをダウンロードすれば、最後まで途切れずに再生が行われることになります。

したがって〔ウ〕が適切です。

※符号化速度は、アナログデータをディジタルデータに変換するに際して、単位時間当たり何ビットで表現するかを示します。



平成29年春期　問30
本社と工場との間を専用線で接続してデータを伝送するシステムがある。このシステムでは2,000バイト／件の伝票データを2件ずつまとめ，それに400バイトのヘッダ情報を付加して送っている。伝票データは，1時間に平均100,000件発生している。回線速度を1Mビット／秒としたとき，回線利用率はおよそ何%か。
→
システムでは発生したデータを「2件の伝票データ＋ヘッダ → 1つの送信単位」と変換を行ってから送信します。
この送信単位となるデータは、上の図のように伝票データを2件まとめたものにヘッダ情報が付加されるので、
　2,000×2＋400＝4,400(バイト)
1つ当たり4,400バイトになります。
1時間に発生する伝票データは平均100,000件なので、送信時には半分の50,000件の送信データに変換されます。
1時間に4,400バイトのデータが50,000件送信されるので、1時間当たりの伝送量は平均で、
　4,400バイト×50,000件＝220Mバイト

回線速度は、1Mビット／秒＝125kバイト／秒で、1時間の伝送可能量は、
　125kバイト×3,600秒＝450Mバイト
したがって回線利用率は、
　220÷450＝0.48888…
およそ49%とわかります。



平成28年秋期　問35
地上から高度約36,000kmの静止軌道衛星を中継して，地上のA地点とB地点で通信をする。衛星とA地点，衛星とB地点の距離がどちらも37,500kmであり，衛星での中継による遅延を10ミリ秒とするとき，Aから送信し始めたデータがBに到達するまでの伝送遅延時間は何秒か。ここで，電波の伝搬速度は3×108m／秒とする。
→
A地点－衛星間、および衛星－地点B間は共に37,500kmなので通信距離は、
　37,500×2＝75,000(km)
と分かります。75,000kmをメートル単位に変換すると、75,000,000m＝7.5×10^7mです。電波の伝搬速度は3×10^8m／秒であるため、電波が75,000kmの距離を伝搬するために必要な時間は、
　(7.5×10^7)÷(3×10^8)
＝(7.5×10^7)÷(30×10^7)
＝7.5÷30
＝0.25(秒)
これに衛星での中継による遅延時間10ミリ秒(0.01秒)を加えた0.26秒が、地点Aから地点Bに到達するまでの伝送遅延時間になります。したがって正解は〔エ〕です。



令和元年秋期　問30
10Mビット／秒の回線で接続された端末間で，平均1Mバイトのファイルを，10秒ごとに転送するときの回線利用率は何%か。
ここで，ファイル転送時には，転送量の20%が制御情報として付加されるものとし，1Mビット＝106ビットとする。
→
回線利用率は「転送量÷回線速度」で求められます。

[1秒当たりの転送量]
転送するファイルサイズは平均1Mバイトですが、転送の際に転送量の20％の制御情報が付加されるので、実際に転送するデータ量は、

　1Mバイト×1.2＝1.2Mバイト

ファイルの転送は10秒ごとに行われるので、1秒当たりの平均転送量は、

　1.2Mバイト÷10＝0.12Mバイト

[転送速度]
回線の通信速度はビット単位なのでバイト単位に変換してから計算しなければなりません。10Mビット／秒をバイト単位に変換すると、

　10M÷8＝1.25Mバイト／秒

[回線利用率]
0.12Mバイト／秒のデータを1.25Mバイト／秒の回線で転送するので、回線利用率は、

　0.12÷1.25＝0.096＝9.6%


---

## 1回目に間違えた問題

電子メールのヘッダフィールドのうち，SMTPでメッセージが転送される過程で削除されるものはどれか。
→
受け取ったという情報は消えていいよなと思って「Received」なるものを選択してみたが、ダメだった。
Bccは情報としては消えるべきだが、ヘッダーとして消えるべきか怪しかったので選ばなかったがこれが正解だった。


IPv4アドレス 128.0.0.0 を含むアドレスクラスはどれか。
→
完全に忘れてる問題。
3回目なのでいい加減に覚える。
A : 0
B : 10
C : 110
D : 1110



TCP/IPネットワークで，データ転送用と制御用に異なるウェルノウンポート番号が割り当てられているプロトコルはどれか。
→
普通に知らなかった。
ズバリFTPなのだが、確かに2つある。
ついでにDNSも2つある。
覚えよう。



10Mバイトのデータを100,000ビット／秒の回線を使って転送するとき，転送時間は何秒か。ここで，回線の伝送効率を50%とし，1Mバイト＝106バイトとする。



地上から高度約36,000kmの静止軌道衛星を中継して，地上のA地点とB地点で通信をする。衛星とA地点，衛星とB地点の距離がどちらも37,500kmであり，衛星での中継による遅延を10ミリ秒とするとき，Aから送信し始めたデータがBに到達するまでの伝送遅延時間は何秒か。ここで，電波の伝搬速度は3×108m／秒とする。
→
0.25秒を求めるまではよかったが、10ミリ秒=0.01秒を0.1秒として0.35秒で応えてしまった。
SI単位系もしっかりしておかないといけない。
そのためにも基礎理論を時間をかけて復讐することにするか。

ミリ = 10^-3
ナノ = 10^-6
マイクロ = 10^9



10Mビット／秒の回線で接続された端末間で，平均1Mバイトのファイルを，10秒ごとに転送するときの回線利用率は何%か。ここで，ファイル転送時には，転送量の20%が制御情報として付加されるものとし，1Mビット＝106ビットとする。
→
1分で考えるから悪かった。
秒単位でも十分いける。
1.2Mを10で割る。 0.12M

10Mビットだ。問題文よく見てなかった。
10/8 = 1.25M

0.12/1.25 = 0.096=9.6%
