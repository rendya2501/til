# 継承より委譲

---

## 発端

[オブジェクト指向は継承で多態するプログラミング](https://nowokay.hatenablog.com/entry/2022/08/25/152904)  
Twitterか何かでこの記事にめぐりあった。  
継承が非推奨になったとか書かれていて、では代わりに何をすべきなのかを調べた。  

---

## 引用  

>継承するかどうか、というのは、すべてのフィールドとメソッドを継承するか、あるいは、継承しないか、の二択となり、特定のメソッドだけを継承したい、という場面や、特定のメソッドはあるものから、別のメソッドは別のものから、それぞれ継承したい、という場面には対応ができないため、少しコードが大きくなるだけで非常にコードを組むことが難しくなります。  
>
>**メソッドの付け加えが自由にできないという制限があることが、継承の問題点だと思います**。  
>
>継承先を改良していると継承元を直す方が自然という場面になったとしても継承元を改良するのは、他の継承先への影響を考えると非常に大変となったりして、あらゆる派生した問題を引き起こしてしまいます。  
>
>なので、継承より委譲というやり方の方が好まれたりしています。  

<!--  -->
>過度な継承は、全く意味がわからなくなります。  
たとえば、よく生物＞ヒトのような単純例が本とかで継承の説明にでますが、ヒトを生物学的に表したものを継承によって表現しようとしたとすると、  
>
>真核生物＞ 動物界＞脊索動物門＞哺乳綱＞サル目＞ヒト科＞ヒト属＞ホモ・サピエンス  
>
>というような継承を作ってしまうことになります。  
これではもうなんだかわからないですよね。。  
これはとんでもなく悪い例ですが、**思想としてはいいものだったかもしれないけど実際にはあつかえないもの**になってしまうのが、大きな問題です。  

[オブジェクト指向の問題点の一つとして継承が挙げられるそうですが、継承の何が問題なのでしょうか？](https://jp.quora.com/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%81%AE%E5%95%8F%E9%A1%8C%E7%82%B9%E3%81%AE%E4%B8%80%E3%81%A4%E3%81%A8%E3%81%97%E3%81%A6%E7%B6%99%E6%89%BF%E3%81%8C%E6%8C%99%E3%81%92)  

---

## 良い継承・悪い継承

良い継承

- is-a関係が成り立つ継承  
  - 「電気自動車は、車である」のような関係が成り立つもの  
  - 子には親と同じ役割が期待される場合が成り立つもの  

悪い継承  

- メソッド共有・メンバ変数の共有のための継承→処理の共通化のための継承  
- 機能追加・機能変更のための継承  

共通して使う処理だから基底クラスに定義して継承して使おうってのは死ぬ。  
そうするならトレイトとかインターフェイスをかますべき。  
たいていの継承問題はこの問題を端に発生しているのではなかろうか。  

[君の継承の使い方は間違っている](https://qiita.com/tonluqclml/items/c0110098722763caa556)  
[継承と委譲の使い分けと、インターフェースの重要性について](https://ikenox.info/blog/inheritance-and-delegation-and-interface/)  

---

## 良い継承例

---

## 委譲例

委譲のデメリット  

個人的に感じる事として、他人がどこに共通化の処理を書いたのか把握しきれなくなってしまうことだろうか。  

委譲をするってことは、処理を共通化したいってことだから、より上位の階層に共通化したクラスを定義しているはず。  
この時、コミュニケーションがうまく取れていなければ、その存在を知らずに同じような処理を別のところに定義してしまうかもしれない。  
現状でもそれっぽいことは発生しているからな。  

---

## Javaによる委譲によるクラス継承とAdapterパターン例

[Javaによる委譲によるクラス継承とAdapterパターン例](https://tomosoft.jp/design/?p=3444)

---

## 参考リンク

[オブジェクト指向は継承で多態するプログラミング](https://nowokay.hatenablog.com/entry/2022/08/25/152904)  
[オブジェクト指向の問題点の一つとして継承が挙げられるそうですが、継承の何が問題なのでしょうか？](https://jp.quora.com/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%81%AE%E5%95%8F%E9%A1%8C%E7%82%B9%E3%81%AE%E4%B8%80%E3%81%A4%E3%81%A8%E3%81%97%E3%81%A6%E7%B6%99%E6%89%BF%E3%81%8C%E6%8C%99%E3%81%92)  
[Javaによる委譲によるクラス継承とAdapterパターン例](https://tomosoft.jp/design/?p=3444)  
[君の継承の使い方は間違っている](https://qiita.com/tonluqclml/items/c0110098722763caa556)  
[継承と委譲の使い分けと、インターフェースの重要性について](https://ikenox.info/blog/inheritance-and-delegation-and-interface/)  
[逆転の発想でオブジェクト指向の「継承」を使いこなす](https://www.ocean-ap.co.jp/column/?p=4365)  
