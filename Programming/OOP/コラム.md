# オブジェクト指向コラム

---

## オブジェクト指向は禁止すべき

クラスは単にユーザー定義型であり、継承は部分型と差分プログラミングを実現する仕組みだととらえるのがいい。  
オブジェクトがメッセージを送りあうとかメルヘンの世界には入らず、機能だけ考えるのがいい。  

コードの基準としても機能的なものをまず考えたほうがいい。  
一番大事な基準は、変数の数だと思う。  
プログラムは、引数やフィールドも含めて、変数の数が少ないほうがえらい。  
ただしここで、再代入のない、状態変更もないローカル変数はカウントしない。  
再代入や状態変更がない変数を除くと、残る変数は状態を管理するものになる。  
プログラムにおいて、管理する状態が少なければ少ないほどえらい。  
残りの指標はあとでついてくる。  
必然的にコードの重複も減り長さも短くなる。  
コードの複雑さも減る。  

ここで、変数の数やコードの長さに大差ない、数とおりの書き方があって迷ったときに初めて、責務や凝集度のような指標でコードの指針を選ぶ。  
つまり、「責務としてはこっちだけど、コードが単純になるからこのコード」は許されるけど「コードは複雑になるけど、責務としてはこのクラスに書くべきだからこのコード」というのはほとんどの場合よくないコードになる。  

そのように、複雑度を下げることを指標としてプログラムを書いていると、「オブジェクト指向する」という感覚にはならない。  
単にプログラム言語と向き合うだけになる。  
ただ、ここに書いているようなプログラムへのストイックな向き合い方は、プログラムに不慣れな人には難しい。  
責務や粒度のようなファンタジックな指標のほうが、なじみやすいと思う。  
けれど、そのようにプログラムに不慣れな人にファンタジックな指標を与えても、ファンタジーあふれた夢の城のような無駄の多いプログラムができるだけだ。  

プログラムに慣れた人はオブジェクト指向する必要がなく、プログラムに不慣れな人がオブジェクト指向すると全力で迷路を構築してしまう。  
かくして、オブジェクト指向は禁止するべき、という結論になる。  

オブジェクト指向できていますか？  
「理想的なオブジェクト指向の世界とは、小さな大量のオブジェクトがお互いメッセージを送りながら協調し複雑なシステムを構築する。各クラスは、１つの機能に集中し、最小限のインターフェースで構成されています。」  
→  
とてもすばらしい世界だけど、プログラム組むときには忘れたほうがいい。  
オブジェクト指向迷路ができるだけだ。  

[オブジェクト指向は禁止するべき](https://nowokay.hatenablog.com/entry/20140718/1405691217)  
