# アンチパターン

---

## アンチパターン (anti-pattern)

- デザインパターン : やったほうがいいことまとめ  
- アンチパターン : やらないほうがいいことまとめ  

>システム開発とかにおける「これは悪い意味で定番だよね」な内容をまとめたもの。  
「あ～、それって一見すると良く見えるかもしれないけどさ～。それをやると、まず間違いなく悪い結果になるんだよね～。でも、よくやっちゃうよね～」なやり方を何となくパターン化してまとめたもの  
[分かりそう](https://wa3.i-3-i.info/word19389.html)  

<!--  -->
>デザインパターンはアンチパターンの反対語。  
設計における「経験豊富な人だったら、こうするだろうね」なノウハウをまとめた定石集。  
[wiki_アンチパターン](https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%B3%E3%83%81%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3)

---

## 関数

・関数には1つのことをさせる  
・関数は小さく作る  

---

## フラグ引数

ssdさんに説明する時、なぜだめなのか？をうまく説明できなかったのでまとめ。  
大切なのは以下の2つに感じた。  

・関数は1つのことをすべきという原則を破ることになるから  
→フラグによって処理を分岐するということはTとFの2つの場合の処理を内包することになる。  
・コードリーディング中に、フラグがどちらの状態か常に意識していなければならないから。  

``` txt:クリーンコード、フラグ引数
フラグ引数は汚い方法です。関数にbooleanを渡すのはよくない習慣です。
これは、直ちにメソッドの※シグネチャをわかりにくくします。
この関数は2つ以上のことをしています。フラグがTrueの時に1つ、そしてfalseの時にもう一つです。
マウスカーソルを上に持ってくれば、引数の内容が表示されるのでいくらかは助けになりますが、十分とは言えません。
2つのメソッドに分離するべきなのです。

※シグネチャー : プログラミングの世界では、メソッド名、パラメータの型、数、順序、戻り値の型等で構成された、メソッドを識別するための情報という意味があります  
```

[安易にフラグ変数を利用すべきでない３つの理由]<https://www.deep-rain.com/programming/program/747>  

[コーディングのアンチパターンを自分なりにまとめてみた]<https://koduki.hatenablog.com/entry/2012/04/16/082356>  

``` txt
神のメソッド
あらゆる処理が可能な神の如きメソッドを作るアンチパターンです。
また、多くの場合、神は太っています。
execとかrunとかmainという名前には要注意です。
フラグで制御し始めたら危険信号。システムの構成上どうしても引数の内容で処理内容を選択したいときは、ハンドリングだけを対象メソッドにさせて具体的な処理は別なメソッドにしましょう。
StrategyパターンとかCommandパターンとかが解決の糸口になることもあります。
```

## なぜフラグ引数を渡してはいけないのか

幹事対応、代表者制御の時に実感したのでまとめたいと思ったんだった。

---

## 引き数は不変

でないと引き数が変更されるタイミングによって挙動が変わりかねない。  
不変である前提があるからこそ、一貫した処理の流れを構築することができるし、余計な判定も必要なくなる。  

---

## if (true) return; , if (true) hoge(); としてはいけない理由

①2行に変更するとき漏れが生じる  
②returnを見落としがちになる。  
③条件が長いと後ろの文章が見えなくなる。  
