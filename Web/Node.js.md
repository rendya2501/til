# Node.js

全面的にこの記事を参考にして自分なりにまとめ直した。  
[Node.jsとはなにか？なぜみんな使っているのか？](https://qiita.com/non_cal/items/a8fee0b7ad96e67713eb)  

---

## Node.jsとは？

JavaScript実行環境。  
JavaScriptをパソコン上でも使えるようにしたもの。  

ざっくり言えばそういうことだが、もっとよく理解するためにJavaScriptの前提を知る必要がある。  

---

## Node.jsをもっとよく理解するために

- JavaScriptは「ブラウザ上」で動作するプログラミング言語。  
- PythonやRubyのような一般的なプログラミング言語は通常「OS上」で動作する。  
- このことが生み出す違いは、OSの機能にアクセスできるかどうか。  
- OSの機能とはファイルの読み書きや、ネットワーク通信など。  
- OS上で動作するアプリケーション（PythonやRubyなどを含む）ではこれらの機能を扱うことができる。  
- ブラウザ上で動作するプログラム（JavaScript）がOSの機能へアクセスできてしまうとユーザーにとっては嬉しくない。  
- あるサイトにアクセスしただけで勝手にパソコン上のファイルを読み書きされたり、パソコン上のファイルを一部消されたりする可能性があるため  
- そういうわけで、ブラウザ上で動作するJavaScriptはOSの機能にアクセスできないようになっている。  
- しかし、OSの機能へ全くアクセスができないのでは些か不便なので、ブラウザが限定的にOSの機能へのアクセスを仲介してくれる。  
- ダイアログで許可を選択するタイプのアレがそう。  
- そんな本来ブラウザ上という制限された環境でしか動かせなかったJavaScriptをPythonやRubyのようにパソコン上で動かせるようにしてくれたのが「Node.js」  

---

## npm(Node Package Manager)

Node.jsのパッケージ管理ツール。  

VisualStudioにおけるnuget、PHPにおけるcomposerみたいなもの。  

Node.jsに置けるパッケージにはPromiseやasync等がある模様。  
Promiseってあれってパッケージだったのか・・・。  

---

## パッケージとは？

実行プログラム、設定ファイル、ドキュメント等を1つのファイルにまとめた物。  
ライブラリやフレームワークのこと。(VueやReact, webpack, jQueryなどのこと)  

---

## パッケージ管理とは？

パッケージのインストールやアンインストール、アップデート作業において、どのようなパッケージがどこにインストールされているかを管理したり、パッケージ間の競合を回避したりする仕組み。  
それを提供する仕組みがパッケージ管理システム。  

---

## なぜNode.jsがここまで使われるのか？

- Node.jsによって枷を外されたJavaScriptは色々なことができるようになったから。  
- 色々なことをするためにはNode.jsを使って便利なパッケージをインストールする必要があるから。  

1. 新しい仕様のJavaScriptまたはTypeScriptでクライアントサイドのプログラムを書くため  
2. Webアプリケーションを作るため  
3. モバイル/デスクトップ用のアプリケーションを作るため  
4. 本当に色々  

---

## 1. 新しい仕様のJavaScriptまたはTypeScriptでクライアントサイドのプログラムを書くため

1. JavaScriptはどんどん新しい機能が増えている。  
2. しかし、既存のブラウザがその仕様に追いついてこれないという問題が発生する。
3. これを解決するために登場したのが「新しい仕様で書いたJavaScriptファイル」を機械的に「旧仕様（ES5）のJavaScriptファイル」に変換してしまう手法。  
4. この変換を行うツール（トランスコンパイラ）の現在の主流がBabelであり、それを動かすための環境として現在よく選ばれているのがNode.js。  

---

## 2. Webアプリケーションを作るため

Ruby + RailsやPython + Djangoなどで作るようなWebアプリケーションをNode.jsで作ることも可能。  

元々Node.jsは大量の同時接続をさばけるようなネットワークアプリケーションを構築することを目的として設計されているため、本来的にはNode.jsはWebサーバとしての役割がメイン。  
Webサーバとしての機能を持ち、効率的に処理できるようになっている模様。  

ApacheやnginxのようなWebサーバの代わりにNode.jsが直接HTTPリクエストを受け取り、処理できるが、Node.jsのみだとWebサーバとしては少し機能が足りないので、Apacheやnginxをリバースプロキシとして置く構成が多い模様。  

``` txt : 対応表
実行環境 | 言語       | Webフレームワーク
-------------------------------------------
Ruby     | Ruby       | Ruby on Railsなど
Python   | Python     | Djangoなど
Node.js  | JavaScript | Expressなど
```

---

## 3. モバイル/デスクトップ用のアプリケーションを作るため

Node.jsではモバイルアプリケーションやデスクトップアプリケーションの開発ができる。  
それらフレームワークを使うためにNode.jsが必要な模様。  

- モバイルアプリケーション : React Native  
- デスクトップアプリケーション : Electron  

---

## 4. その他

- ウェブサイトのアセットをバンドル（webpack）するためにNode.jsを使ったり、  
- SassをCSSに変換（node-sass）するためにNode.jsを使ったり、  
- テストツール（Jest）やコード検証ツール（ESLint）を使うためにNode.jsを使ったり、  
- 開発用の簡易Webサーバ（webpack-dev-server）をローカルで立てるためにNode.jsを使ったり、  
- 静的サイトをビルド（Gatsby）するためにNode.jsを使ったり  

Node.jsは様々な用途で使われている。  
