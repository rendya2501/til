# git-flow

## なぜGitのブランチを分けるのか

master,relase,developそれぞれの役割とは？  
なんとなくやってただけなのでまとめる。  

とりあえず、git-flowと呼ばれるルールに従った場合のブランチ名らしい。  
master,develop,feature,release,hotfixが主たるブランチ。  
今の開発環境と随分違うところを見れば、基本から逸脱してるのがわかるね。  

[【Git】git-flowを知ろう！　利用時のルールについて](https://cloudsmith.co.jp/blog/efficient/2020/08/1534208.html)  
[git-flowで用いるブランチまとめ](https://qiita.com/hatt0519/items/23ef0866f4abacce7296)  
更に知りたかったら「git flow」で調べればごまんと出てくる。  

## git-flow概要

Gitにおけるリポジトリの分岐モデル。ルールの事を指す。  
それぞれのブランチを明確に定義し、複数人での開発時にそれぞれが好き勝手にブランチを作成し混乱することを防ぐ。  

- メインブランチ  
  開発のコアとなるブランチ。  
  - master  
  - develop  
- サポートブランチ  
  機能の追跡、製品リリースの準備、製品に起きた問題をすばやく修正すること、などを容易にするためのブランチ。  
  - feature  
  - hotfix  
  - release  

## git-flowのメリット

- 本番リリースのリポジトリと開発中、修正中のリポジトリを明確に区別することで本番に紛れ込むことを防ぐ  
- 開発、修正毎にリポジトリを作成でき、リリースタイミングに関わらず並行して作業が可能  
- リリース後の緊急対応が開発、修正と独立して対応可能（昔、たまに緊急対応リリース時に開発中の別機能が紛れ込む怪現象が・・・）  
- 履歴によりリリース内容を後から追跡可能  

## master

プロダクトとしてリリースする用のブランチ。  

リリースしたらタグ付けする。  
製品として出荷可能な状態であり、アプリケーションが安定して動く状態にする必要がある。  

※このブランチ上での作業は行わない  

## develop

開発用ブランチ。  

コードが安定し、リリース準備ができたらreleaseへマージする。  
次のリリースのための最新の開発作業の変更が反映されている状態。  
このブランチが常に最新。  

※このブランチ上での作業は行わない

## feature

分岐元：develop  
マージ先：develop  

developからブランチを切り、新機能の開発を行うのに用いる。  

ブランチ名はfeature/news_feedなど、実装する機能をfeature/の後ろに書くなどすればいい。  
最終的にはdevelopにmergeする。  
この時、--no-ffオプションを付けてmergeすると、その機能実装に使ったコミットがまとまり、差分の管理が楽になる。  

## hotfix

分岐元： master  
マージ先： develop と master  

リリース後の緊急対応（クリティカルなバグフィックスなど）用。  

masterから分岐し、masterにマージすると共にdevelopにマージする。  

## release

分岐元： develop  
マージ先： develop と master  

プロダクトリリースの準備用。品質保証(QA)用ブランチ。  

release/1.0といった感じで切ればいい。  
リリース予定の機能やバグフィックスが反映された状態のdevelopから分岐する。  
この間に新機能に不具合が見つかった場合は、work/fix_bugなど修正用のブランチをここから切り、修正が終わったらこのブランチにmergeする。  
デバッグが終わるまでdevelopにmergeすることは許されない。  
リリース準備が整ったら、masterにマージすると共にdevelopにマージする。  
