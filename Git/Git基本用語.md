# Git基本用語

## 早見表

``` txt
用語               | 意味
-------------------+-----------------------------------------
リポジトリ         | 履歴管理を行う場所
ローカルリポジトリ | 自分のPCに設置したリポジトリ
リモートリポジトリ | リモート上のリポジトリ
ベアリポジトリ     | ワークツリーを持たないリポジトリ
ワークツリー       | 履歴管理を行うファイルの保存場所
インデックス       | コミットしたいファイルを登録するところ 
コミット           | インデックスに登録してある変更対象をローカルリポジトリに反映
リセット           | コミット前の変更をローカルリポジトリの状態へ戻す
ステージ           | ワークツリーからコミットしたいファイルをインデックスに登録
ハンク             | 変更した範囲
ヘッド             | 作業対象となっているブランチ、コミット
ブランチ           | 履歴管理を分岐させたもの。 複数の履歴を並列管理
チェックアウト     | ヘッドを切り替える
プッシュ           | ローカルリポジトリの変更をリモートリポジトリに反映
プル               | リモートリポジトリの変更をローカルリポジトリに反映
マージ             | 異なるブランチの変更を反映(相互の変更履歴が残る)
リベース           | 異なるブランチの変更を反映 (変更履歴が片方に集約)
コンフリクト       | マージ対象の2ファイルの変更箇所が同じで自動でマージできない
フォーク           | リモートリポジトリをコピーしてリモートリポジトリを作成
クローン           | リモートリポジトリをコピーしてローカルリポジトリを作成
プルリクエスト     | フォークしたリポジトリでの変更をフォーク元のリポジトリへ反映するよう依頼
.gitignore         | 履歴管理の対象外のファイルを登録するファイル
```

[Gitの基本用語](https://twitter.com/miyashin_prg/status/1531206281205362688?t=QysDBck1xTIq_so2gw9Y3w&s=09)

---

## リポジトリ

[ローカルリポジトリとリモートリポジトリについて〜SourceTreeでGitを使う](https://itstudio.co/2016/07/22/6014/)  

ファイルやディレクトリの履歴を管理する場所のこと。  
※リポジトリ : 貯蔵庫  

### リモートリポジトリ

専用のサーバに配置して複数人で共有するためのリポジトリです。

### ローカルリポジトリ

ユーザーがローカルマシン上で作業するために利用するリポジトリです。  
基本的にそのユーザーはこの領域にて変更履歴を管理しつつ、作業を行います。  

### originとは？

[Gitでよく使う「origin」って何？わかりやすく説明します](https://reasonable-code.com/git-origin/)  

リモートリポジトリのアクセス先に対してGitがデフォルトでつける名前です。  
リモートリポジトリのアクセス先（例. <https://github.com/donchan922/rails-board.git>）がoriginという名前で設定されていることがわかります。  

→  
つまり、長ったらしいURLに対するデフォルトのエイリアスがoriginという名のリモート名ということ。  

[master以外のブランチにgit pullしたい](https://teratail.com/questions/325508)  
>originっていうのはローカルで任意に名前をつけたリモートリポジトリのURLです。  

ただのエイリアスなので、URLで直接指定してプッシュすることも可能  
`git push https://github.com/donchan922/rails-board.git master`

### リモートリポジトリってたいていoriginだけど、origin以外にもリポジトリって作れるの？  

余裕で作れる。  
originってのは、リモートリポジトリの別名でしかないので、つけようと思えば好きなように作れる。  

ローカルリポジトリでoriginが使われている場合、新規でリポジトリを追加する場合はorigin以外を指定しないといけない。  
1つのローカル環境で複数のリポジトリを管理しないといけない場合、必然的にorigin以外の名前をつけることになるだろう。  

ローカルでGitプロジェクトを作成するときに、git initしますよね。  
そのあとに以下のようなコマンドでリモートリポジトリの設定を行っているはずです。  

`$ git remote add origin https://github.com/donchan922/rails-board.git`  

これに対してさらにこのようなコマンドを実行した場合  

`$ git remote add hogehoge https://github.com/donchan922/rails-board.git`  

git push hogehoge HEAD とやるだけで同じリモート先のサーバーに対してプッシュされるというわけ。  

---

## Issues

GitHubの課題管理機能。  
プロジェクトやソースコードの課題を管理するための機能です。  

- Github repository ごとに issue を作成・管理できる。  
- issue ではその repository が見られれば誰でも発言でき、議論・報告・連絡・提案などもろもろが可能。  
- issue ごとにタイトルが必須なので、通常タイトル絡みのことが話される。  
- ソースコードやPull Request、変更履歴といったものを、簡単に課題と紐付けて管理していくことが可能  
  →情報が一箇所に集まることで、ソースコードの変更意図や現在の問題が、より明瞭になる。  

※issue : 〔議論すべき〕重要な話題［問題］、問題点、論点、争点、〔問題の〕核心、急所  
※プロジェクトの課題管理といえば、古くから使われているチケット型のRedmineや、最近ではPivotal Tracker、JIRAといったサービスも注目を集めています。  

[チーム開発を変える「GitHub」とは？〜Issuesの使い方〜【連載第3回】](https://seleck.cc/647)  
[GitHubのissueを活用した個人アプリの開発手順を書いてみた](https://qiita.com/tkmd35/items/9612c03dc60b1c516969)  
[GitHubで課題を管理する便利機能Issueとその作成方法](https://tonari-it.com/github-issue/)  
[Githubでissue管理して開発しよう](https://qiita.com/fukubaka0825/items/c7710b4e87d478c8ba3b)  

### Issueの使用の手順

1. 課題が発生したときにはIssueを作成  
2. Issue内でコメントをして課題についてやり取りしながら、コードを修正  
3. 解決したらIssueを閉じる  

課題が出てきたらIssueを作成して、それをすべてクローズすることを目指して、プロジェクトを推進していくというわけです。  

---

## プルリクエスト

コードの変更を他の開発者に通知する。  
誰がどのブランチに対してリクエストしたのか履歴に残るので、追跡や確認が楽に行える。  

>プルリクエストとは、分散バージョン管理システム（VCS）の機能の一つで、コードなどを追加・修正した際、本体への反映を他の開発者に依頼する機能。  
>「変更を本人以外がレビューしてから反映させる」という手順を容易に実現することができる。  
>[e-words](https://e-words.jp/w/%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88.html)  

<!--  -->
>プルリクエストは次のような機能を提供する。  
>
>- 機能追加や改修など、作業内容をレビュー・マージ担当者やその他関係者に通知します。  
>- ソースコードの変更箇所をわかりやすく表示します。  
>- ソースコードに関するコミュニケーションの場を提供します。  
>
>※ プルリクエストは、Git自身の機能ではなくGitHubが最初に提供した機能。  
>※ 単に`PR`とも言うらしい。  
>[サル先生のGit入門](https://backlog.com/ja/git-tutorial/pull-request/01/)  

---

## フォーク

他人のリポジトリを自分のアカウントのリモートリポジトリにコピーすること  

- オリジナルのリポジトリへの貢献が前提  
- forkした場合そのリポジトリを所有する開発者に通知される  
- リポジトリをフォークすることにより、オリジナルのプロジェクトに影響を与えることなく変更を自由にテストできる  
- forkはOSSなどの自分以外のリポジトリに対して、何らかの追加機能の実装、バグ改修を行いたい場合使用するもの  

[リポジトリのcloneとforkの違い](https://qiita.com/matsubox/items/09904e4c51e6bc267990)  
[GitHubのforkはリポジトリの複製 フォークの手順と、クローン、ブランチとの違い](https://style.potepan.com/articles/31067.html)  
[GitHub Docs](https://docs.github.com/ja/get-started/quickstart/fork-a-repo)  

### フォークのワークフロー

OSS等、他人のリポジトリをフォークして開発を反映するまでの流れ。  

![aa](https://camo.qiitausercontent.com/8a4d434128ae84f80c2d532f1de43e5fcf7b8c0f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3238343536372f63363136326566332d616232322d373036322d643966332d3730376439393961316132612e706e67)

1. リポジトリAをfork  
2. forkしたリポジトリBをローカルにclone  
3. cloneしたリポジトリCで開発し、リポジトリBに反映  
4. リポジトリAの管理者にPull Requestを送信  

### GitHubでフォークする手順

GitHubでリポジトリをフォークするには、対象のプロジェクトページを開き、画面右上のForkボタンをクリックする。  

ボタンの右にある数字はForkされた数。  
fork自体はGitHub内で完結するため、10秒～数十秒程度で完了する。  
forkはリポジトリ内のブランチも複製する。  
forkしたリポジトリに対してはリポジトリオーナー権限が付与されるため、リポジトリを自由に変更できる。  
オリジナルリポジトリで変更された内容を同期して取り込むことも可能。  

---

## クローン

リモートリポジトリをローカルリポジトリに複製すること  
単に任意のリポジトリをローカルに複製する  

---

## アップストリームブランチ

>「上流ブランチ（Upstream branch）」とは、あるローカルブランチが、履歴を追跡するように設定したリモートブランチの事を指します。  
[www-creators](https://www-creators.com/archives/4931)  

<!--  -->
>Upstream Branch を設定するとどうなるか  
>
>あるローカルブランチがあるとして、そのブランチでの操作ターゲットを省略した時に暗黙的に対象となるようなリモートブランチを設定できます。  
>[Upstream Branch を設定して push や pull 時の対象を省略する](https://nju33.com/notes/git/articles/Upstream%20Branch%20%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%20push%20%E3%82%84%20pull%20%E6%99%82%E3%81%AE%E5%AF%BE%E8%B1%A1%E3%82%92%E7%9C%81%E7%95%A5%E3%81%99%E3%82%8B#Upstream_Branch_%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6_push_%E3%82%84_pull_%E6%99%82%E3%81%AE%E5%AF%BE%E8%B1%A1%E3%82%92%E7%9C%81%E7%95%A5%E3%81%99%E3%82%8B)  

``` bash
git branch -vv

# 現在の各ブランチの Upstream Branch 設定状況を確認する  
```

``` bash
git branch -u remote-a/master  

# ローカルの master ブランチのデフォルトリモート先を remote-a/master に設定  
# `git branch --set-upstream-to remote-a/master`のエイリアスを使ったもの  
```

このように設定すると、次から`git push`だけで`git push remote-a master`の意味にしてくれる。  

---

## 参考集

[いまさらだけどGitを基本から分かりやすくまとめてみた](https://qiita.com/gold-kou/items/7f6a3b46e2781b0dd4a0)  
