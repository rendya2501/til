# 後でまとめたいやつら

アプリケーション マニフェスト [application manifest]
アプリケーションおよびそのすべての構成ファイルを記述するファイル。ClickOnce アプリケーションによって使用されます。

---

## GroupByした要素の内、先頭のものだけ取得したい

[selectMany](https://www.urablog.xyz/entry/2018/05/28/070000#SelectMany%E3%82%92%E4%BD%BF%E3%81%86)
[groupby](https://www.urablog.xyz/entry/2018/07/07/070000)
[groupbyして先頭](https://entityframework.net/knowledge-base/3850429/get-the-first-record-of-a-group-in-linq-)
<https://stackoverflow.com/questions/19012986/how-to-get-first-record-in-each-group-using-linq/39932057>

``` C#
// やりたいこと割り勘の伝票IDを取得して、重複を排除して、それが2件以上あれば、別々で割り勘を実行した人がいるという事なので、呼び出せないようにしたい。
// ついでに、誰と誰が別々に割り勘しているのかをアナウンスしたいので、求めた伝票IDを持っている人の中でそれぞれ先頭の人だけを抜き出したい。
// 意外と難しかった。SelectManyとGroupByを組み合わせてうまい事出来たので、まとめる。
var count = SettlementDetailList
   // 割り勘の伝票IDを取得
   .Select(s => s.SlipList.FirstOrDefault(w => w.SlipType == SlipType.DutchTreat)?.SlipID)
   // 同じ伝票IDはカウントしない。
   .Distinct()
   // nullを除いた結果が2以上なら、別々の割り勘伝票の人をセットしているのでダメ。
   .Count(c => c != null);

if (count >= 2)
{
    MessageDialogUtil.ShowWarning(Messenger,"dame");
    return;
};

// 組み合わせ始め。何がしたいかわからないね。
IEnumerable<string> targetPlayerList = SettlementDetailList
    .SelectMany(
        p => p.SlipList,
        (s, slip) => new { s.AccountNo, s.ReservationPlayerName, slip }
    )
    .Where(w => dutchTreatSlipIDList.Contains(w.slip.SlipID))
    .Select(s => $"【{s.AccountNo}】【{s.ReservationPlayerName}】様")
    .ToList();


// とりあえず完成形。
// IDだけは別で抜き出さないといけないのがちょっとあれだけど、頑張ればいけそうな気もする。
IEnumerable<string> dutchTreatSlipIDList = SettlementDetailList
    // 割り勘の伝票IDを取得
    .Select(s => s.SlipList.FirstOrDefault(w => w.SlipType == SlipType.DutchTreat)?.SlipID)
    .Distinct()
    .Where(w => w != null)
    .ToList();
if (dutchTreatSlipIDList.Count() >= 2)
{
    IEnumerable<string> targetPlayerList = SettlementDetailList
        .SelectMany(
            p => p.SlipList,
            (s, slip) => (s.AccountNo, s.ReservationPlayerName, slip.SlipID)
        )
        .Where(w => dutchTreatSlipIDList.Contains(w.SlipID))
        .GroupBy(
            p => p.SlipID,
            // SlipIDでグループ化したうち、先頭のデータのみ取得する
            (k, v) => (key: k, value: v.FirstOrDefault())
        )
        .Select(s => $"【{s.value.AccountNo}】【{s.value.ReservationPlayerName}】様")
        .ToList();
    var msg = string.Join(" と ", targetPlayerList) + " はそれぞれで既に割り勘済みのため、割り勘を開くことができません。";
    MessageDialogUtil.ShowWarning(Messenger, msg);
    return;
}
```


``` C#
// この記述が許されるのはC#9から。
bool? aa = true ? false : null;
// C#9以前はこのように書くしかない。
var aa = (bool?)true ? false : null;
```

---

## 雑記

・俺が仕様書メモとしてまとめてる内容は全て開発フォルダの仕様書フォルダに乗っけておけばいいのでは？
メモ書き程度のやつは上に持っていくのはどうかな。

・持ち物リスト確認
・前回の試験の時のアレ確認
→前回はバナナを持って行った模様。

・7時起床、8時出発、途中ガソリンを入れる。


・今を生きているはずなんだが、気が付けば暗くなっている。
・今日はまず風呂に入るぞ。すぐに寝れる準備と明日の準備を整えてから復習なりなんなりをする。
さすがに寝2日連続で6時間以下しか寝てないのはやばい。

・イヤーマフは少し取り回しがあれだけど100円で目下の課題が解決したのはでかい。それがすべてだ。

・試験が終わったらさすがに数日は休むぞ。キリがいいから11月までの休息とするか。本当の意味での休みだ。
やりたいことをやる。他の勉強をしたい。そのあとすぐに102かなー。

・会社にいる時間で基数部分をちょっと復習しておきたい。

・GORAの調査したが、うまいこと行ったので気持ちがよかった。





・朝のうちに写真の整理
・昼休みはデスクマットの受け取り
・EDINETとかホットアイルをまとめたい。応用の時のあれとか、基本のあれとかまとめる。


とりあえず、スマホの画像の整理は終わった。
もう少しいい運用方法を考えないといけないと思った。
レシートは面倒臭いので、いつもの買い物以外で発生したレシートだけ保存するようにします。
最も肝心なのがどうやって保存するか、という問題。

グーグルフォトだったときは、アルバムに入れれば非表示でも見れたから気にする必要なかったけど、Amazonフォトはそこのところが駄目。
仕方なく、ドライブ作ってるけど、いちいち開いてあれこれやるのが面倒くさい。
そもそもとらなければいいだけの話ではあるが。



福田さんがすごいのはアーキテクチャの知識があることだな。
原因の深い部分まで特定することができる力がある。
それにプログラムもかけるから鬼に金棒ってわけか。
ただ、フリーランスとしては生かしにくい知識だな。
企業にいて初めて真価を発揮するタイプの知識だから、それが合致している今の状態ということだろう。



しかし、マジで鼻くそほじくっててもできるような問題ばかりだったな。
過去問よりもさらに簡単になってた。
試験内容が分からなくなった分、難易度下げた感じかな。
たしかに、こんな難易度なら転職では全然評価されないだろうなって思った。

今更、登竜門をくぐった。まぁいいさ。
やることやったんだし、苦手なJavaやアルゴリズムもある程度克服したんだから。

LIKE句の問題も直近で出たな。



久しぶりの旭川はなんだか活気がなかった気がします。
昔に比べてきれいにはなってますが、なんだかしぼんだ感じもしました。
寂しいですね。



