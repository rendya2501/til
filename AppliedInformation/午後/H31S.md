# 平成31年春季

---

## ネットワーク 無線LANの導入

この問題のおかげでチャネルとリレーエージェントを知ったんだ。  
何回もやったおかげで普通にわかるようになってきた。  

``` txt 20分 10/11
サ
イ
キ
エ
オ

周波数が同じにならないようにずらして設定する 0%
→4台のAPに、それぞれ異なる周波数チャネルを設定する
ア
a
b.c,d

L3SW
ルータ2

---

デフォルトゲートウェイはIPレベルで通信できる機器じゃないとだめ。
L2SWと書いてあったので、残りの選択肢はルーター2しかない。
```

---

## データベース 薬剤管理システムの再構築

まぁ、及第点ってところじゃないですかね。  
わかるところはわかったけどって感じ。  

でも、昔に解いた時はとても難しく感じたので、それから比べたら意味を理解して解けるようになったと思う。  
最近、デッドロックや移行クエリのおかげもあって、それなりにできるようになってきたように感じる。  

しかし毎回、回答書く必要あるかなぁ？  
なんか段々面倒臭くなってきた。  
まとめる事が目的になりつつある。  
重要なのはそこではないような？  

うん。毎回書くの怠いし、点数見れれば十分だし、後はどう考えてそれを入れたのか書けば十分じゃないか？  

``` txt : 解説 29分 9/11
## 2
[1]処方箋 × 処方箋明細

→
処方箋レコードは削除しないと書いてあったので、ここらへんだと思っていたが、よくよく考えれば、明細側をINSERTしたりDELETEすべきだよな。

→
医師が、(4)処方箋の登録（発行前）を行うと、処方箋テーブルと処方箋明細テーブルに処方しようとしている薬剤が登録されます。
その後〔薬剤併用チェック処理〕により、"併用禁忌"または"併用注意"となる組合せが出力され、医師はその情報を参考にして処方する薬剤を見直します。
見直しでは、処方する薬剤の種類を変えたり、追加したり、取り止めたりといったことが行われ、
その際に処方箋明細テーブルから登録済の薬剤を削除したり、新たに薬剤を追加したりといった操作を行うことになります。

つまり、(5)薬剤チェックの段階では、処方箋明細テーブルに対してレコードの削除や作成が行われると考えられます。したがって、cには「処方箋明細」が当てはまります。
なお、削除の結果、処方箋明細が0件になる場合がありますが、その場合でも「処方箋レコードは削除しない」としているので、処方箋テーブルは操作対象外となります。


## 4
k: <= CURRENT_DATE × IS NULL
表2で思いっきりnullが入るように記述されている。
これだけでも割とヒントだった。
で、処方されていないって事ならIS NULLになるわな。

→
kには上記の3つ目の条件で集計対象を絞るための条件式が入ります。
表1・2を見ると、薬剤が処方されたときは、処方箋テーブルの"薬剤処方年月日"列をNULLから（非NULLの日付に）更新することがわかります。
つまり、処方箋テーブルの"薬剤処方年月日"列の値がNULLのレコードは、まだ薬剤が処方されていない状態ということです。

在庫保証の対象となるのは「まだ薬剤が処方されていない」レコードですから、"薬剤処方年月日"列の値がNULLのレコードを選択すれば、該当するレコードを絞り込めます。
よって、条件式には「薬剤処方年月日 IS NULL」を指定するのが適切です。


## コラム
※WITH句
副問合せに名前を付け、それを他のSQL文内で使用できるようにするものです。
「WITH 副問合せ名 AS (クエリ文)：副問合せ名」を記述することにより、ASの直後のクエリ文を何度も記述することなく使い回すことができます。
```

---

## 組み込みシステム 家庭用浴室給湯システム

簡単なほうだったが、最初の認識を微妙にミスったので点数が取れなかった。  
ほぼ正解みたいなものだけど、実際にはそうは行かないだろう。  
計算問題も普通に出来たし、1問を除いて全て正解とみなしても十分だと思うけどな。  

人感センサーと出入りセンサの部分は、出入りセンサーも連続した値の観測を行う記述が後ろにあったので、  
それで勘違いしたのかもしれない。  

出入りセンサでずっと0を観測していても・・・、というか、異常事態を観測するためには3分の観測が必要なので、  
その地点で人感センサーじゃないと機能しない事がわかるな。  

``` txt : 回答 30分 5/9
## 1
[1]
a : 出入り × 人勧
b : 人感 × 出入り
c : いなくなった × 浴室から出た
[2] 3.2


## 2
[1] : ク
[2] : チ


## 3
[1] d : "異常"を受信したとき 0%
→ 連続して361回"未検出"を受信

[2]
e : 在室
f : 未定
```

``` txt : 解説
## 1
[1]
〔a，bについて〕
本問のシステムには人感センサと出入りセンサしか使われていないので、空欄には2つのいずれかが入ります。

センサの出力が1の状態から連続して0となった場合に異常事象と判定されるのは人感センサの方なので、aには人感(センサ)、bには出入り(センサ)が入ります。

∴a＝人感
　b＝出入り

〔cについて〕
人感センサは、人の動きを検出したときは1を、検出しなかったときは0を出力します。人感センサの出力は浴室内に人がいるかどうかにかかわらず行われるので、
出入りセンサがなければ、浴室から出て浴室内に人がいなくなった場合にもセンサの出力が1の状態から連続して0となり、異常事象と判定されてしまいます。
出入りセンサ単体では入室・退室のどちらかを判別できませんが、人感センサとの組み合わせによって浴室から出たことを判定できるようになっています。

本文中では、「人が浴室に入ったのか，浴室から出たのか判別できない」「浴室から出たと判定する」というように、
人が浴室から出るイベントを"浴室から出た"と記載しているため、cには「浴室から出た」が入ります。

∴c＝浴室から出た

[2]
給湯器の仕様を読むと、各指示のデータ長はいずれも3バイトの固定長とあります。
また、リモコンと給湯器を繋ぐシリアルI/Fの通信速度は9,600ビット／秒であるとわかります。
本問では1バイトのデータは10ビットで送信されるとしているため、指示1つ当たりの通信時間は、

　10ビット×3÷9,600ビット＝3.125ミリ秒

本問では「小数点第2位を切り上げて，小数点第1位まで求めよ。」という指示があるため「3.125→3.2ミリ秒」となります。

∴3.2


## 3
[1]
監視タスクが"異常"を通知するのは、人が浴室に入った後、出入りセンサの確定値が1になる前（すなわち退室する前）に、人感センサの出力が連続して3分以上0であったときです。
人感センサの出力は、人検出タスクによって500ミリ秒周期で読み出され、出力1ならば"検出"、出力0ならば"未検出"が監視タスクに通知されることになっています。
監視タスク側では、"未検出"を連続して受信した回数を数えることで3分経過したか否かを判断することとなります。

「3分÷500ミリ秒＝360回」ですから、"未検出"が360回通知されたら異常に遷移すると考えがちですが、最初に0を読みだしたのを1回目とすると、
そこから3分間の経過をカウントする必要があるので3分を経過した時点は360に1を加えた361回目となります。
pm07_7.gif/image-size:455×65

∴d＝連続して361回"未検出"を受信

なるほどね。そこまで読まないとダメだったか。
```

---
