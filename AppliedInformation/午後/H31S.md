# 平成31年春季

---

## 組み込みシステム 家庭用浴室給湯システム

簡単なほうだったが、最初の認識を微妙にミスったので点数が取れなかった。  
ほぼ正解みたいなものだけど、実際にはそうは行かないだろう。  
計算問題も普通に出来たし、1問を除いて全て正解とみなしても十分だと思うけどな。  

人感センサーと出入りセンサの部分は、出入りセンサーも連続した値の観測を行う記述が後ろにあったので、  
それで勘違いしたのかもしれない。  

出入りセンサでずっと0を観測していても・・・、というか、異常事態を観測するためには3分の観測が必要なので、  
その地点で人感センサーじゃないと機能しない事がわかるな。  

``` txt : 回答 30分 5/9
## 1
[1]
a : 出入り × 人勧
b : 人感 × 出入り
c : いなくなった × 浴室から出た
[2] 3.2


## 2
[1] : ク
[2] : チ


## 3
[1] d : "異常"を受信したとき 0%
→ 連続して361回"未検出"を受信

[2]
e : 在室
f : 未定
```

``` txt : 解説
## 1
[1]
〔a，bについて〕
本問のシステムには人感センサと出入りセンサしか使われていないので、空欄には2つのいずれかが入ります。

センサの出力が1の状態から連続して0となった場合に異常事象と判定されるのは人感センサの方なので、aには人感(センサ)、bには出入り(センサ)が入ります。

∴a＝人感
　b＝出入り

〔cについて〕
人感センサは、人の動きを検出したときは1を、検出しなかったときは0を出力します。人感センサの出力は浴室内に人がいるかどうかにかかわらず行われるので、
出入りセンサがなければ、浴室から出て浴室内に人がいなくなった場合にもセンサの出力が1の状態から連続して0となり、異常事象と判定されてしまいます。
出入りセンサ単体では入室・退室のどちらかを判別できませんが、人感センサとの組み合わせによって浴室から出たことを判定できるようになっています。

本文中では、「人が浴室に入ったのか，浴室から出たのか判別できない」「浴室から出たと判定する」というように、
人が浴室から出るイベントを"浴室から出た"と記載しているため、cには「浴室から出た」が入ります。

∴c＝浴室から出た

[2]
給湯器の仕様を読むと、各指示のデータ長はいずれも3バイトの固定長とあります。
また、リモコンと給湯器を繋ぐシリアルI/Fの通信速度は9,600ビット／秒であるとわかります。
本問では1バイトのデータは10ビットで送信されるとしているため、指示1つ当たりの通信時間は、

　10ビット×3÷9,600ビット＝3.125ミリ秒

本問では「小数点第2位を切り上げて，小数点第1位まで求めよ。」という指示があるため「3.125→3.2ミリ秒」となります。

∴3.2


## 3
[1]
監視タスクが"異常"を通知するのは、人が浴室に入った後、出入りセンサの確定値が1になる前（すなわち退室する前）に、人感センサの出力が連続して3分以上0であったときです。
人感センサの出力は、人検出タスクによって500ミリ秒周期で読み出され、出力1ならば"検出"、出力0ならば"未検出"が監視タスクに通知されることになっています。
監視タスク側では、"未検出"を連続して受信した回数を数えることで3分経過したか否かを判断することとなります。

「3分÷500ミリ秒＝360回」ですから、"未検出"が360回通知されたら異常に遷移すると考えがちですが、最初に0を読みだしたのを1回目とすると、
そこから3分間の経過をカウントする必要があるので3分を経過した時点は360に1を加えた361回目となります。
pm07_7.gif/image-size:455×65

∴d＝連続して361回"未検出"を受信

なるほどね。そこまで読まないとダメだったか。
```

---
