# 平成30年春季

---

## セキュリティ

---

## ネットワーク Webシステムの構成変更

この問題でDNSラウンドロビンを知った。  
まぁ、8割出来たからいい方ではないか？  
話は簡単だったので、出来れば正解したかった。  
部分点くらいはもらえるだろうか。  

``` txt : 29分 8/10
ラウンドロビン
IPアドレス
スレーブ

カ
ア
エ

A社WebサイトのURL 100%
他)Webサイト利用時のURL
4
record_data × owner
宛先IPアドレスが直接Webサーバーを指定している通信をブロックする 0%
→WebサイトへのアクセスをWAFサービスだけから許可する

---

あぁ、そうか。
直接アクセスされた場合だけ考えてたけど、WAFからのみ許可して後は不許可にすればいいだけの話か。
```

---

## データベース 備品購買システムの設計と実装

100点！！  
ふぅ――――↑↑気持ちいいいw  
本当にだんだんわかるようになってきた。  
この調子でやっていきたい。  

``` txt : 30分 11/11

## メモ
単純に考えれば、返品区分とか持たせればいいと思うけど、どうだろう。
何か違う気がするな。
あ、よく見たらレコードって書いてある。
フィールドだと思ってたけど、レコードならマイナス数量のレコード一択だな。

## 1
地味にリレーションの問題で苦戦した。
全部正解したからよかったけど、間違えてもおかしくはなかっただろう。

見積もり依頼と見積もりと発注と検収は全て1対1でつながる。
発注は同じ商品を複数の会社に依頼してって事もあり得るので1体多だが、検収はそれらすべてを受け取ったことをチェックするので、1回で済ませるだろうという予想は当たった。
この見積もり、発注、検収業務はやったことがないので、イメージするのに苦労したけど、まぁ、何とかなったか。


## 2
ここも地味にわからなかったが、影響があるテーブルが見積依頼である関係上、見積もり依頼明細しかなかったので、それを書いたら正解だった。
普通に考えてそれしかない思考はシンプルながら地味に威力を発揮する模様。


## 3
SQLの組み立てに関しては特に問題無かった。
hの条件だけ意図がわからなくて悩んだ。
2回も発注番号で絞る意味は内容に思えたが、それしかなかったのでそうしたら正解だった。
解説でも冗長とあったので、俺の違和感は正しかったわけだ。


## 4
同じ納品番号に対して納入数量がマイナスのレコード 100%
→
返品した商品の数量をマイナスの値に設定したレコード

返品した商品の数量はマイナスにするってニュアンスだったらおけか。
```

---

## 組み込みシステム 児童の見守り機能付き防犯ブザー

久しぶりに出来なかった。  
しっかり復習したい。  
やっぱり計算問題がまだ弱い。  
周波数がわかったところで次は16ビットタイマーがどんなものなのか理解する必要がある。  

16bitの下りはあまり関係がなかったか。  
16MHzで32分周なので0.5MHz=50万Hz。  
1秒間に50万回カウントする。  
1秒で50万なので、0.5秒なら25万カウントなわけで、じゃあ0.1秒は？ってなったら5万カウントです。
で、引っ掻けの1カウントで49999というわけか。  
16bitの下りってあんまり関係ないんだな。  
というか、16ビットのタイマーってどういう意味があるんだ？  

なーるほど。わかったぞ。  
16ビットって事は値を65536まで保持することができるわけで、カウンタとしてセットできるのは65536までって事しか言ってないわけだ。  
後は、ダウンカウンタなので、答えの49999カウントを初期値としてセットして、もちろん65536以内なので、普通にセットできるわけで、  
クロック1回につきこのカウントが減少して0ならイベントを発生させるという関係になっている。  
だから16ビットタイマーってのが答えにどこにも乗っていないわけだ。  
てか、組込みシステムやるならマイコンの基礎くらい勉強しておくべきだったな。  
でもこれがわかったのはでかいぞ。  

[第13回 マイコンのタイマって何？ 何ができるの？](https://edn.itmedia.co.jp/edn/articles/1509/25/news014.html)  

``` txt : 回答 30分Over 4/7
## メモ
8:00 : 1
8:05,10,15,20 : 4
8:50 : 1


## 1
[1] 6
[2] 空欄 ×
→静止状態で位置登録を行った後、5分経過する前に移動を検出したとき


## 2
[1] 空白 × 49999
[2] 空白
→消費電力を小さくできるから


## 3
[1]
a : 直ちに位置登録 × 位置登録
b : 登録周期

[2] 登録周期の変更
```

``` txt : 解説
## 1
[1]
設問(1)の条件から、防犯ブザーは下記の時刻に状態遷移しています。
8時00分 静止状態から移動状態へ遷移
8時20分 移動状態から静止状態へ遷移
9時20分まで静止状態のまま
上記の条件を、本文の〔防犯ブザーの仕様〕と突合してみます。

・「静止状態で移動を検出すると，直ちに位置登録を行い，状態を移動状態にする」
→8時00分に位置登録を行った。

・「移動状態では，位置登録の周期を5分にする」
→8時05分、8時10分、8時15分に位置登録を行った。

・「移動状態で，登録周期中に一度も移動を検出しなかったときは， 位置登録を行った後，状態を静止状態にする」
→8時15分の次の登録周期である8時20分までに移動を検出しなかった。
8時20分に位置登録を行った後、静止状態になった。

・「静止状態では，消費電力の低減を図るために登録周期を30分にする」
→静止状態に遷移した30分後の8時50分に位置登録を行った。
8時50分の次の登録周期は9時20分ですので、9時00分までに位置登録は行っていない。

以上から、防犯ブザーが午前8時台に位置登録を行った回数は、8時00分、8時05分、8時10分、8時15分、8時20分、8時50分の合計6回になります。

∴6

[2]
通信圏内で静止状態から移動状態に遷移する際には、登録周期に関係なく必ず位置登録が行われます。
つまり静止状態で位置登録が行われた後、5分以内に移動を検出したときには、5分よりも短い間隔で位置登録が行われることになります。

∴静止状態で位置登録を行った後，5分経過する前に移動を検出したとき



## 2
[2]
・MPUの動作クロックが16MHz
・タイマのカウントクロックはMPUの動作クロックを32分周（1／32）した信号
→
1秒あたりのカウント数 : 16,000,000÷32＝500,000(カウント)

計測したい時間間隔は100ミリ秒ですので、必要なカウント数は以下のように計算できます。

500,000×1／10＝50,000(カウント)

ここで、問題文中に16ビットカウントタイマの動作として「カウンタ値が0になった次のカウントクロックで割込みを発生させる。」（つまり、カウント値が0になってから割込みが発生するまでに追加の1カウントが生じる）と説明されていることに注意します。
もし目的のカウント数が10のときにカウンタ値を10に設定してしまうと、10→9→8→…→0→割込み というように割込みの発生は11カウント後になってしまいます。
このためちょうど50,000カウント（100ミリ秒）後に割込みを発生させるには、目的のカウント数よりも1小さい49,999をカウンタ値として設定しなければなりません。

∴49,999

[2]
16ビットカウントタイマはMPUに内蔵されており、カウントされる度に割込みを発生させます。MPUは割込みを検知すると、省電力モードから通常モードに復帰するので、16ビットカウントタイマを用いた場合には通信圏内でのカウント中は常に通常モードでの利用になります。これに対して、日付時刻用タイマでは設定時刻になったときにだけ割込みを発生させるので、カウント中でもMPUはアイドル状態になり省電力モードへと切り替わります。
以上より、「MPUの消費電力を小さくできる」ことが日付時刻用タイマを用いる理由であると結論づけられます。

∴消費電力を小さくできるから



## 3
[1]
〔aについて〕
問題文中の「静止状態で移動を検出すると，直ちに位置登録を行い，状態を移動状態にする。」という記述からaに位置登録が入るとわかります。

∴a＝位置登録

〔bについて〕
問題文中の「移動状態では，位置登録の周期（以下，登録周期）を5分にする。」という記述から、静止状態から移動状態に切り替わった際に変更するのは登録周期であるとわかります。

∴b＝登録周期


[2]
移動情報がセットされていないということは、前回の位置登録から登録周期の5分間、一度も移動を検出しなかったということです。このとき、防犯ブザーは位置登録を行った後、状態を静止状態に変更します。
メインタスクからタイマタスクへの要求には、「登録周期の計測開始」「登録周期の計測停止」「登録周期の変更」がありますが、この場合にメインタスクから行うべき要求は登録周期の変更です。なぜなら、静止状態への切り替わりに伴い、移動状態では5分だった登録周期を静止状態の30分に変更しなくてはならないからです。

∴登録周期の変更
```
