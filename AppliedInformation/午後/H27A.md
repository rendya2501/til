# 平成27年秋期

---

## セキュリティ

---

## ネットワーク ネットワークの設計

うーん。もう一つ正解したかった。  
アドレスの数は間違っていなかったと思うのだが・・・  
いや、間違えてたわ。ﾌｧｰｰｗｗｗ  
でも、まぁ考え方は合ってたか。ビットの計算を間違えてた。  

まぁ、余裕を持って考えられるようになってきたので、進歩は感じている。  
しっかり復習して次に生かす。  

``` txt : 29分 6/10
507 × 508

ファイルサーバ
PC

192.168.1.11 × 192.168.1.0
255.255.254.0
192.168.4.3

インターネットVPN × 広域イーサネット
グループウェアサーバーへのIP接続が必要なため × 遅延が少なくテレビ会議機能に適しているから
事業所とデータセンターで別々の業者で回線を契約する 100%
他)事業所とデータセンタでは異なる回線事業者と契約する
イ

---

[1][1]
本文中に「事務所2のPCには 192.168.12.0/23 からIPアドレスを割り当てる」とあります。
アドレスプレフィックスが23なのでネットワーク部は先頭から23ビット、ホストアドレス部は残り9ビットになります。
9ビットで表現できるビット列の組合せ数は 2^9＝512 ですが、以下の4つは割当て済み、またはホストアドレスとして使用できないアドレスためPCに割り当てられません。
ルータCの⑧ポートのアドレス：192.168.12.1
事務所2内のPC側セグメントのL2SWアドレス：192.168.12.2
ネットワークアドレス：192.168.12.0
ブロードキャストアドレス：192.168.13.255
したがってPCに割当て可能なアドレス数は512から上記の4つを除いた508個になります。

∴508

→
255 + 256 = 511 509
ループバック、ブロードキャスト、ルーター、L2SWの4つを抜かして507

0000110|0 0000 0000
1 2 4 8 16 32 64 128

0から数えたら最大値は255だけど、0を含めた総数は256。
で、この場合は総数で数えないといけないので、256であるべき。
そういうことやぞ。


[3][1]
図2「W社の新たなネットワーク構成」より、ネクストホップに設定されている192.168.4.1はルータAの広域イーサネット側のポート(③)とわかります。
つまりデータセンタ内のルータBは、宛先IPアドレスとサブネットマスクの論理積(AND)をとったものがaと一致するパケットを受信すると事務所1に転送するということです。
事務所1内にはルーティングテーブル1行目で設定されている192.168.0.0/24と、サーバ群が配置されている192.168.1.0/24という2つのネットワークセグメントが存在します。
つまりルーティングテーブルの2行目に設定すべき事務所1を宛先とするもう1つのIPアドレスは「192.168.1.0」になります。

∴a＝192.168.1.0

→
あー・・。単純にセグメントが0か1の2つあるからって事だけか。
ファイルサーバーへのアクセスが必要だからって具体的にかいちゃったけど、これは1に属するから1のネットワークを指定するだけでよかったんだ。
てへぺろ。


[3][1]
広域イーサネットとインターネットVPNの特徴は次の通りです。

広域イーサネット
回線事業者が提供する閉域ネットワークに接続する。
イーサネットの名の通りL2レベルで接続するため上位の層のプロトコルがIPに限定されない。
事業者の回線を使用するため帯域保証などのサービスがある。

インターネットVPN
IPsecなどのセキュリティプロトコルを利用して公衆回線上にVPNを構築する。
通信経路にインターネットを利用するため専用線を用いるサービスと比較して安価なことが多い。
通信品質を保証しないベストエフォート型なのでネットワークが混雑していると通信の遅延が生じることがある。

設問では「事業所間で利用するテレビ会議機能に着目して」と指定されています。
本文中の「テレビ会議機能は遅延なく良好なレスポンスを確保する必要がある」という記述、
および2つの方式の特徴から帯域が保証される「広域イーサネット」を主経路にするのが適切と判断できます。
広域イーサネットは30Mビット／秒の契約で、テレビ会議機能では1つの事務所当たり5Mビット／秒の帯域が使用されます。
たとえテレビ会議機能を使用したとしても残り20Mビット／秒の帯域があるため、残りの機能(電子メール、グループウェアの利用、ファイル共有)の利用には十分と考えられます。

∴主経路＝広域イーサネット網
　理由＝遅延が少なくテレビ会議機能に適しているから

→
これは広域イーサネットとインターネットVPNの通信特性を知っていないとわからない問題だ。  
てか、IPによる認証って関係なかったのかよって感じでもある。
```

---

## データベース 人事情報のデータ構造

いやー、久しぶりに敗北した。  
全体的に話は分かったけど、納得の行く答えに絞れなかった。  
再帰の問題は難しい。  
itecの問題にあったからやったけど、やっておいてよかった。  

### 第1正規形

各属性の繰り返し項目を排除し、単一値を属性とする複数の行に分解した状態。

### 第2正規形

第1正規形であり、かつ、主キーの一部だけで一意に決まる属性を別表に分離した状態（主キーに部分関数従属する属性がない状態）。

### 第3正規形

第2正規形であり、かつ、主キー以外の属性によって一意に決まる属性を別表に分離した状態（主キーからの推移的関数従属が存在しない状態）。

``` txt : 30分 3/9
→
部署ID
上位部署ID

第2正規形 × 第1正規形
年月日の情報は所属部署IDに紐づく情報で分離できるから ×
例)・主キーの一部に関数従属している属性があるから
   ・主キーに部分従属している属性があるから
   ・社員IDだけに従属している属性があるから
{社員ID}、{所属部署ID}、(適用開始年月日)、適用終了年月日
→{社員ID}、{適用開始年月日}、適用終了年月日、所属部署ID

= 部署.部署ID × IS NULL
2014-04-01 × 2012-10-01
9999-12-31 × 2014-03-31


[2][1]
まず、社員エンティティが第1正規形かどうかを検討します。明らかにレコード1行の中に複数の繰り返し項目を値とする属性はありません。
よって、少なくとも社員エンティティは第1正規形です。

次に社員エンティティが第2正規形かどうかを検討します。
〔新システムでの履歴管理〕の要件(4)には「所属情報以外の社員の情報は履歴管理する必要はなく，最新の情報だけを管理すればよい。」とあり、
複合主キーの一部である"社員ID"がわかれば、属性"氏名"・"性別"・"電話番号"・"自宅住所"・"自宅電話番号"は一意に特定できます。
複合主キーの一部に関数従属する属性がある（主キーに部分従属する属性がある）ことから、社員エンティティは第2正規形ではありません。

よって、社員エンティティは「第1正規形」、理由は「主キーの一部である関数従属する属性があるから」「主キーに部分従属している属性があるから」「社員IDだけに従属している属性があるから」などです。
厳密には、第1正規形を充足し第2正規形でないことを説明する必要があるので、「すべての属性が単一値であること」「主キーの一部である"社員ID"に関数従属する属性があること」の2つを含める必要があるのですが、文字数制限の関係もあり解答例では後者の理由のみに留めています。

∴主キーの一部に関数従属している属性があるから
　主キーに部分従属している属性があるから
　社員IDだけに従属している属性があるから


主キーが2つって事は
社員ID 時間
1      2012
1      2013
みたいな事ができる。
でも、住所とかってそこまで変わらないでしょ。
そういうのって別のテーブルにまとめればいいじゃんって話。
社員IDだけで決まる要素ってたくさんあるよね。それって複合キーの中で関数従属してる証拠だよね。って事だろ。
これこそ、主キーの一部だけで一意に決まる要素が分離されていない→第2正規形を満たしていないと言っていることか。


[2][2]
本文中に「エンティティ"所属"を新たに追加し，エンティティ"社員"を第3正規形とした。」とあるので、図3の社員エンティティを第3正規形にすることを考えます。

図3の社員エンティティは第1正規形ですので、第3正規形にするためには、まず第2正規形にする必要があります。そのために、複合主キーへの部分関数従属を排除します。
(1)より、属性"氏名"・"性別"・"電話番号"・"自宅住所"・"自宅電話番号"は複合主キーの一部である"社員ID"に関数従属しているため、
"社員ID"を主キーとする新たなエンティティを作り、"社員ID"に関数従属する属性を移動します。図4より、このエンティティを改めて社員エンティティ、元のエンティティを所属エンティティとしていることがわかります。
関係スキーマ：エンティティ名（属性名1，属性名2，...）を記述すると、
社員（社員ID，氏名、性別、電話番号、自宅住所、自宅電話番号）
所属（社員ID，適用開始年月日，適用終了年月日，所属部署ID）
となり、第2正規形です。次に所属エンティティが第3正規形かどうかを検討します。
第3正規形では主キーではない属性への関数従属を排除します。属性"適用終了年月日"と"所属部署ID"の間に関数従属性がないことは明らかですので、推移適関数従属はありません。
よって、第3正規形の条件を満たしています。

したがって、所属エンティティの属性は以下の4つです。

∴社員ID
　適用開始年月日
　適用終了年月日
　所属部署ID

※図4より、第2正規形の段階からエンティティの個数が増えていないので、同時に第3正規形であったことは（裏技的に）一応わかります。


あくまで、社員IDと適用開始年月日が主キーなので、これは別表として抜き出せる。
後は、適用終了年月日はマストとして部署がいつからいつまでって事を表したいので、所属部署IDも属性として抜き出せばおｋ。
そういうこと。



[3][1]
〔dについて〕
図5のSQL文は、図2で例示されているSQL文に日付指定の条件を追加した以外は基本的に違いはありません。ただし、UNION ALL句直前のWHERE句で指定している列が部署ID列から上位部署ID列に変わっています。UNION ALL句直後のSELECT文では、WITH RECURSIVE句で導出した関連部署表のレコードを順番に呼び出します。

図2のSQL文は、指定した部署とその配下の全ての部署を表示するものでしたから、会社全体の部署構造を表示するには木構造の最上位である"会社"を起点として指定することになります。本文中には「最上位である会社の上位部署IDにはNULLを設定する。」とあるので、最初の関連部署表となる1行としては上位部署IDがNULLのレコードが適切です。したがって、[d]には「IS NULL」が当てはまります。

```

---

## 組込みシステム
