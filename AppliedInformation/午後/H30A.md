# 平成30年秋期

## セキュリティ

``` txt : 回答
```

---

## ネットワーク Webシステムの負荷分散と不具合対応

LPIC合格したよなぁ？って感じです。  
nslookupと書こうとしてnetstatとはな。  

すぐに終わったけど、ミスリードしてた。  
IPの問題は大丈夫だったけど他がダメですね。  

``` txt : 18分 4/7
172.16.10.5
172.16.10.12

netstat × dig or nslookup
TCPポートを確保できず接続待ち状態が続きタイムアウトする 0%
→WebサーバからDBサーバへのアクセスがエラーとなった
タイムアウトエラーになる確率が低下する 0%
→Webサーバー1～3で再利用できるTCPポート数を増やせること

ア
LBによる送信元アドレス書き換え機能 100%
他)送信元のIPアドレスはLBのものになるから

---

[2]
問題をよく見てみれば、どのようなエラーが発生していると考えられるか？なので、何が原因か？と答えるのは全然違うように思われる。
もっとよく見れば、普通にこたえられる問題だっただけに非常におしい。


[2][2]
不具合の直前に販売管理機能のプログラムをバージョンアップしているので、Webサーバ上で動作するプログラム上の問題であることが想定できます。

表1の記載内容を見ると、pingでの疎通確認、名前解決が正常である一方、項番4には「エラーが表示されたときのWebサーバとPC間におけるHTTP通信メッセージそのものが存在しなかった」とあり、Webサーバが要求を受信してから応答を送信するまでの間にエラーが発生している確率が高いと考えられます。HTTP応答が返ってこない場合、Webブラウザではタイムアウトエラーを表示します。
さらに、項番6に「WebサーバからDBサーバへのアクセスエラーメッセージがあった」と記載されていることから、WebサーバからDBサーバへのアクセス時にエラーの原因となる不具合が生じていると判断するのが妥当です。

∴WebサーバからDBサーバへのアクセスがエラーとなった


[2][3]
表1の項番6では「TCPポートが確保できない」エラーが記録されており、DBサーバのTCPポートが枯渇してしまっていることがアクセスできない原因であることがわかります。

TIME_WAIT状態とは、TCP通信のシーケンスにおける遷移状態の1つで、本文中に「TCPコネクションが閉じるまでの猶予状態である」と説明されているように接続終了待ちの状態を示します。TIME_WAIT状態のタイムアウト値を短縮することで、使用済みのTCPポートを以前より早く解放するようになります。TCPポートが解放されるまでの時間が短くなれば、他の通信がそのポートを再利用することが可能となります。これにより、Webサーバ1～3で再利用できるTCPポート数が増える改善効果を望めます。

∴Webサーバ1～3で再利用できるTCPポート数を増やせること


```

---

## データベース 入室管理システムの設計

難しかった。  
この年のデータベースは難しい模様。  
スレッドもあれている。  

``` txt : 30分 7/9
## 1
グラフは答えを覚えていたので正解ではあるが、なぜそうなのか説明出来ないので不正解みたいなものだろう。
→
意外と単純なもので、主キーと外部キーを見比べれば一目瞭然だった。
ユースケースから考えると難しいけど、単純にE-R図上で考えてみれば1対多になる可能性があるかどうかで判断できるから、素直にそれだけでよかった。


## 2
ここは特に何もないかな。
主キーといわれてこれ以外は考えられないし。


## 3
TRUE,FALSEを返す文はCOUNTだけでよかったか。
最初はそう書いたのだが、WHEREの意味がよくわからなかったので、CASEまで書いたけどダメだった。
深読みして失敗したパターンってやつだな。

→
図2のSQL文では、ROOMスキーマの入室許可表から「社員IDと室IDが指定のものであり、今日が入室許可期間内である」という条件のレコードを抽出します。
この条件を満たすレコードが存在する（つまり、レコードが1つ以上）ということは本日の入室が許可されていて、条件を満たさない（つまり、レコードがない）ということは本日の入室が許可されていないということです。

aにレコードの個数を数える関数を入れれば、本文で説明されている結果、すなわち前者に1以上を後者に0を返すことができます。したがって、aには「COUNT(*)」が当てはまります。
→
AND 入出許可開始 <= :今日 AND 入出許可終了 >= :今日
時間ではなく、日で考える。
2日部屋を予約したのなら？終了は今日より後に無くてはならないし、許可は少なくとも今日からでないといけない。
だからちゃんと有効範囲内に入っている事がわかる。
ここまで読むことが出来なかった。
しかも、問題文にはちゃんと「可の場合は1以上」って記述があるので、なおさらCOUNTでよかった。


## 4
GRANT文なんて使ったことはなかったが、ONやTOの前置詞の意味が分かれば、自ずと答えは決まってくる。
許可する命令をビューに与え、それをユーザーに付けるというイメージかな。
GRANT 許可する命令 ON 付与するビュー TO 付与するユーザー
`GRANT <権限> ON <表名> TO <ユーザ名>`  

HRかROOMか。
ここ毎回ROOMにしようとしてしまうのだけど、何故だろうか。
→
〔各社内システムのRDBMSユーザ〕には「社内システムごとにデータベース管理者(以下，DBAという)が存在する。
DBAは表の所有者であり，他のユーザに対して，自分が所有する表へのアクセス権限を付与することができる。」とあります。
前述したようにビュー表"入室管理用社員"の属するスキーマは「HR」ですから、アクセス権限の付与は人事システムのDBA用ユーザが実行します。
表4より、人事システムのDBA用ユーザ名は「HR_DBA」とわかります。
→
直前の問題がROOM_APに対して権限を付与しているから、ならROOM_DBAから付与されるのが筋だよなって勘違いしてしまうからだろうか。


## 5
ここは是非とも正解しておきたかった。
やりたいことはわかったけど、それをクエリに落とし込めなかった感じ。
間に組織を挟んで考えれば簡単だった。

→
図5のSQL文によると、ビュー表"入室管理用社員"の各列の対応は次のようになります。
社員ID：社員表（T1）の社員ID列
氏名：社員表（T1）の氏名列
勤務区分：社員表（T1）の勤務区分列
組織長氏名：社員表（T2）の氏名列
ある社員の組織長の氏名を得るためには、その社員の「社員ID→所属する組織の組織ID→その組織の組織長の社員ID→組織長の氏名」の順に参照すればよいと考えられます。
それをSQL文で実現するには、

「社員ID、所属組織ID、氏名、勤務区分をもつ社員表(T1)」と「組織ID、組織長の社員IDをもつ組織表(T3)」を(所属)組織IDで結合する。
　 →WHERE句に「T1.所属組織ID = T3.組織ID」を記述する。

「組織長の社員IDをもつ組織表(T3)」と「社員ID、氏名をもつ社員表(T2)」を(組織長の)社員IDで結合する。
　 →WHERE句に「T3.組織長の社員ID = T2.社員ID」を記述する。

といった手続きを行います。
```

---

## 組み込みシステム カードを使用した電子扉システムの設計

プリエンプション  
優先度に関する問題  

ほぼ全問正解。  
間違えたのは適切な字句を入れなさいってところをキーワードでしか答えなかったから。  
でも、内容的には100％正解だったので、まぁってかんじ。  
問題文をちゃんと読みましょう。  

30分かかってしまった。最後の問題で時間がかかった。  
フローに置けるバグを見つける問題でちょっとしたパズルになっている。  
それに嵌った。  
30分ちょうどでわかって正解した感じ。  

``` txt : 回答 30分 7/8
## メモ


## 1
a カード識別コード
b 扉識別コード


## 2
c エラー音 × エラー音を発生する
d オ
e カ
f 閉扉
g タイマ満了


## 3 100%
t1秒経過して開錠処理が開始されてから１秒以内に扉を開ける
→
「①施錠する」処理中に扉を開き、そのままt2秒経過したとき
```

---

## 情報システム開発 継続的インテグレーション

問題を覚えていたのでスラスラ解けた。  
1つナチュラルに間違った奴があるので、それだけ復習すれば後は十分かな。  
最後の問題に関しては言いたいことはわかっていた。  
表現の問題として片付けたい。部分点をもらえる自信はある。  

``` txt : 20分 7/9 実質8
イ
エ
オ

リグレッションテスト
エ × ア

false

エ
異常が発生した場合、担当したチームにのみメールが送信されるようにする 0%
他)各アプリケーションの担当チームだけにメールするようにする
ビルドと単体テスト間のフォークとジョインを廃止してそれぞれ単体テストまで流す 0%
→各アプリケーションのビルド終了後、待ち合わせせず単体テストに移る

---

[2]
"既存機能に対するテスト"では、機能変更・機能追加された部分だけでなく、追加・変更された機能とは直接関係ない部分も含めて網羅的に再テストを実施します。
当然ですが、アプリケーションの規模が大きくなれば、それだけテストしなければいけない部分も増えるため、テストケース数は増加します。
アプリケーションの規模はステップ数で表されますから、"既存機能に対するテスト"のテストケース数は、アプリケーションのステップ数と密接な関連があります。

ステップ数に対するテストケース数をテスト密度といいます。
テスト密度は、テストケース数を設定する際の参考値や、テストの十分性評価等に使用できます。
IPAの「ソフトウェア開発データ白書」等の資料では、テスト密度の統計が公表されているため、初めてCIツールを導入する場合でも、これらを参考にテストケースの数が妥当であるかどうかを評価することができます。

したがって、テストケース数の妥当性を評価するために考慮すべき値は、アプリケーションのステップ数になります。
他の選択肢は、追加・変更された部分の大きさと関連する値ばかりなので誤りです。

∴ア：アプリケーションのステップ数

```
