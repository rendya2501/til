# 平成29年春季

## セキュリティ マルウェア対策

とても簡単だった。  
特にいうことがない。  
強いて言えばWebブラウザの機能で少し迷った程度だろうか。  
オートコンプリート機能と言っているが、つまりは自動入力機能ってことで問題ないだろう。  
このくらいサクサク進んでくれれば助かるのだがなぁ。  

``` txt : 回答 10分 10/10
## 1
a： ク 水飲み場型
b： エ Webページ
c： ウ URLフィルタリング
f： カ 総当たり


## 2
エ


## 3
IDとパスワードの自動保存機能を無効にする 0%
→
オートコンプリートモードを無効にする


## 4
[1]
時系列がわからなくなるので、他の機器のログとの関連性を調査できない
→
各機器のログに記録された事象の時系列の把握が困難になる

[2]
d:DMZ
e:インターネット


## 5
ア、ウ
```

---

## ネットワーク レイヤ3スイッチの故障対策

話はわかったがどう答えていいかわからなかったので、確認のために時間がかかった。  
正答率的には悪くない。  
長文の問題も正解していた。  
1つナチュラルに間違ったものがあるのが悔やまれる。  

でも、この年の問題のスレ荒れてるって事は、難しかったって事だよな。  
というか、この年の合格率低かったような？  
この問題、アドレスとポートが2つあって、どっちにアクセスしたらどちらに行くみたいなのがわかりきっていないのがなぁ。  

``` txt 30分 9/12 実質10問正解
イ
コ
オ
エ × カ
ク

K君のPCから業務サーバーへアクセスができるか確認するため
各PCの内部にDNSのキャッシュが残っていたから

1
172.16.2.250
VLAN20

デフォルトゲートウェイ × デフォルトゲートウェイアドレス
VLANインターフェースに仮想IPアドレスを設定する × 172.16.1.200

---

[1][4]
ネクストホップとは、宛先ネットワークに到達するために、次にどの隣接ルータにIPパケットを転送すればよいのかについての情報で、ルーティングテーブルに設定されます。

p1がダウンしたときには、172.16.1.250 からの送出ができないので、代わりにL3SW2を経由してサーバにパケットを届ける必要があります。
ネクストホップに L3SW2のp10側のIPアドレス 172.16.2.251 を設定することで、PCから発せられたサーバ宛て（宛先 172.16.1.0/24）のパケットはL3SW2に転送されるようになります。
よってdには 172.16.2.251 が入ります。

問題文の空欄cの後に、「PCによるサーバアクセスは，L3SW1のp10経由で行われる。L3SW1のp1故障時には，・・・」とありますから、
宛先ネットワークは、サーバが属している172.16.1.0/24です。
解説にも、「PCから発せられたサーバ宛て（宛先 172.16.1.0/24）のパケットはL3SW2に転送されるようになります。」とあります。

[1][5]
ICMPリダイレクトは、L3SWやルータが特定のネットワーク宛てのパケットに関してよりよい経路情報を送信元に伝達するために使用されるメッセージです。
本問のケースで言えば、ネクストホップが設定されたL3SW1は、送信元に対し 172.16.2.251 が適切な転送先である旨のICMPリダイレクトメッセージを返します。
これを受け取った送信元（PC）は、ICMPリダイレクトを解釈し次からサーバ宛てのパケットを 172.16.2.251（つまりL3SW2）に転送するようになります。


[2][1]
pingはネットワークの疎通（つまり対象ノードと通信可能な状態にあるかどうか）を確認するためのコマンドです。
J君は自席のPCから業務サーバを利用できたため、障害の原因がK君のPCから業務サーバ間の通信経路にある可能性を考えました。このためJ君は、K君のPCから172.16.1.1 （業務サーバ）に対してpingを送り、K君のPCから業務サーバへの通信経路に問題がないかどうかを確認したのです。

∴業務サーバへの経路に障害があるかどうかを確認するため

→
メモ
K君のPCがおかしいのか確かめるため。
K君のPCからのアクセスが出来ないのか確かめるため。
そもそもアクセス出来ないのか確かめるため。
複数の環境に置けるネットワークの状況を確認するため

経路を確認するためか。なるほどね。そうかもね。
ネットワークの状況って言い方も抽象的すぎか。
もっと具体的にいうなら経路という概念で表せばよかったってことか。


[2][2]
DNSクライアントが名前解決要求をDNSサーバに送り、DNSサーバは結果をDNSクライアントに返すのがDNSの名前解決の基本動作となりますが、毎回この動作が繰り返されるわけではありません。DNSでは負荷軽減と応答時間短縮のためにキャッシュと呼ばれる仕組みによって手順を簡略化できるようになっています。キャッシュには名前解決で行った問合せの結果が一定時間保存されており、ローカルに有効期限内のキャッシュがある場合、DNSクライアントはその情報を再利用することで再度問合せを行わずに済むようになっています。その後、時間が経過しキャッシュの有効期限が切れると、DNSクライアントはDNSサーバに名前解決要求を行います。

たとえDNSサーバと通信できない状態でも、キャッシュがローカルPCに残っている間はそのキャッシュが使用されるため名前解決自体は問題なく行われます。しかし、キャッシュの有効期限が過ぎると、再度DNSサーバへの問合せが行われます。この時点でDNSサーバと通信できないと名前解決ができず、他のサーバとの通信もできなくなってしまいます。本問では時間が経つに連れてサーバ群を利用できない社員が増えていますが、キャッシュが切れた順に障害に陥ったのだと解釈できます。

つまり、DNSサーバが利用できなくても、サーバ群の利用を正常に行えている社員がいるのは「その社員のPCにDNSキャッシュが残っているから」です。

∴PCにDNSのキャッシュが残っているから


[3]
OSPFが動作しているネットワークでは、通信障害が起こると自動でルーティングテーブルが再構成されます。

L3SW1のp1がダウンすると、PCからサーバ群への経路情報は以下のように変わります。

<https://www.ap-siken.com/kakomon/29_haru/img/pm05_4.gif>

L3SW1のルーティングテーブルのうちサーバ群（172.16.1.0/24）への経路情報を保持しているのは項番1ですのでこれの変更が必要です。
p1のダウン後に、L3SW1の内部ルータが172.16.1.0/24宛てのパケットを受け取った場合、L3SW2に転送するためにp10から送出することになります。
このとき、L3SW1がパケット送出するVLANインタフェースは 172.16.2.250、そのVLANインタフェース(p10)が属するVLAN名はVLAN20ですので、これらを項番1に設定することになります。


[4]
VRRP(Virtual Router Redundancy Protocol)は、ネットワークのデフォルトゲートウェイとなるルータやL3スイッチの冗長構成を実現するプロトコルです。

VRRPでは複数台のルータに共通して使える仮想IPアドレス・仮想MACアドレスを用意し、障害発生時には2つのアドレスをフェールオーバで待機系に引き継ぎ処理を継続します。
この仕組みによってホストのデフォルトゲートウェイの設定値などを変更することなしに、送信先の装置を自動で正常稼働するものに置き換えることが可能になっています。

本文中の「PC及びサーバは，パケットを仮想IPアドレスに向けて送信することによって…」の説明から、VRRPを機能させるためにはPC及びサーバの送信先が仮想IPアドレス宛てになっていなければならないことがわかります。
図1及び図2ではサーバ群のデフォルトゲートウェイアドレスはL3SW1のサーバ側インタフェースである 172.16.1.250 に設定されていますので、これをVRRPグループのうちサーバ側（VRRPグループ1）の仮想IPアドレスである 172.16.1.200 に置き換えることになります。

∴(1)デフォルトゲートウェイアドレス
　(2)172.16.1.200

```

---

## データベース 稟議申請システム

「ユーザー」か「ユーザ」か気を付ける事。  
本文の表現にそぐわない場合、減点される恐れがある。  
ほぼ満点と見ていいだろう。  
表現の問題でダメだった。  
1つ引っかかった部分があるので、そこはしっかり確認しておく。  

``` txt : 29分 9/10
## 1
外部キーがあれば1対多と見て問題なさそう。

購買稟議の場合は，申請者の所属部署の部長，購買部の担当者，購買部の部長の順で，承認が必要となる。」とあるので、1つの承認申請に対して複数の承認者がつくことがわかります。したがって、承認申請エンティティと承認者情報エンティティのカーディナリティは1対多であり、
→
ここの意味合いも認識と合っている。


## 3
クエリの構築。
メイン = T1 ADN T1 = T2とすべきか悩んだ。
メイン = T1 AND メイン = T2とした場合、全ての組み合わせを作るらしい。
そのイメージは持たなかった。


## 4
これはRNでも同じ現象に遭遇したのですぐにわかった。
マスターとJOINさせた場合、過去のデータを残すことが出来ない。
そういうわけで、着眼点はよかったが、単純な「部署名」ではなく、「申請時部署名」としなければならなかった模様。
```

---

## 組み込みシステム スマートウォッチ

後2問は正解したかった。  
難易度的にはかなり優しい。  
計算問題もクソみたいな問題しか無かったし。  

ただ、表現の問題が少し難しい。  
複数の言い回しが可能だから。  

``` txt : 30分 7/10
エ
16
画面入力
画面表示
音声入力
画面作成
機能選択画面 × メールの内容
メール表示 × 機能選択画面
割込み × 優先度
表示される情報が違う 100%
→ 複数画面が混在表示される


1秒間当たりのデータサイズ[バイト] ＝ チャネル数 × サンプリング周波数[Hz] × 量子化ビット数[バイト]

この設問では、チャネル数＝1、サンプリング周波数は「8kHz＝8,000Hz」、量子化ビット数は「16ビット＝2バイト」です。これを式に当てはめると、

　1×8,000Hz×2バイト＝16,000バイト
＝16kバイト



ウォッチがフォンからメール受信通知を受信した直後に、利用者がウォッチのタッチパネルをタッチした場合を想像します。
〔ウォッチの動作仕様〕から、ウォッチがフォンからメール受信通知を受信した場合は、受信したメールの内容をウォッチに表示することがわかります。
また、タッチパネルをタッチした場合は、機能選択画面を表示します。

これらのことから、何の対策も講じていなければ、ウォッチがフォンからメール受信通知を受信した直後に、
利用者がウォッチのタッチパネルをタッチをすると、受信したメールの内容を確認する前に機能選択画面に切り替わってしまうことがわかります。
本問のウォッチでは、これを避けるために、各割込みハンドラの起動時にタッチ操作割込みをマスク（受付無効に）し、メインタスクが適切なタイミングで解除する仕様になっています。

よって、eには「メールの内容」、fには「機能選択画面」が入ります。

∴e＝メールの内容
f＝機能選択画面

→
逆だった。
解説の通りに考えれば、確かに逆だ。
俺は先にタッチパネルを操作している時に受信したらって考えていたから、この思考から抜け出せなかった。
メールの内容に関しては部分点くらいはもらえるのでは無かろうか。



[g]
表2より、画面表示タスクは「画面情報の内容を基に、画面の更新を行う」ことがわかります。
また、画面作成タスクは「メインタスクから受けた情報を基に、表示画面を作成し、画面情報に書き込む。」とあり、画面情報を更新します。

画面表示タスクと画面作成タスクは並行して実行されるため、画面表示タスクを実行中に画面作成タスクが動作すると、画面表示タスクは、
画面作成タスクによって書込み中のメモリから画面情報を読み出すことになります。
このときメモリには更新前と更新後の画面情報が混在することになるので、ウォッチの画面には複数画面が混在表示されることになります。

この問題を解決するためには、それぞれのタスクに優先度を付けて、画面表示タスクを実行中に画面作成タスクを動作しないようにする必要があります。
これらのことから、gは「優先度」、"現象"は「複数画面が混在表示される」が適切です。

∴g＝優先度
　現象：複数画面が混在表示される

→
「表示される情報が違う」で100％判定もらったけど怪しいものである。
画面が変になるのだろうなとは思っていたが、それがどういうものかズバリ答える事が出来なかった。
gについては、「割り込み」か「マスク」しか頭になかったが、プリエンプション型なので、優先度であるべきだった。

プリエンプションは割り込み型。
タイムクオンタムや優先度によってディスパッチやプリエンプションで現在のタスクを切り替える。
割り込みだから優先度とみて問題はないだろう。
並行実行という点でどちらを優先すべきかという発想は普通に考えればどうだとしか思えない。
```
