# 平成29年秋

## セキュリティ

まぁ、話はわかる。  
この年の問題は悪いと思う。  

itec  
>個人情報保護の強化をテーマとした問題で、暗号化方式、ハッシュ関数の性質、セキュリティ攻撃の名称などが問われているが、いずれも基本的な内容ばかりです。  
>特に、ハッシュ関数については、午前試験であまり問われる事がないので、この問題を通して理解しておきましょう。  
>また、問題文の読み方や比較的文字数の多い記述の練習をしてください。  

``` txt : 回答 17分 5/7
## 1
[1]
a：ログイン × 販売 ←ここも毎回間違っている。
b：ア
c：エ

[2] バックアップなど、過去に暗号化したデータを復号できなくなってしまうから 100%
→
削除された暗号化鍵で暗号化されたバックアップデータを復号できない

[3] 会員番号に処理を適応した結果の出力を仮IDと一致するまで総当たりする 0%
→
会員番号となり得る全数字列を同じハッシュ関数で変換して突き合せる。

## 2
[1]
d：イ
e：有資格者以外の人 × 意図しない宛先 or 間違った宛先
↑
ここ毎回間違ってる気がする。
```

``` txt : 解説
## 1
[1]
〔aについて〕
各商品開発部門では「有資格者がWebサイト閲覧履歴と販売情報を関連付け…分析を行う」と説明されています。
この問では、Web販売管理システムにログインした際に有資格者に提供される情報を問うていますが、「顧客データベースは、各商品開発部門には公開していない」ため、
有資格者がWeb販売管理システムにログインして行うことは販売情報の参照およびダウンロードに限られます(加工個人情報はシステム部から有資格者のメールによって提供されます)。
したがってaには販売が入ります。
セキュリティ強化策の(3)では、Webサイト閲覧履歴の会員番号を仮ID化することにしているので、
Webサイト閲覧履歴と関連付けられる販売情報についても会員番号を同様の方法で仮IDに変換して提供する必要があります。

itec
顧客情報データベースは、各商品開発部門には公開していない。
各商品開発部門の有資格者がWebサイト閲覧履歴と販売情報を関連付け、閲覧した商品と売れ筋商品を分析する。
その際、性別や地域、年齢などを必要とする場合、システム部門は顧客情報から必要がない個人情報の箇所をマスクしたデータを提供している。

顧客情報は非公開なので対象外。続く販売情報についてはWeb閲覧履歴と関連付けて分析に使うようなので、正解の候補。


∴a＝販売

[2]
AES : Advanced Encryption Standard
DES : Data Encryption Standard
AESはDESの後継。

[4]
会員番号は6ケタの数字列でその組合せは100万種類です。ハッシュ値から元の会員番号を導くのは容易ではありませんが、ハッシュアルゴリズムが分かり、仮IDが会員番号を単純にハッシュ化しただけのものならば、プログラムにより全100万通りの数字列を変換してハッシュ値が一致する文字列を特定するのは容易です。ましてやC社は50,000人の利用者を抱えているので、全データが漏えいすれば20回程度の試行で仮IDの元となった会員番号を特定されてしまいます。

∴会員番号となり得る全数字列を同じハッシュ関数で変換して突き合わせる


## 2
[2]
(1)でも触れましたが、メールによる提供では誤送信の可能性を否定できません。本来は依頼のあった有資格者に送付されるべきですが、勘違いや内部不正により無資格者や別部門の有資格者、または社外などの意図しない宛先に顧客情報が送信されてしまう恐れがあります。
```

---

## ネットワーク

髭を抜きながらやったからってことにしたい。  
3回もこの問題をやるけれど、それでも100点を取れないのはどういうわけか。  
わかっていないからに他ならない。  
問題を覚えるだけではダメで、理論からわからないといけないってことだろうな。  

一番最初の問題は何を思ったのかわからない。  
ひげ抜きながら答えたから見落としたのかも？  
接続先の認識違い。  
よく読まないとわからない。  

この問題はほとんどパズル。  
後は肝心なところをちゃんと読めるかどうか。  
問題自体はよくできているというか、解いていて面白いと感じるのだが、後半の難易度が跳ね上がるのがね。  
因みに特別な用語とかは特にない。  
ブロードキャストの意味をしっかり理解する必要があるくらいで後はパズル。  

``` txt : 30分 5/10 実質6
eee × ccc
aaa

13
3

8
13
相互通信可能な宛先MACアドレス 0%
→サーバーやFWのMACアドレス 

1,2,3,5,9 × 1,3
3 × 5
Forward8 × Forward13

---

[1]
勘違い。
顧客Yの環境どおしなのだからaaaとcccの通信になるのは当たり前なんですけどねぇ。
何を見てeee何てしたんでしょうか。なぞ。


[3][2]
通信制御テーブルの注記に「"any"とは，対象が全てのMACアドレスであることを示す」と説明されています。すなわちブロードキャスト通信です。
項番9～13のルールでは、物理サーバ#1～3に配置されている顧客Yのサーバ・FWから発せられた(送信元MACアドレスがaaa,bbb,cccの)ブロードキャストフレームが物理サーバ#1～3だけに転送されるように制御をしています。
同様に、物理サーバ#2,3に配置されている顧客Zのサーバ・FWから発せられた(送信元MACアドレスがddd,eeeの)ブロードキャストフレームは物理サーバ#2,3だけに転送されるように制御しています。
ブロードキャストを使用し、通信に必要な情報を取得すると言えばARPリクエストが頭に浮かびます。
同一セグメント間の機器同士がイーサネットフレームを使って通信を行う際には、通信開始に先立ちARPによって送信相手のMACアドレスを取得します。
これらより、項番9～13によって収集可能となる情報とは、同一顧客内のサーバ・FWのMACアドレスと分かります。

∴サーバやFWのMACアドレス

→
ブロードキャストの目的は何か？
通信したい相手のMACアドレスを知るために接続されている全ての機器に対してリクエストを送るのがブロードキャストだよね？
というわけで、知りたいのは相手のMACアドレスなのだが、この問題においては、サーバーとFWしか出てこないので、それらのMACアドレスと答えればよかったというわけか。


[4]
ここも盛大に勘違いした。
仮想サーバー#1が物理L2SW#2のポート2番に接続されると思ってた。
スレでもそう勘違いした人が板らしい。
しかし問題をよく読んでみると「物理サーバ#1で動作していたAPサーバを物理サーバ#2に自動的に移動させる設定を行った。物理サーバ#2に移動させたAPサーバは仮想L2SW#2の2番ポートに接続する。」と、その通りのことを言っている。
一字一句照らし合わせてみるとそうとしか言っていないのだが、解いている最中は「物理L2SW#2」なのか「仮想L2SW#2」なのか「物理サーバー#2」なのか見分けが付かなくなってしまった。
それさえ無ければ[3][2]以外の問題は正解する事ができる問題なのだ。
落ち着いて、ちゃんとメモしながら解く癖を付けたいところではある。


[4][1]
障害を契機にして顧客YのAPサーバが物理サーバ#2上に移動すると、顧客YのAPサーバ(aaa)・DBサーバ(bbb)が同一物理サーバ上に配置することになります。
これにより両機器間の通信が物理L2SW#1を経由しなくなるので、通信制御テーブル中の「aaa→bbb」および「bbb→aaa」のルールは適用されなくなります。

したがって項番1および項番3が適切です。

∴1，3

[4][2]
APサーバが物理サーバ#2に移動したことにより、aaaとbbbの通信は物理L2SW#1を経由しなくなりますが、cccとaaaの通信は故障前と同様に物理L2SW#1を経由します。
aaaが配置される物理サーバが変わったので、cccからaaaに送出されたフレームの転送先も適切に変更しなければなりません。

cccからaaaへのフレームは項番5のルールで制御されます。
故障前は物理サーバ#1への転送のために9番ポートに転送(Forward 9)していましたが、移動完了後は物理サーバ#2への転送になります。
物理L2SW#1のポートのうち物理サーバ#2と接続されているのは13番ポートなので、「項番5」のアクションをForward 9から「Forward 13」に変更する設定を適用します。

```

---

## データベース 青果卸売業の取引システム改修

卸売関係の話はよくわからなかったが、キーワードとデータの構造だけに着目すればそれほど難しくはなかったか。  
しかし、細かい部分で完璧では無かったので、やはりそれなりの難易度だったとは思う。  

``` txt : 23分 8/10
## 2
(品目コード)、(産地コード)、パレット数、単価 ×
→
(品目コード)，(産地コード)，パレット数，単価，(仕入担当者コード)

→
〔取引システムの改修〕には「販売担当者が仲卸業者の希望する品目，産地，パレット数，単価，販売予定日を（中略）それが予約情報として取引システムに入力される。（中略）予約情報は品目や産地に応じて各仕入担当者に割り当てられ，その情報も取引システムに入力される。」とあります。よって、予約明細エンティティには品目を示す"品目コード"、産地を示す"産地コード"、"パレット数"、"単価"、そして仕入担当者を示す"仕入担当者コード"を追加する必要があります。このとき、予約明細エンティティの外部キー（追加分）は次のようになります。
"品目コード"：品目エンティティの主キーを参照
"産地コード"：産地エンティティの主キーを参照
"仕入担当者コード"：従業員エンティティの主キー"従業員コード"を参照
したがって[e]に入る属性は、以下の5つです。



## 3
SUM(t2.パレット数 * t2.単価)
∴f＝SUM(t2.単価 * t1.パレット数)

合計金額なので、数量と単価を掛け合わせるのは当たり前だが、t1側のパレット数を使うのは盲点だった。
→
合計返品金額を求める式を考えます。返品金額は「単価×パレット数」で求めることができます。
返品表（t1）には返品されたパレット数は記録されているものの、単価はないので、販売明細表（t2）のものを使用します。
そして、集約関数 SUM を用いて返品金額を合計すれば合計返品金額を求めることができます。
したがって、[f]には「SUM(t2.単価 * t1.パレット数)」が入ります。
```

---

## 組み込みシステム ドライブレコーダ

簡単なほうだったが答え方の形式により不正解になったのが3問あった。  
言いたいことは全てあっている。  
ここら辺はIPAの塩梅に任せるしかない。  
こちらとしては、制限時間内に状況を把握して的確に回答できればいいのだ。  
でもよく見てみれば、細かい部分での語弊がおおい回答かもしれない。  
やっぱり正確に記述しないとダメかも。  

``` txt : 回答 28分 5/8

## 1
a : 動画を保存 × 動画ファイルを保存

動画ファイルの破損って言ってるから素直に動画ファイルにすればよかったかも。


## 2
10.5×F×N × 10.5FN

書き方的には俺の奴でもいいっぽい。


## 3
[1]
b : 衝撃イベント
c : 画像格納イベント
d : タイマ満了イベント

[2]
e : 100ミリ × 20
f : 20


## 4
GPS情報の取得前もしくは取得不可でシステム時刻を設定できなかった場合 0%
→
電源投入後、システム時刻の設定が完了するまでの間に衝撃を検出した場合

↑
取得不可でも、1回でも取得出来ていたらシステム時刻は設定されているので、保存可能。
やっちまった。
素直にシステム時刻が設定されるまでの間にって言っておけばよかった。
慢心した。
```

``` txt : 解説
## 1
動画ファイルの生成または追記の途中で電源断が生じると、動画ファイルが破損してしまう恐れがあります。
30秒間の電力を供給可能な二次電池を用意する理由は、動画ファイルの保存中に電源断が生じても動画ファイルの保存動作を維持するためです。
なお、衝撃センサからの割込みを禁止するのは、動画ファイルの保存中に再度衝撃を受けるとその時点から20秒間の画像を追記する仕様のためです。
二次電池により担保される電力供給時間は30秒間なので、再衝撃による割込みを許すと動画ファイルの保存時間の合計が30秒を超えてしまい、
保存動作中に電力供給が途絶えてしまう恐れがあります。

∴a＝動画ファイルを保存



## 2
問題文中に記録バッファの容量について「10.5秒間分の画像データを書き込むことができる容量とする」という指示があります。
1フレームの画像データはGPS情報を含めてNバイト、1秒の動画はFフレームの画像で構成されるので、10.5秒間分の画像データを表す式は以下の通りです。

10.5×F×N＝10.5FN(バイト)

∴10.5FN



## 3
[2]
〔eについて〕
動画ファイルに保存されるデータは衝撃後20秒間の画像データです。記録バッファの画像データを動画ファイルに追記するのに最大で100ミリ秒を要しますが、
この間もカメラから記録バッファへの録画は続いています。
衝撃後の動画には"衝撃検出後データ保存状態"の「画像格納イベント」で追記される画像データに加えて、"衝撃検出前データ保存状態"で記録された画像データの分も含まれます。
つまりタイマに20秒を設定すれば衝撃イベントを受信した時点から20秒間の動画を記録可能です。

∴e＝20
pm07_5.gif/image-size:400×118
〔fについて〕
"衝撃検出後データ保存状態"中に「衝撃イベント」を受信したということは、動画ファイルを保存中に再度衝撃センサからの割込みを受けたということです。
この場合、受けた時点から20秒間、画像データを待ち受けて動画ファイルに追記します。
したがってその時点で設定してあるタイマ要求を取り消し、タイマに再度20秒を設定することになります。

∴f＝20



## 4
問題文の「システム時刻が設定されていないときは，動画ファイルを保存しない」という記述に注目します。
動画ファイルの名前はシステム時刻をもとに決定されるので、システム時刻が未設定の時には衝撃イベントを検出しても動画ファイルが保存されません。
システム時刻は電源投入時には未設定になっており、電源投入後にGPSモジュールから通知された情報をもとに制御装置が設定します。
しかしGPSの特性として、屋内（駅の地下街等）やビルの谷間、見晴らしの悪い場所、 雨の日や曇が多い日などは現在地の特定に時間がかかったり、 
正しい場所が取得できない場合があります。このような環境下で起動された場合、制御装置にGPS情報が通知されず、システム時刻が未設定のままになってしまう可能性があります。
この状態で衝撃を検出したとしてもレコーダは動画ファイルをSDに保存しません。

∴電源投入後、システム時刻の設定が完了するまでの間に衝撃を検出した場合

```

---

## 情報システム開発 ソフトウェア適格性確認テスト

この問題は覚えているぞ。  
覚えているけど、正解できるかは別だな。  
ちゃんと正解出来ていれば100点だが、適切な回答が出来ない場合はダメだ。  
全部わかったので復習することはないが、こうやって間違えたって備忘録は残しておく必要がある。  

このテストでよかったのは、昔と比べてテキパキと論理式を書いて結論をまとめられたことだろうか。  
昔ならグダグダ説明してた気がする。  

``` txt
(100,100),(60,100),(60,70),(100,30)

30
250

ENGLISH × ENGLISHの境界値チェック
141
129
(オ,1) × (ウ,160),(オ,1),(ケ,190)

条件2だけを満たす条件1と条件5はあり得ないから 100%
他)条件1が偽，条件2が真，条件5が偽となる場合が成立しないから 

---

[2]
条件4を通過する下限、例えば「WRIRREN:130、かつ、ORAL_tec:4」や、「WRIRREN:160、かつ、ORAL_tec:3」の場合は、WRIRREN＋m×ORAL_tecの値がnと等しくなるはずです。

これを利用した連立方程式を立ててmとnを求めます。

　130＋4m＝n …①
　160＋3m＝n …②

加減法により、

　-30＋m＝0
　m＝30 …③

③の結果を①の式に代入します。

　130＋4×30＝n
　n＝250

```
