# 令和元年秋期

過去問題って1回でもやってしまえば、覚えちゃうから2回目の意味ってほとんど意味ないような？
やったとしても、なんとなく思い出せるし、そこで思い出せないものだけ直前で復習すればいい感じかなぁ。
最初に午後問題をやると、精神的な余裕があっていい。

## セキュリティ 標的型サイバー攻撃

うーん。もう一息。  
やっぱりなんとなく記憶があるので、正答率は高かった。  
マルウェアとかトロイの木馬がどういう動作をするのか、SPFって何だっけとか、ちょっと忘れてるところがあるので、そういうところを詰めていきたい。  

``` txt : 回答 16分 8/9
## 1
(1) ネットワーク上で被害が広がるのを防ぐため 0% ×
→社内の他の機器と通信させないため
↑あっててもいいような感じがするけどね。

(2) FWで許可されたプロトコルでないから 100%
→FWでアクセスが許可されていないから
(3) FW


## 2
(2)
b：エ
c：送信元メールアドレスのなりすまし (16文字)
d：HTTP又はHTTPS (11文字)

(3) ア
(4) エ
(5) イ
```

``` txt : 解説
## 1
1:
マルウェアの感染が判明した（または感染が疑われる）ときは、まず最初にパソコンのLANケーブルを抜く、無線LANのスイッチを切るなどの方法で、
社内のネットワークから被疑PCを切り離すべきです。
この処置には、マルウェアがネットワークを介して感染を広めたり、攻撃のために通信をしたりするものであった場合に、ネットワーク上の他の機器との通信を阻止する目的があります。
この処置により、マルウェアの被害を最小限に留めた後、セキュリティ担当者に報告し、その指示に従って対処します。

∴社内の他の機器と通信させないため

2:
P社のFWでは、PCからのインターネットアクセスにHTTPとHTTPSだけを許可しています。
一方、マルウェアはSSHを使ってインターネット上の特定のサーバと通信を試みていたとあります。
マルウェアはPC上で動作していますから、PCからSSHでインターネット上の特定のサーバと通信をすることになります。
SSHを使ったインターネットアクセスはFWによって遮断されるため、特定のサーバとの通信が失敗していたと判断できます。

∴FWでアクセスが許可されていないから

3:
〔aについて〕
もし、ネットワーク上の他の機器にもマルウェア感染が広がっていれば、被疑PCと同じようにインターネット上の特定のサーバとの通信を試みるはずです。
そうであれば被疑PCのときと同様にFWのログに通信の痕跡が残ります。
FWのログには送信元のIPアドレス及びポート番号、宛先のIPアドレス及びポート番号等が記録されているため、
FWのログに残された不審なSSH通信の送信元IPアドレスを分析することで、他に感染したPCが存在するかどうかを確認できます。

※P社ではPCに固定のIPアドレスを割り当てているので、ログ中の送信元IPアドレスから一意に特定のPCを識別可能です。

∴a＝FW



## 2
1:
〔bについて〕
・OP25B（Outbound Port25 Blocking）
ISPのメールサーバを経由せずに、外部のメールサーバと直接コネクションを確立しようとするパケットを遮断することで、スパムメールの直接送信を防ぐ仕組み。

・PGP（Pretty Good Privacy）
米国のPhilip Zimmermann氏によって開発されたツールで、公開鍵暗号方式を使用して通信当事者間でファイルや電子メールの「暗号化」「認証」「改ざん検知」を行う。

・S/MIME（Secure MIME）
米国RSA Data Security社によって開発された技術で、公開鍵暗号方式を使用して「暗号化」「認証」「改ざん検知」などの機能を電子メールソフトに提供する。

・SPF（Sender Policy Framework）
受信したメールの送信者メールアドレスのドメイン名と送信元IPアドレスが、送信側ドメインの管理者が設定したものと一致するかどうかで送信ドメイン認証を行う技術。
送信側の管理者は、正当な送信メールサーバのIPアドレス情報等をDNSサーバにSPFレコードに登録・公開しておき、
受信側は送信元メールアドレスのドメインを管理するDNSへの問合せを通じてそれを検証することで、メールヘッダの送信元ドメインが正当であるかどうかを確認する。

メールの送信ドメインを認証する仕組みはSPFだけです。
PGPやS/MIMEにも認証の仕組みがありますが、これはドメイン単位ではなくディジタル署名を使用してメールクライアント単位で認証する仕組みです。

SPFの認証フローは次のようになっています。
①送信側が送信側DNSサーバーにSPFレコードを登録・公開しておく
②メールを送信する
③受信側メールサーバーは送信側DNSのSPF情報を要求する
④送信側DNSはSPFレコードの内容を返す
⑤SPF情報と送信元IPアドレスの照合に成功すれば認証完了

∴b＝SPF

2:
〔cについて〕
標的型メール攻撃では攻撃者の身元を隠ぺいするため、送信元メールアドレスが詐称されている（実在しないドメインを使用している）ことがほとんどです。
実在しないドメインに対してSPFの検証が行われた場合、SPFレコードが見つからないため「None」と評価され、その結果はメールヘッダの Received-SPF フィールドに記録されます。
SPFの検証結果が「None」のときにアラートの表示・通知などを行えば、送信元メールアドレスのなりすまし行為を検知できます。
また、設定によって受信拒否することも可能です。

∴送信元メールアドレスのなりすまし

※SPFで送信ドメイン認証の効果を得るには送信元と受信側の双方がSPFに対応していなければなりませんが、
総務省の調査によれば2016年6月時点で93.14%※と標準的に普及しているので十分な効果を期待できます。
※特定電子メール等による電子メールの送受信上の支障の防止に資する技術の研究開発及び電子メールに係る役務を提供する電気通信事業者によるその導入の状況（P14）
https://www.soumu.go.jp/main_content/000591040.pdf

〔dについて〕
今回の事例でマルウェアからC&Cサーバへの通信を遮断できたのは、マルウェアがSSHで通信をしていたからです。
もし、マルウェアがFWで許可されているHTTP又はHTTPSを使用して通信を行うものであった場合には、C&Cサーバとの通信が成功していたことになります。
仮にC&Cサーバとの通信が成功していたとすれば、悪意のあるファイルがダウンロードされたり、
情報が窃取されたり、C&Cサーバからのコマンドで遠隔操作されたりするなど、被害が拡大していた可能性があります。

∴HTTP又はHTTPS

3:
特定の組織や人に狙いを定める標的型攻撃の一つに水飲み場型攻撃と呼ばれるものがあります。
これは標的ユーザが良く利用するWebサイトにドライブバイダウンロードのコードなどを仕込み、アクセスした標的ユーザにマルウェアやウイルスを感染させる攻撃です。

したがって、マルウェアが仕込まれるのは「P社従業員が良く利用するサイト」になります。

∴ア：P社従業員が良く利用するサイト

4:
新たなセキュリティ対策案では、利用者認証を備えたプロキシサーバを導入し、インターネットアクセスはプロキシサーバ経由で行うことになっています。
このため、マルウェアがインターネット上のC&Cサーバと通信を行うためには利用者認証を突破する必要があります。
これは標的型攻撃に対する「出口対策」に該当します。

しかし、マルウェアの中にはPC上のプロキシ設定を参照したり、
プロキシとの通信を監視したりして認証情報を窃取するものがあるので、プロキシサーバの導入も完全な防御策とはなりません。
この機能を有するマルウェアに感染してしまった場合にはC&Cサーバと通信されてしまう恐れがあります。

∴エ：プロキシサーバの利用者認証情報を窃取する機能

5:
メールクライアントソフトを再インストールしても受信メールは消えないので意味がありません。
正しい。不審なメールに気が付いたときには、返信、添付ファイルの開封、URLリンクを開くなどをせずに、
自組織のインシデント対応部署やセキュリティ担当に報告し、指示を仰ぐのが適切な対応です。
不審メールを保存したことを忘れてしまい、少し経った後に添付ファイルやURLを不意に開いてしまう恐れがあるので危険です。
URLにアクセスするとフィッシングの被害に遭ったり、マルウェアに感染してしまったりする恐れがあるので危険です。
```

---

## システムアーキテクチャ

内容を覚えているので、全問正解。  
この年の問題は計算問題が少ないから点を取れたのかもしれない。  
基本的にアーキテクチャは容量や必要帯域の計算がたくさん出てくる印象。  
bit,byte変換も忘れてはならない。  
こいつのせいでミス仕掛けた。  

``` txt : 回答 28分 10/10
## 1
[1] a : イ
[2] フレーム間の差分が少ない。 0% 動画に動きが少ない
[3] b : 6.6
[4] c : 499


## 2
[1] 方式2
[2] 
方式番号 : 方式1
理由 : 動体検知を行う画像範囲を設定する昨日がないため
→動体検知範囲の設定が出来ないから

方式番号 : 方式3
理由 : 監視カメラに7日分の容量を保存できるストレージがないため
→メモリカードに7日分の動画データを記録できないから


## 3
C社メールサーバーのFさんの受信ボックスの容量 100&
→C社メールサーバのFさんのメールボックスの空き容量
```

``` txt : 解説
[1]
〔aについて〕
各語句はどれもデータの圧縮符号化形式です。
AAC（Advanced Audio Coding）
MP3の後継として策定され、ディジタル地上放送やワンセグで使用されている音声圧縮符号化形式。
H.264（MPEG-4 AVC）
ワンセグ放送などの低速・低画質のものからディジタルハイビジョンTVクラスの高ビットレート用途に至るまで、幅広く利用されることを想定した動画の圧縮符号化に関する規格。2019年現在、動画圧縮コーデックの標準規格。ワンセグ、テレビ会議システム、インターネット放送、Blu-Ray Disc、YouTube等の動画共有サービスなど様々な場面で使用されている。
WMA（Windows Media Audio）
マイクロソフトが開発した音声圧縮符号化形式。
ZIP
複数のファイルを1つのファイルにまとめつつファイルサイズを小さくするアーカイバ方式の1つ。
動画の圧縮フォーマットは「H.264」だけです。

∴a＝イ：H.264


[2]
動画の差分とは、フレームごとの画像の差異のことです。以前と変化した部分だけを記録し、視覚的に影響が出ない範囲で変化しない情報を間引くことで動画ファイルのデータ量を削減します。H.264は、1回ごとの差分情報の量を小さくするなどの改良を行うことで、従来から使用されてきたMPEG-2と比較して2倍以上の圧縮効率を実現しています。

本問の監視カメラは定点観測であり、住宅敷地及び隣接する道路の一部が撮影対象となっています。少し考えればわかるように、基本的には動画には動きがなく、監視領域内を人や動物が通過しない限り静止画のようなものです。フレーム間の画像の差分が少ないのでH.264での高い圧縮率が期待できます。

∴動画に動きが少ない


[3]
〔bについて〕
以下の条件をもとに1秒間に転送されるデータ量を計算します。
解像度：1280×720
フレームレート：30フレーム／秒
1ピクセル当たりのビット数：24ビット
圧縮率：1％
まず、1フレームのデータ量は「ピクセル数×1ピクセル当たりのビット数」で計算できます。ピクセル数は「1280×720＝921,600」、

1ピクセル当たりのデータ量は24ビットなので、
$921,600ピクセル×24ビット＝22,118,400ビット$

この画像が1秒間に30フレーム生成されるので、1秒間のデータ量（無圧縮）は、
$22,118,400ビット×30フレーム＝663,552,000ビット$

圧縮後は元のデータ量の1％に減るので、

　663,552,000ビット×1％＝6,635,520ビット＝6.63552Mビット
　(小数第2位を四捨五入して) 6.6Mビット／秒

伝送に伴うオーバヘッドは無視できるとしているため、ペイロード部分のデータ量がそのまま解答になります。

∴b＝6.6


[4]
〔cについて〕
1秒間のデータ量（圧縮後）が6.6Mビットなのですから、その7日分のデータ量を考えます。

1時間は3,600秒なので、1日は「3,600秒×24時間＝86,400秒」、7日間は「86,400秒×7日＝604,800秒」です。これを6.6Mビットに乗じて、

　6.6Mビット×604,800秒＝3,991,680Mビット

Gバイト単位での解答を求められているため、

　3,991,680Mビット＝498,960Mバイト＝498.96Gバイト
　(小数第1位を四捨五入して) 499Gバイト

∴c＝499

```

---

## ネットワーク HTTP/2

HTTP2の問題だったが簡単だった。  
特にない。  
当時はTCPの接続手順もわからないほどだったのが信じられない。
当時にそれくらいわかっていれば合格していたはずなのが非常に残念でならない。
今元年受ければ合格は確実だろうな。  

``` txt : 10分 8/9
イ
複数のTCPコネクションを確立させ平行受信する
他)同時に複数のTCPコネクションを確立する手法

ウ
キ
ク
エ

ウ

次のリクエストを送信するまでの時間 0%
→前の画像ファイルの受信完了待ち
128

全部わかったし、用語などは午前問題のほうにまとめた。
```

---

## データベース

簡単すぎて泣ける。  
今のレベルで元年だったら余裕で受かっていただろうな。  
逆に言えば、元年の俺のレベルってそれくらいでしか無かったってことだよな。  

1問だけ0%判定くらったけど、言いたいことは合っているので、正解とする。  

``` txt : 回答 18分 10/10
## 1
a : →
b : (部署番号)
c : {従業員番号}
d : ↓


## 2
[1] e : SELECT 従業員番号,:レポート年月
[2]
f : SUM(歩数.歩数)
g : 歩数.従業員番号 = 月次レポート.従業員番号


## 3
[1]
1日に複数の睡眠開始日時を観測した場合 0%
→
1日に2回以上睡眠を取得するパターン

[2]
睡眠
睡眠開始日時を主キーに追加する。 100%
→
主キーを従業員番号、睡眠開始日時に変更する。

思えば、主キーを追加しても意味がないので、主キーを変更するのが一番の回答何だろうなぁ。
```

``` txt : 解説
とくにない。
SUMはGROUPBYしなくても合計が取れるのと、EXISTS出なくても相関福問い合わせできるって事を改めて知った事ですかね。
後は、INSERT INTO のSELECT構文と省略構文を改めて復習したいなって思いました。
```

---

## 組み込みシステム 学習機能付き赤外線リモートコントローラの設計

出来た気はしなかったけど、案外当たっていたのでびっくりしている。  
うれしいけど、もっと点を延ばせたところがあるのでそこは悔しい。  

しかし、今回も光と周波数の問題だった。  
前のは健康器具の問題だっけか。  
組み込みをやるなら割けては通れない道と見て良さそうだな。  
基本的な部分が怪しかったりしたので、しっかりやっていきたい。  
計算問題があっていたのは素直にうれしかった。  

因みにこの問題が印象に残っている問題だ。  
試験の時だろうか。  
ちょっとだけ問題をみて、フィルターの選択肢が全くわからないことを確認したのですぐに別のをやった記憶がある。  
元年の問題だったか。  

``` txt : 回答 30分 6/9
60 * 10^-3
350 * 10^-6

60 / 350

## 1
1: 171
2: ウ


## 2
1: 5
2
a: ON
b: OFF


## 3
1
c: ONイベント
d: T[N] × 今回値

2: 今回の長さが前回の長さより短い時 0% ×
→ カウント値が0に戻った時

3: T[N]を-1倍する 100%???
→T[N]に65535を可算する
```

``` txt : 解説
## 1
1:
問題文の〔赤外線リモコンの信号〕には、「制御パターンは最大60ミリ秒で完了する。一つの制御パターンの中で、ON状態及びOFF状態の最短時間はそれぞれ350マイクロ秒である。」という記述があります。
一つの制御パターンにおけるON状態とOFF状態の合計の最大となるのは、60ミリ秒の間にON状態及びOFF状態が最短時間で繰り返された場合です。
このとき記録される状態の数は、次の式で求めることができます。

60ミリ秒÷350マイクロ秒
＝60,000マイクロ秒÷350マイクロ秒
＝171.428571…回

整数で答えることになっているので、小数点以下を切り捨てた「171個」が適切です。
∴171

2:
UVフィルタ :: 紫外線を遮断する
ハイパスフィルタ :: 遮断周波数（カットオフ周波数）よりも高い信号成分を通す
バンドフィルタ :: 必要な周波数帯域の信号成分を通す
ローパスフィルタ :: 遮断周波数よりも低い周波数よりも低い信号成分を通す

赤外線センサは、赤外光から38～40kHzの信号成分を取り出すので、特定周波数帯域だけを通す「バンドフィルタ」の使用が適切です。
∴ウ：バンドフィルタ



## 2
1:
図3「制御パターン抽出プログラムのフロー」では、開始直後に setTimer(5000) の処理を行い、5,000ミリ秒のタイマを設定しています。
学習対象リモコンで何の操作も行われない場合は、ONイベント及びOFFイベントが通知されることはないので、
waitEvent() が最初に受信するイベントは開始から5,000ミリ秒後のタイマイベントとなります。

タイマイベントを受信すると、[c]が含まれる分岐でされると No に分岐し、rst にFalseが設定されて、制御パターン抽出処理は終了します。
このとき開始から終了までの時間は、5,000ミリ秒＝5秒です。

∴5

2:
〔a、bについて〕
状態名ですので、ONまたはOFFが入ります。

問題文の「最初に通知されたイベントがOFFイベントのときは，変数 rst にFalseを設定する。」という記述から、一つの制御パターンは必ずON状態から始まることがわかります。
本プログラムでは「ON状態の長さ及びOFF状態の長さを，添字が0から始まる配列 T[] に格納する」ので、
T[0]にはON状態の長さ、T[1]にはOFF状態の長さ、T[2]にはON状態の長さ、…という順序で格納されていきます。
すなわち、偶数番目にはON状態の長さが、奇数番目にはOFF状態の長さが入ります。

kを整数とすると、T[2×k] は配列Tの偶数番目の要素、T[2×k＋1] は、配列Tの奇数番目の要素になるので、aにはON(状態)、bにはOFF(状態)が入ります。

∴a＝ON
∴b＝OFF


## 3
1:
〔cについて〕
図3「制御パターン抽出プログラムのフロー」では、waitEvent() の受信したイベントが[c]の場合に、T[N]へON状態またはOFF状態の長さの記録などを行っています。一方で、イベントが[c]ではない場合は、rst にFalseの代入などを行い、制御パターンプログラムを終了します。これらのことから、図3「制御パターン抽出プログラムのフロー」の最初の分岐では、制御パターンの記録が開始できる状態になったかどうかの判定を行っていることわかります。

本文中では「最初に通知されたイベントがOFFイベントのときは，変数 rst にFalseを設定する。」、「学習対象リモコンの赤外光が一定時間検出されないときは，変数 rst にFalseを設定する。」とあり、最初に通知されたイベントがOFFイベントまたはタイマイベントの場合には、制御パターンの記録を行わずにプログラムを終了することなっています。つまり、制御パターンの記録を開始するのはイベントが「ONイベント」のときだけです。よって、[c]にはONイベントが入ります。

∴c＝ONイベント

〔dについて〕
T[N]に格納される値が「今回値－前回値」であることからもわかるように、前回のカウントと今回のカウントの差を状態の長さとしています。次回の記録時には、今回のカウントを前回のカウントとして使うことになるので、次のループ処理に移る前に前回値を今回値で更新する処理が必要です。

∴今回値

2:
問題文には、「カウンタは16ビットで1マイクロ秒ごとにカウント値が1加算され、カウント値が65,535に達すると、次のカウントで0に戻る。」という記述があります。このことから、カウンタが0に戻った後に「今回値 ← getCount()」が行われた場合には、今回値が前回値よりも小さくなり、T[N]が負数になることがわかります。例えば、前回値が65,000→（カウントが65,535を超えて0に戻る）→今回値が1,000→T[N]が-64,000となるようなケースです。

∴カウント値が0に戻ったとき

3:
図3中の下線②は、図3中の下線① T[N]<0 が Yes の場合に実行する処理です。設問3の(2)で述べたように、T[N]<0 が Yesの場合とは、カウンタが0に戻った場合のことです。
カウント値が65,535に達すると次のカウントで0に戻るので、2値の正しいカウント差は次のようになります。

つまり、T[N]が負数となったときは、T[N]に65,536を加えてやれば正しいカウント差となります。
よって、補正処理の内容は「T[N]に65,536を加算する」が適切です。
なお、本問では制御パターンの最大が60ミリ秒＝60,000マイクロ秒、カウンタの最大値が65,535なので、0に戻った後、何もイベントが通知されることなく再び0に戻ることはありません。
したがって、カウンタが2周以上したケースを考える必要はありません。

∴T[N]に65,536を加算する

↑やっぱりこの問題外れだよな。何をもって100%と認定されたのか謎である。
後2^16は65536なのも覚えておけよな。  
```
