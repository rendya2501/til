# 平成26年春季

---

## セキュリティ

---

## プログラミング 循環小数の循環節を検出するアルゴリズム

簡単なほうだと思うのだが、びっくりするくらい当たらなかった。  
表現の問題もあるが、やはり計算量の問題は当たらない。  
それと正解と思っていた問題が間違っていたので、勘違いもあったのかも。  
わかったからと言って、油断してはならないいい例だったな。  
どうでもいいが、問題自体は面白かった。  

解説を見てみるとなんでこんな頓珍漢な回答をしたのか不思議でならない。  
計算量の部分は仕方ないにしても、プログラミングの部分は普通に全問正解できたはず。  
できるところはできているので、もっと訓練を積んで余裕をもって答えられるようになっていきたい。  

``` txt 30分 2/9 実質5門正解
mとpが等しい × mがpと等しい
p ← amari(p * 10 , n) × p ← 1
mとpが等しくない × mがpと等しくない
t ← 1 × t ← s

4
3
→実際にトレースして問題なかったので特になし

戻り値はすべて0になる × s,tともに0である。
→部分点くらいはもらえるだろう

4 × O(1)
O(log n) × O(n)

---
[1]

〔イについて〕
プログラムの14行目から20行目までは、図4で示されている「循環節の先頭の検出」の処理に該当します。このフェーズでは「カメは引き続き，ウサギは最初に戻って今度は両者とも1歩ずつ進む。」と説明されています。
pm03_7.gif/image-size:465×220
ウサギの位置を最初に戻すには、変数 p を初期値の1（分子を1）に戻す必要がありますが、プログラム中にはこの処理が記述されていません。よって、whileループの前処理をしている[イ]には「p ← 1」が入ります。

→
単純に最初の位置に戻すだけなら1を代入するだけでよかった。
これはプログラムの一番最初でやっていること。
なぜさらに余りを求めるようなことをしたのだろうか。


〔エについて〕
図6中の21行目から26行目までは、図5で示されている「循環節の末尾の検出」の処理に該当します。この処理については、本文中に「循環節の先頭を検出した後、図5に示すように、ウサギだけが再びカメと余りが一致するところ(〈9〉と《15》)まで1歩ずつ進むことによって、循環節の末尾を検出する。」とあります。whileループ内では、ウサギが1歩進むたびに変数 t を1増加させていますが、図5を見るとわかるように、変数 t は0からではなく循環節の先頭を基準に1ずつ増加させる必要があります。変数 t はプログラムの冒頭で0に初期化されたままなので、ここには循環節の先頭が格納されている変数 s を使って変数 t に基準位置を設定する処理が入ることが予想できます。

ここで、例示されている n=56 の末尾検出処理を考えてみます。
第2フェーズで循環節の先頭位置4を変数 s に求めた後、[エ]の直前で amari() を1回を実行してウサギの位置を一歩進めているので、whileループ開始時の変数 p は一致位置の次の位置（余り32）になっています。そこから余りが一致するまでウサギを進めると t には5が加算されることになります。
pm03_8.gif/image-size:493×222
変数 t の説明には、「n=56の場合は9」とありますから、変数 t の基準位置として循環節の開始位置である4を与えてやれば、「4＋5＝9」というように末尾位置を正しく求めることが可能です。よって、[エ]には「t ← s」が入ります。

→
循環のスタートからカウントしないと意味ないのに初期化してどーするって感じ。
プログラムだけ見たから惑わされた感じがする。



[4]

O(オーダ)記法は、実行時に処理するデータ量によってアルゴリズムの計算量がどの程度増加するか、という視点でアルゴリズムを評価するものです。[オ]は空間計算量、[カ]では時間計算量について問われています。

空間計算量
処理を達成するために必要な記憶領域の大きさ

時間計算量
処理を達成するために必要な時間

〔オについて〕
関数 junkan のプログラムが必要とする記憶領域の大きさを考えます。

必要とする記憶領域の大きさは、関数内で宣言する変数の数に依存します。
表1「関数junkanで使用する変数及び関数」より、関数junkanのプログラムでは、5つの変数を使用していることがわかります。変数の数は定数であり、与えられたnによらず一定です。計算量がデータ量に依存しない場合、O記法では「O(1)」と表します。

∴オ＝O(1)

〔カについて〕
関数 junkan のプログラムの計算量を考えます。

関数 junkan のプログラムは、「余りが一致するまで」「循環節の先頭の検出」「循環節の末尾の検出」の3つの繰返し処理で構成されています。循環節の桁数が最大 n-1 であることから、3つの処理のいずれも最大 n-1 回で計算可能です。計算量がデータ量nに比例する場合、O記法では「O(n)」と表します。

∴カ＝O(n)
```

---

## ネットワーク サブネットを活用したファイルの保護対策

パズルみたいな問題だったな。  
またIPの数で間違った。何故だ。  

それ以外は特に何もないかな。  
機器名を答えよって問題がさっぱりわからないから適当に「認証サーバ」って書いたけどまさか正解だったとは。  

この問題やってて思ったけど、ネットワークはトレンドがあると思う。  
IPの最大数とかIEEE802.1Xとか直近で出た問題を何回か繰り返している。  
この調子だと25年の問題ってやったとしても意味が内容な気がしてならない。  
だって、直近の傾向に関係なさそうなんだもん。  
ということで、25年の問題に関してはitecの参考書を読むだけで済ませることにします。  
それで知識と考え方だけ抽出できればいいなって思いました。  

``` txt 30分 : 9/10
190 × 191
エ

192.168.0.12
e2
OUT
ANY
22
IN

認証サーバ

ウ

---

[1]
図2「変更後のM社のネットワーク構成」より制作一課PCへのIPアドレス割当て範囲は 192.168.1.64～192.168.1.254 とわかります。
サブネットマスクは255.255.255.0なので下位8ビットがホストアドレス部です。下位8ビットのうち"0～63"までの64個と"255"は使用できないため、2^8＝256個から上記65個を減じた191個が割当て可能なホストアドレス数です。

∴191


[3]
M社のネットワークでは各課のPCがサプリカント、スイッチがオーセンティケータに相当します。しかし認証サーバを担う機器は存在しないため新たに導入する必要があります。

∴認証サーバ


[4]

表2より毎日のバックアップが必要な最大量は、
制作一課用FS…10Gバイト
制作二課用FS…5Gバイト
制作三課用FS…15Gバイト
M社全体では30Gバイトになります。

30Gバイトのデータを90分以内に転送するために最低限必要な帯域は、

　(30Gバイト＝240Gビット，90分＝5,400秒)

　240÷5,400＝0.04444≒44(Mビット／秒)

さらに転送効率が80%なので、

　44÷0.8＝55(Mビット／秒)

したがって約55Mビット／秒を上回り、かつ最も小さい60Mビット／秒が正解です。

∴ウ：60Mビット／秒

30Gバイト
240Gビット / 
3600 + 1800

30Mビット/s

```

---

## データベース 旅客船Web予約システムの構築

いえーい100点。  
しかも20分。  
この年のデータベースは簡単だな。  
特にいうことがない。  
最後の長文も考えてる事はほぼ同じだった。  
と、思ったら微妙に違ったけど、まぁ部分点はもらえるだろう。  

``` txt : 20分 9/9
## メモ

問題はログまでロールバックされている事か。
ログをトランザクションに含めないようには出来ないのだろうか。
それかロールバックしてからログに書き込めるようにするとか。
変数受けして、ロールバックしてからその変数の内容をログに書き込むなんて対処が出来ればいいけど、あくまで流れだからな。

トランザクションを開始する前と完了した後にログを記録するようにする。
流れと言えばこれくらいか？


a : -
運賃係数
ユーザID = :ユーザID
パスワードハッシュ値 = HASH(:パスワード)
COUNT(*)
座席クラス
B.座席クラス番号 = C.座席クラス番号
A.船便番号,A.船便名,C.座席クラス番号,C座席クラス名
トランザクションを開始する前と完了した後にログを記録するようにする 100%
他)操作ログ表への記録を予約受付処理とは別のトランザクションにする


[a]
〔aについて〕
顧客エンティティとWebユーザエンティティには共通の属性「顧客番号」があります。
この属性「顧客番号」は、顧客エンティティ側では主キーであり、顧客を一意に特定します。
また、Webユーザエンティティ側でも主キーであり、Webユーザを一意に特定します。
どちらののエンティティもある顧客番号につき一意のエンティティですから、同一の顧客番号をもつ複数のレコードが存在することはありません。
したがって、顧客エンティティとWebユーザエンティティのカーディナリティは1対1であり、[a]には「―」が当てはまります。

つまり、主キーが同じなら1対1になるってことだ。


[4]
図4を見ると、「トランザクションを開始」から「トランザクションをコミット／ロールバック」までに予約受付処理自体とその操作ログ表への記録がひとまとめになっていることがわかります。
トランザクションには原子性という性質があり、一連の処理全部が正しく実行されたか、全く実行されなかったかのどちらかの状態で終了しなけばなりません。
このため、予約受付処理が失敗した際のロールバックでは、予約表、予約明細表、座席表だけでなく、操作ログ表もトランザクション前の状態に戻ってしまいます。
これが処理失敗時に操作ログ表のレコードが記録されなかった原因です。

予約受付処理が失敗した際にも、操作ログを操作ログ表に記録するためには、操作ログの記録処理を予約受付処理のトランザクションから分離しなければなりません。
したがって、適切な対応策は「操作ログ表への記録を予約受付処理とは別のトランザクションにする」です。
実装上はエラーハンドリングを行い、例外処理の中でロールバック処理＋操作ログの記録を行うことになります。

∴操作ログ表への記録を予約受付処理とは別のトランザクションにする

→

流れっていうからこの中で何とかするもんだと思うじゃん。
トランザクションの外に出せる回答が許されるならそうしたさ。
これは問題が悪いな。
```

---

## 組込みシステム

---

## 情報システム開発 地図を利用するアプリケーションプログラムの設計

もっと正解できる問題だったが、結構認識に抜けが合って正答率を下げてしまった。  
応えているときにふんわりした手ごたえだと、それなりに間違えるのは当たり前か。  
解説を読んでみると、文中にそれなりのヒントが散りばめられているので、まじで問題文を読む練習というか、  
応用特有の読み方を徹底しないといけないなーって思う。  

とはいいつつ、全体的に難しいことは無かったので、解きやすかった部類ではある。

``` txt : 28分 5/9 実質6
1
1
住所
属性クラス × 位置
操作盤、画像 × 位置緯度、位置経度

メールを作成する画面へ × - メールを作成する画面へ
→反例に習っていなかった。privateを明記しないといけなかった。
定義だけが定められており、処理は記述されていない 100%
他)操作の定義だけ行われ、実装は行われない

アイコンの要素数 × アイコンリストの大きさ

操作盤           地図
||   操作盤を描く ||
|| ←────── ||
|| ------------→ ||

---

[1][3]
基本データ型を用いていること、地図クラスとアイコンクラスに共通する属性、複数の関連する属性という記述から、属性"位置緯度"と"位置経度"についての指摘であることがわかります。

緯度と経度は2つ合わせて1つの情報という側面があるので、2つの情報をまとめて管理するクラスを作り、値のチェック（緯度であれば-90≦0≦90、経度であれば-180≦0≦180）などを加えた方が堅牢なシステムとなります。クラス名としては"位置"、最低限持つべき属性としては"緯度"と"経度"が適切です。

∴クラス：位置
　属性：位置緯度，位置経度

→
あーそういうことね。
ちょっと何言ってるかわからなかったけど、そういうことね。
プリミティブ型を使ってこういう意味で使ってるよって情報があるからそれをクラスとしてまとめろ。
操作盤とアイコンはそうしてるだろって事か。


[3]
〔eについて〕
シーケンス図では以下の書式で繰返し処理を記述できます。
pm08_5.gif/image-size:301×113
図3を見ると"アイコンを描く"がループ処理になっています。拡大ボタンが押された場合、地図上の全ての要素を再描画する必要があるので、地図クラスが保持するアイコンごとに"アイコンを描く"操作を呼び出すことになります。地図上のアイコン数は地図クラスの属性"アイコンリスト"のサイズを参照すればわかるので、1から「アイコンリストの大きさ」まで当該処理を繰り返すことになります。

∴アイコンリストの大きさ
→
アイコンリストの文言は必要だったな。
ただ、要素数ってところは部分点もらえそうな気がするけどなぁ。


```
