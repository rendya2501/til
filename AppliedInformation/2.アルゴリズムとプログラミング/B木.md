# 木構造

主にインデックスや検索における概念としてHDDやRDBMSに応用されている。  

特徴

- 探索木の計算量は深さに依存する

## B木

<https://qiita.com/kiyodori/items/f66a545a47dc59dd8839#:~:text=B%2Dtree%E3%81%A8%E3%81%AF%E3%80%811,%E3%81%8B%E3%81%8B%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%9F%E3%82%81%E3%81%A7%E3%81%99%E3%80%82>  
<https://blog.h13i32maru.jp/entry/2012/07/01/000000>
<https://yottagin.com/?p=2765>  

    B木は、木構造のデータ構造に分類されます。１つの節が複数の子を持つことができる多分木をベースとし、根から葉までの深さがほぼ一定であるバランス木です。  

- 階層の深さが同じになるように，ノードの分割と併合を行う。  
- 索引部の各ノードのキー値を中心にして，小さい側のレコード数と大きい側のレコード数の比率が，ある範囲内に収まるように動的に再配置しながら格納する。

単純な二分探索木では、木の深さを揃えることができない場合がある。
これを解決するための手段がAVL木である。

これは深さを一定に保つための「回転」という操作を実装した木構造である。
木の深さは処理の速さに直結するので、深さを揃える操作は重要である。
しかし、今度は深さを揃える処理にも時間がかかる場合が出てきてしまう。

そこで登場するのがB木である。

---  

## B+木  

<https://www.ap-siken.com/kakomon/30_aki/q29.html>  

    B+木インデックスは、木の深さが一定で葉のみが値をもつ平衡木を用いたインデックスで、RDBMSのインデックス法として現在最も普及しています。  

- すべてのキー値が同じ深さにあるので、データ量が増加してもパフォーマンスの低下が少ない
- どのキー値に対してもランダム検索や範囲検索、挿入・更新・削除を効率よく行える特徴を持つ
- 全てのレコードは木の最下層（葉ノード）に格納され、内部ノードにはキーのみが格納される
- 葉に含まれている前後の葉へのポインタによって一致検索だけでなく、"<"，">"，"BETWEEN"などの範囲検索を効率よく行える
- オーダはデータ総件数がXなら**O(logX)**
- **データの分布に偏りがある場合や、NULL値及び否定を含む検索条件では効果を発揮できない**
