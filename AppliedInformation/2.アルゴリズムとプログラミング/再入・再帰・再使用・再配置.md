# 再入可能・再帰的・再使用可能・再配置可能について調べる

プログラムの特性に関する問題  

<https://snofra.hatenablog.com/entry/2018/09/06/004527>  
<https://stacked-tip.hateblo.jp/entry/20180210/1518263096>  

- **再入可能（リエントラント）**  

      プログラム内で使用する変数部分を各プロセスごとに割り当てることで、複数のプロセスで同時に使用できる特性。  

  リエントラントな処理とは、その処理を実行中に更に同じ処理が呼び出されたとしても、  両方の処理が正しく処理を完了できるプログラムということ。  

  1. ある処理を実行中にその処理自身が自分を呼び出す  
     →再帰処理
  2. ある処理を実行中に割り込みが入り、その割り込み処理がその処理を呼び出す  
     →純粋なリエントラント
  3. 別々の場所で同じ処理が呼び出される  
     →スレッドセーフと呼ばれる特性

  - **再入可能の3原則**
    - リエントラントなコードは、静的変数やグローバル変数を保持しない。
    - リエントラントなコードは自分のコードを書き換えない。
    - リエントラントなコードは、リエントラントでないプログラムやサブルーチンを呼び出さない。  

- **再帰的（リカーシブル）**  
  
      プログラム中において自分自身を呼び出すことができる特性。  

- **再使用可能（リユーザブル）**  
  
      主記憶へのプログラムの展開を初回実行時のみ行い、それ以降はロードせずとも何度でも正しく使用できる特性。  

  プログラムはメモリに格納されて処理される。処理が終わるとメモリから解放される。  
  サブルーチンのメモリへの格納と解放を繰り返すのは無駄なので、メモリに確保したまま複数のプログラムから使えればより効率的になる。  
  それが可能なのが再使用可能。  
  **再使用可能ということは再入可能で、再帰的である**と言える。
  逆に**メモリを確保したままで複数のプログラムから使えないパターンも存在する。それが逐次再使用可能という。**  
  ということで、**逐次再使用可能は再入可能ではない。**  
  逐次再使用可能なプログラムから再入可能なプログラムは呼び出せるけど、逆はダメな場合がある。  

  - **逐次再使用可能**  

        逐次再使用可能プログラムでは他のタスクが、終了したあとに再使用可能になるものであり、実行中はプログラムが終了するまで他のプログラムは待たされることになります。

- **再配置可能（リロケータブル）**  
  
      プログラムを主記憶上のどの位置においても正しく実行できる特性。  

  再使用の手前の話。  
  プログラムをメモリに格納する時、アドレス空間のどこに置くのかという問題がある。  
  アドレスAではうまく動くけど、アドレスAからアドレスBに移動したときにコンパイルエラーが発生するなんてことがあれば、プログラムとして安全性に欠ける。  
  そのため、メモリ上のどのアドレスに配置してもうまく動くことを担保する必要がある。  

![s](https://cdn-ak.f.st-hatena.com/images/fotolife/s/snofra/20180906/20180906003753.png)
