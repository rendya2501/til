# 真偽値関係

---

## 1件でもあれば1、なければ0を返すクエリ

初見でびっくりしたのでまとめる。  
`TOP 1 1`ってなんやねんと思ったけど、そういうことか。  

`SELECT 1 FROM [Table]`  
とすると、レコードの分だけ「1」が出力される。  
1件だけあればいいので、「TOP 1」する。  

1件もレコードがない場合は空白になるので、その場合はISNULLでキャッチできるので0とする。  

``` SQL
SELECT ISNULL((SELECT TOP 1 1 FROM [Table]) , 0 )
```

---

## SQLでTrue,Falseだけの判定を返す方法

IsExist系の検索する時は、True,Falseだけわかればいいので、それをやる方法をまとめる。  
COUNTが2以上の場合でもTrue扱いになる。
CONVERT,BITとは。
やってることは単純だが、補足が必要。  

``` SQL
-- 1件の有無で判定は十分なのでTOP1する。
SELECT TOP 1
CONVERT(BIT,COUNT([TestNumber])),
CAST (COUNT([TestNumber]) AS BIT)
FROM [Table]
WHERE [Code] = @code
```

---

## 値が入っているかNullか、をBoolに変換する

[What is the best way to convert an int or null to boolean value in an SQL query?](https://stackoverflow.com/questions/177956/what-is-the-best-way-to-convert-an-int-or-null-to-boolean-value-in-an-sql-query)  

``` SQL
SELECT 
    CASE WHEN ValueColumn IS NULL THEN 'FALSE' ELSE 'TRUE' END BooleanOutput 
FROM 
    table 
```
