# テーブル構造系

---

## テーブル構造を出力する

``` sql
EXEC sp_help [Table];
```

---

## テーブル構造を吐き出すクエリ

``` sql <https://kojimanotech.com/2020/09/13/252/>
EXEC sp_columns @table_name = 'TableName';
```

``` sql <https://lightgauge.net/database/sqlserver/3697/>
SELECT
     tbls.name AS table_name
    ,key_const.name AS constraint_name
    ,idx_cols.key_ordinal AS key_ordinal
    ,cols.name AS col_name
FROM
    sys.tables AS tbls
    INNER JOIN sys.key_constraints AS key_const ON
    tbls.object_id = key_const.parent_object_id AND key_const.type = 'PK'
    AND tbls.name = 'TableName'
    INNER JOIN sys.index_columns AS idx_cols ON
    key_const.parent_object_id = idx_cols.object_id
    AND key_const.unique_index_id  = idx_cols.index_id
    INNER JOIN sys.columns AS cols ON
    idx_cols.object_id = cols.object_id
    AND idx_cols.column_id = cols.column_id
```
