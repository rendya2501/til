# バッチまとめ

---

## コメント

``` batch
rem [コメント]
: [コメント]
:: [コメント]
```

[バッチファイルでコメントを使用する](https://jj-blues.com/cms/wantto-usecommentout/)  

---

## remでもエラーとなる

2バイト文字で2行以上の処理の場合警告が表示される。  

対処法  
ダブルコーテーションで囲えばよい。  

``` batch
@echo off
rem 自己完結型でバンドルを発行する
rem 自己完結型でバンドルを発行する

pause > nul
```

上記バッチを実行すると以下のような警告が表示される。  
どちらもダブルコーテーションで囲えば解決する。  

``` txt
'ｧ繝舌Φ繝峨Ν繧堤匱陦後☆繧・' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。
```

[UTF-8のバッチファイルが文字化けする時の対処3選](https://nayutari.com/batch-utf8)  

---

## y押したら押した時刻を出力するサンプル

``` batch
@echo off

REM "今日の日付"
SET NOWDATE=%date:~-10,4%%date:~-5,2%%date:~-2,2%
SET OUT_LOGFILE=Logfile_%NOWDATE%.txt

cd /d %~dp0 >> %OUT_LOGFILE%

set /P USR_INPUT_STR="データ移行を行いますがよろしいですか？(Y/N) " 
if /i %USR_INPUT_STR% neq y goto cancel

echo *---------------------------------------* >> %OUT_LOGFILE%
set time_tmp=%time: =0%
set now=%date:/=%%time_tmp:~0,2%%time_tmp:~3,2%%time_tmp:~6,2%
echo 開始 : %now% >> %OUT_LOGFILE%
echo *---------------------------------------* >> %OUT_LOGFILE%

:cancel
echo.
echo.
echo 処理を中止しました。
goto :end

pause
```
