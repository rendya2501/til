# バッチまとめ

---

## コメント

``` batch
rem [コメント]
: [コメント]
:: [コメント]
```

[バッチファイルでコメントを使用する](https://jj-blues.com/cms/wantto-usecommentout/)  

---

## remでもエラーとなる

2バイト文字で2行以上の処理の場合警告が表示される。  

対処法  
ダブルコーテーションで囲えばよい。  

``` batch
@echo off
rem 自己完結型でバンドルを発行する
rem 自己完結型でバンドルを発行する

pause > nul
```

上記バッチを実行すると以下のような警告が表示される。  
どちらもダブルコーテーションで囲えば解決する。  

``` txt
'ｧ繝舌Φ繝峨Ν繧堤匱陦後☆繧・' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。
```

[UTF-8のバッチファイルが文字化けする時の対処3選](https://nayutari.com/batch-utf8)  

---

## for文内で変数を利用する場合の注意

forブロック内では基本的に変数は使えない。  
使いたい場合は遅延環境変数という仕組みを利用する。  
変数を使用する場合 `%` で囲うのではなく、 `!` で囲う。  

例 :  
× `%arg%`  
○ `!arg!`  

[batファイルでfor文内に変数を利用する場合の罠 | なたで日記](https://blog.natade.net/2018/10/06/windows-bat-%E9%81%85%E5%BB%B6%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0-for-if/)  

---

## 新しいターミナルを開いて、exeを実行する

バッチをダブルクリックしたらexeをターミナルを開いた状態で実行したい。  

コンソールアプリのexeはダブルクリックの場合、すぐに閉じてしまうので、ターミナルから実行して常に画面に表示させたい。  
exeの発行先が別にあるので、exeを発行するバッチの隣に実行バッチを置いて実行したかった。  

``` bat
@echo off

cd .\Bundle\win\
call cmd /k "Bundle.exe"
```

[コマンドプロンプト cmd - [新しいインスタンスを開始する]](https://www.k-tanaka.net/cmd/cmd.php)  
