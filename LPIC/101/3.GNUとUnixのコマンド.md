# GNUとUnixのコマンド(主題103)

## コマンドラインでの作業 1

コマンド実行履歴を保存するファイル名を格納する環境変数は？
HISTFILE


 コマンド履歴の**最大数**を格納する環境変数は?
HISTSIZE


コマンド**実行履歴**保存ファイルの**最大記録数**を設定する環境変数は？
HISTFILESIZE


ホスト名を格納する環境変数は?
HOSTNAME
→
単純にHOSTってだけにしたくなる。


 現在の環境変数PATHに「/usr/local/test」ディレクトリを追加したい。
  下線部にあてはまる語句は?
  $ export PATH=____________________
$PAHT:/usr/local/test
→
なぜか覚えた。


  command1を実行し、command1が失敗した場合のみcommand2を続けて実行させたい。
  下線部にあてはまる語句は?
  command1 __ command2
||
→
C#の短絡演算シリーズ


  command1を実行し、続けてcommand2を実行させたい。
  ただし、command1が失敗した場合はcommand2を実行しないこととする。
  下線部にあてはまる語句は?
  command1 __ command2
&&
→
C#の短絡演算シリーズ」


  command1を実行し、続けてcommand2を実行したい。
  なお、command1の実行結果はcommand2を実行するか否かには関係しない。
  下線部にあてはまる語句は?
  command1 __ command2
;
→
まぁC#で1行で書きたい時は無理してこう書くかなって感じ。



設定されている全ての環境変数を一覧表示できるコマンドは?
  (アルファベット順に3つ)
env
printenv
set
→
それぞれの違いをまとめたい。

---

## コマンドラインでの作業 2

 bashシェルで実行したコマンドの履歴を保存するファイルは?
  （ファイル名のみ）
.bash_history
→
参考書に乗っていなかった。
乗ってない物を解けるはずがないでしょう。


 現在ログインしているユーザはtestである。testユーザのホームディレクトリに移動するコマンドは?
  (短い順に3つ)
cd
cd ~
cd ~test


  現在ログインしているユーザはrootである。
  testユーザのホームディレクトリに移動するコマンドは?
cd ~test
→
チルダ ユーザー名でそのユーザーのホームディレクトリに移動できるっぽい。

  ホームディレクトリに\workディレクトリを作成するコマンドは？
  （シングルクォーテーション、ダブルクオーテーションは使わないこと）
mkdir ~/\\work
→
エスケープをエスケープする。


  passwdというキーワードと完全に一致した名前を含むmanページを検索するコマンドは?
  (アルファベット順に2つ)
man -f passwd
whatis passwd
→
whatisコマンド
Linuxのコマンドを検索するためのコマンド
man -fと同じ動作をする。
完全一致検索


  sambaというキーワードを一部に含むmanページを検索するコマンドは?
  (アルファベット順に2つ)
apropos samba
man -k samba
曖昧検索はこっち。
aproposなんて微妙なコマンドだなぁ・・・。


 whatisデータベースを作成するコマンドは?
makewhatis
→
なぜか覚えてた。


  以下はhistoryコマンドを実行した結果である。
  「cat hoge.txt」を再実行するには？（記号と数字で）
!3
→
これもなぜか覚えていた。

---

## フィルターを使用してのテキストストリーム処理 1

cut
-c 取り出す文字位置
-d デリミタ
-f フィールド

paste
-d デリミタ

sort
-b 先頭の空白は無視する
-f 大文字小文字を区別しない
-r 降順
-n 数値として処理
-k フィールドの指定?
-t 区切り文字

split
-行数

wc
-c
-l
-w

uniq
-d 連続した重複業のみ(depulicate)
-u 連続して重複していない行のみ(undepulicate)
デフォ 重複行を1行にして表示

xargs


 「file」ファイルの行数、単語数、文字(バイト)数を表示したい。
  適切なコマンドは?
  (オプションは省略する事)
  wc file


 「file」ファイルの行数のみを表示したい。適切なコマンドは?
wc -l file

file」ファイルの文字(バイト)数のみを表示したい。適切なコマンドは?
wc -c file



  「file」ファイルの3番目のフィールドを基準に、大文字、小文字を区別せずに降順でソートしたい。
  区切り文字は「,」（カンマ）とする。適切なコマンドは?
  (オプションはアルファベット順にそれぞれ指定)
sout -f -k 3 -r -t , file


 「file」ファイルの2番目のフィールドを基準に、数値として昇順にソートしたい。
  区切り文字は「,」（カンマ）とする。適切なコマンドは?
  (オプションはアルファベット順にそれぞれ指定)
sort -k 2 -n -t , file


  「:」で区切られている「/etc/passwd」ファイルの1番目と7番目の
  フィールドを取り出して表示したい。適切なコマンドは?
  (オプションはアルファベット順に指定)
cut -d : -f 1,7 /etc/passwd


  「file」ファイルの各行の2番目の文字を取り出して表示したい。
  適切なコマンドは?
cut -c 2 file


 「file」ファイルにある連続して重複した行を1行にまとめて、「newfile」ファイルに出力したい。
  適切なコマンドは? なお、「file」ファイルはソートされている。
uniq file newfile


  「file」ファイルにある連続した重複行のみを表示したい。適切なコマンドは?
  なお、「file」ファイルはソートされている。
uniq -d file


  「file」ファイルにある連続して重複していない行のみを表示したい。適切なコマンドは?
  なお、「file」ファイルはソートされている。
uniq -u file


  「file」ファイルを500行ごとに分割したものを別のファイルに保存したい。
  また、保存するファイル名は「hogeaa」、「hogeab」などのようにしたい。
  適切なコマンドは?
  (-lオプションを使わずに行数を指定する書式で)
split -500 file hoge


「/bin/ls」ファイル(lsコマンドのバイナリファイル)の内容を16進数で表示したい。
  適切なコマンドは?
od -t x /bin/ls


  「/bin/ls」ファイル(lsコマンドのバイナリファイル)の内容を8進数で表示したい。
  適切なコマンドは? (オプションを省略しない事)
od -t o /bin/ls


 「/bin/ls」ファイル(lsコマンドのバイナリファイル)の内容をASCII**文字**とエスケープ**文字**で表示したい。
  適切なコマンドは? (オプションを省略しない事)
od -t c /bin/ls
→
-tは出力するフォーマットを指定する。

---

## フィルターを使用してのテキストストリーム処理 2

cat
-n 行番号
-b 行番号を付け加える。ただし空白行には付けない(--number-nonblank)

nl
-b ボディー
-h ヘッダー
-f フッター
a すべての行
f 空白以外の行
n 行番号の不可を中止

head
-n 行数
-行数
-c バイト数

tail
-n 行数
-行数
-c バイト数
-f リアルタイム出力

tr
標準入力から読みこまれた文字列の変換や削除
tr [オプション] [文字列1 [文字列2]]
-d 削除
-s 連続するパターン文字列を1文字として処理
[:plpha:]
[:lower:]
[:upper:]
[:digit:]
[:alnum:]
[:space:]

md5sum
sha1sum
sha256sum
sha512sum
-c,--check 実際のファイルと照合


 「/var/log/messages」ファイルに追記されるログをリアルタイムで表示したい。
  適切なコマンドは?
tail -f /var/log/messages


  trコマンドを使用して「file」ファイル内の英小文字を英大文字に変換して表示させたい。
  適切なコマンドは?
  (リダイレクトを使用し、文字クラスは使用しない事)
tr a-z A-Z < file


  trコマンドを使用して「file」ファイル内にある文字「c」を削除したい。適切なコマンドは?
  (1つ目はリダイレクト演算子、2つ目はcatコマンドとパイプを使用する事)
tr -d c < file
cat file | tr -d c


  trコマンドを使用して、「file」ファイル内でスペースが連続している場合、
  スペース1つに置き換えて表示させたい。適切なコマンドは?
  (1つ目はリダイレクト演算子、2つ目はcatコマンドとパイプを使用する事。また両方とも文字クラスを使用する事。)
tr -d [:space:] < file
cat file | tr -d [:space:]


  catとtrコマンドを使用して、「file」ファイル内の英小文字を英大文字に変換して表示させたい。
  適切なコマンドは?
  (パイプおよび文字クラスを使用する事。リダイレクト演算子は使用しない)
cat file | tr [:lower:] [:upper:]


 「checksum.txt」に記載されているファイル名とMD5メッセージダイジェストの一覧を読み込み、
  実際のファイルと照合したい。
  下線部に入るオプションは?（短い方から先に2つ）
  md5sum ____________ checksum.txt
-c
--check


 trコマンドで使用する文字クラスのうち、数字を表すものは?
[:digit:]


  「file」ファイルの先頭5行を表示したい。適切なコマンドは?
  (オプションが短い方から先に2つ)
head -5 file
head -n 5 file
→
-nオプションを付けた場合、数字の頭にハイフンは付けないことに注意。


  「file」ファイルを行番号をつけて出力したい。適切なコマンドは?
  なお、行番号は空行を除いた行に付けることとする。
  (アルファベット順に2つ。省略可能なオプションは省略する)
cat -b file
nl file
→
-bは教科書に乗っていないが、空行なしで行番号表示らしい。
nonblank
nlはデフォルトでは、空白行には行番号を付与しません。


  「file」ファイルを行番号をつけて出力したい。適切なコマンドは?
  なお、行番号は空行を含めた全ての行に付けることとする。
  (アルファベット順に2つ)
cat -n file
nl -b a file
→空行を含める場合、-bとaのオプションは必要なんだな。
nlはデフォルトでは、空白行には行番号を付与しないので、逆に空白行の指定をしないといけない。


「file」ファイルの末尾500バイトを表示したい。適切なコマンドは?
tail -c 500 file


  「/var/log/messages」ファイルに追記されるログをリアルタイムで表示したい。
  適切なコマンドは?
tail -f /var/log/messages

---

## 基本的なファイル管理 1

lsコマンド
-a 隠しフォルダも表示する
-A 隠しフォルダ+「.」「..」は表示しない
-d ディレクトリ自身の情報
-F ファイルの種類を表示
-i inode番号を表示
-l 詳細情報表示→小文字のエル注意
-t 日付順に表示
-h 単位付きで表示
-R サブディレクトリの内容も再帰的に表示する

cpコマンド
-f
-i
-p コピー元の属性を保持したままコピー
-r,-R
-d
-a

mvコマンド
-f
-i

mkdirコマンド
-m
-p

rmコマンド
-f
-i
-r,-R

rmdirコマンド
-p

touchコマンド
ファイルのタイムスタンプを更新する。
-t
-a
-m

fileコマンド
ファイルの種別を表示(テキスト、バイナリ、実行ファイル、画像、ディレクトリなど)


  「file」ファイルのタイムスタンプを現在の時刻に変更したい。適切なコマンドは？
touch file


 lsコマンドのオプションのうち、詳細情報を表示するオプションは？
-l
→大体iなので、間違えた。iはinodeです。
大文字のIかと思ってたら小文字のlだった紛らわしい。


  「/home」ディレクトリの詳細情報のみを表示させたい。適切なコマンドは？
  (オプションはアルファベット順にまとめて指定)
ls -dl /home
→ディレクトリなのでdを付けること。大文字のIじゃなくて小文字のlですので注意。


  あるコマンドを入力すると「file」ファイルのinode番号などの詳細情報が
  出力された。
  空欄に入るコマンドは?
stat
→なんだこれ。教科書に乗ってないわ。
statコマンド
ファイルの属性や日付などを表示


  rmdirコマンドを使用してカレントディレクトリ内にある「dir」ディレクトリと、
  その子ディレクトリの「dir/dir2」を削除したい。適切なコマンドは？
rmdir -p dir/dir2
→再帰的かと思いきや、単純にそうでもない。
これは子から親を消すオプションなので、階層を指定しないといけない。
-pオプションがあるのはディレクトリ系(rmdir,mkdir)。


lsコマンドのオプションのうち、ファイルタイプをつけて表示するオプションは？
-F
→大文字注意。
list segment


 lsコマンドのオプションのうち、サブディレクトリの内容も再帰的に表示するオプションは？
-R
→とことん大文字に苦しめられるな。
-rはreverse、反転だそうです。

---

## 基本的なファイル管理 2

gzipコマンド
-d decompress
-c output
-r recurcive
gunzipコマンド
zcatコマンド
展開して標準出力

bzip2コマンド
-d decompress
-c compress_to_output
bunzip2コマンド
bzcatコマンド
展開して標準出力

xzコマンド
-d decompress
-k keep
-l list 一覧表示、情報確認
unxzコマンド
xzcatコマンド
展開して標準出力

tarコマンド
-c アーカイブの作成
-x アーカイブの展開
-t アーカイブの内容を一覧表示
-f ファイル名 アーカイブファイル名の指定
-z gzipによる圧縮と展開
-j bzip2による圧縮と展開
-J xzによる圧縮と展開
-v 詳細表示
↓存在感がない
-u アーカイブ内にある同名のファイルより新しいものだけを追加する(?)
-r アーカイブにファイルを追加
-N 指定した日付より新しいデータのみを対象にする(?)
-M 複数デバイスへの分割を行う(?)
--delete アーカイブからファイルを削除する

cpioコマンド
cpio フラグ [オプション]
-i アーカイブを展開
-o アーカイブを作成
-p

-A
-d
-r
-t
-v

ddコマンド
if=
of=
bs=
count=


  bzip2形式で圧縮された「file.bz2」ファイルを展開して標準出力へ送信するコマンドは?
  （コマンドのオプション無しで答えよ）
bzcat


 「dir.tar」というアーカイブの内容を表示できるコマンドは？
  なお、アーカイブは展開せず、詳細情報を表示すること。
  (オプションは、「-」を省略しアルファベット順にまとめて指定)
tar ftv dir.tar
→
vは詳細表示。
fはアーカイブファイルの指定
tはアーカイブの内容の確認。


  「aa」「bb」「cc」の3ファイルを1つにまとめて「hoge.tar」というアーカイブにしたい。
  適切なコマンドは？(オプションは、「-」を省略しアルファベット順にまとめて指定)
tar cf hoge.tar aa bb cc
→
fはアーカイブファイルの指定。


 「file」ファイルをbzip2形式で「file.bz2」というファイルに圧縮したい。
  また、圧縮前の元ファイルも残したい。適切なコマンドは？
bzip2 -c file > file.bz2
→
<https://ang.tokyo/linux-zip/>
どうも、標準出力すると元ファイルは残るらしい。
cコマンドにそういう機能があるとはっきり明言しているサイトがどこにもないけど、多分そうなんだろう。
逆に、なぜその程度の情報がどこにも乗っていないのだろうか。
それと、-k があるのはxzコマンドだけなので、bzip2 -k fileは間違いです。


 cpioコマンドのオプションのうち、アーカイブを展開するオプションは？
-i
→input?


cpioコマンドのオプションのうち、アーカイブを作成するオプションは？
-o
→output?


 xz形式の圧縮ファイル「file.xz」の情報を確認したい。
  適切なコマンドは？
xz -l file.xz


  gzip形式で圧縮したアーカイブファイル「test.tar.gz」の内容を展開せずに表示したい。
  下線部にあてはまる適切なgzipコマンドは？
  (オプションはアルファベット順にまとめて指定)
  __________ test.tar.gz | tar ftv -
gzip -cd
→output,decompress 標準出力かつgzファイルの解凍


  xz形式で圧縮したアーカイブファイル「dir.tar.xz」をカレントディレクトリに展開したい。
  適切なコマンドは？
  (オプションは、「-」を省略しアルファベット順にまとめて指定)
tar fJx dir.tar.xz
→
f アーカイブファイル名の指定
J xzファイルの展開
x アーカイブの展開


 「file」ファイルをgzip形式で「file.gz」というファイルに圧縮したい。
  また、圧縮前の元ファイルも残したい。適切なコマンドは？
gzip -c file > file.gz
→
cpioでなくても、cオプションで標準出力可能。
cオプションは元ファイルを残す。


  gzip形式で圧縮したアーカイブファイル「test.tar.gz」の内容を展開せずに表示したい。
  また、処理の詳細情報も表示したい。下線部にあてはまる適切なtarコマンドは？
  (オプションは、「-」を省略しアルファベット順にまとめて指定)
  __________ test.tar.gz
tar ftvz
→
tは一覧表示。--list扱い。なぜlにしなかったのか。


現在のディレクトリにあるworkdirをxzで圧縮されたtarアーカイブ（ファイル名：foo.tar.xz）にしたい。
適切なコマンドは？(オプションは、「-」を省略しアルファベット順にまとめて指定)
tar cfJ foo.tar.xz workdir
→
c まずアーカイブ
J それからxz圧縮
f アーカイブファイルの指定
先にアーカイブファイル名、その後に対象ファイル名。


gzip形式で圧縮したアーカイブファイル「dir.tar.gz」をカレントディレクトリに展開したい。
適切なコマンドは？
(オプションは、「-」を省略しアルファベット順にまとめて指定)
tar fxz dir.tar.gz


「backup.cpio」というcpio形式のアーカイブからファイルを展開するコマンドは？
cpio -o < backup.cpio
→
標準入力しか受け付けないので、リダイレクトに注意。


「boot.img」というイメージファイルをフロッピーディスク(/dev/fd0)にコピーしたい。
適切なコマンドは？
dd if=boot.img of=/dev/fd0
→
srcとdstはif=,of=で指定することに注意。


gzip形式で圧縮された「file.gz」ファイルを展開して標準出力へ送信するコマンドは?
（コマンドのオプション無しで答えよ）
zcat
→
コマンドのオプションなし系は○○catであることに注意。


「file.xz」ファイルを展開するコマンドは？
(アルファベット順に2つ)
unxz file.xz
xz -d file.xz
→
tar J file.xzは違う見たい。


「file.bz2」ファイルを展開するコマンドは？
(アルファベット順に2つ)
bunzip2 file.bz2
bzip2 -d file.bz2


「hoge.tar」というアーカイブを展開したい。適切なコマンドは？
(オプションは、「-」を省略しアルファベット順にまとめて指定)
tar fx hoge.tar


「dir」ディレクトリを、bzip2形式で圧縮した「dir.tar.bz2」というアーカイブにしたい。
適切なコマンドは？
(オプションは、「-」を省略しアルファベット順にまとめて指定)
tar cfj dir.tar.bz2 dir


xz形式で圧縮された「file.xz」ファイルを展開して標準出力へ送信するコマンドは?
（コマンドのオプション無しで答えよ）
xzcat

---

## ストリーム、パイプ、リダイレクトの使用


終了文字が現れるまで、コマンドの標準入力に入力を続けるリダイレクト演算子は？
<<


標準入力に文字列を送ることが出来るリダイレクト演算子は？
<<<


  「sh test.sh」コマンドを実行した時に出力される標準出力と標準エラー出力の
  両方を既存の「log」ファイルに追記したい。適切なコマンドは？
  （標準エラー出力先を変更すること）
sh test.sh >> log 2>&1


 コマンドの標準出力先をディスプレイからファイルに切り替えることが出来る
  リダイレクト演算子は？(短い方から先に2つ)
\>
\>>
→
追記、上書き関係なく、単純にファイルになればよろしい。
1>って書く必要はなかった。


 コマンドの標準エラー出力先をディスプレイからファイルに切り替えることが出来る
  リダイレクト演算子は？(短い方から先に2つ)
2>
2>>
→これも単純にファイルに向けば、追記、上書き関係ない問題。


コマンドの標準エラー出力を標準出力にリダイレクトするリダイレクト演算子は？
2>&1
→
○○エラーを○○出力にって場合は2>&1か1>&2しかない。

 コマンドの標準出力を標準エラー出力にリダイレクトするリダイレクト演算子は？
  (省略しないこと)
1>&2


 trコマンドを使用して、「file1」ファイル内の連続した「#」を1つに置き換えて
  「file2」ファイルに出力したい。適切なコマンドは？
  （パイプを使用せずにリダイレクト演算子のみを使用すること）
tr -s '#' < file1 > file2
→
tr -s は連続したパターン文字列を1文字として処理する


catコマンドとリダイレクト演算子2つを使用して「file」ファイルの内容を、
  既存の「hoge」ファイルに追記したい。適切なコマンドは？
cat < file >> hoge
→
追記なのか、上書きなのか、キーワードに注意すること


 catコマンドとリダイレクト演算子を1つ使用して「file」ファイルの内容を、
  既存の「hoge」ファイルに追記したい。適切なコマンドは？
cat file >> hoge


 teeコマンドを使用する際、標準入力の内容を標準出力に出力すると共に
  ファイルに追記したい。適切なオプションは？
-a
→なぜか正解した。teeコマンドのオプションはこれしかない。
まぁ、addと覚えやすいので問題ないかな。


 dmesgコマンドの標準出力を、ディスプレイに表示すると共に「log」ファイルに保存したい。
  適切なコマンドは？
dmesg | tee log
→
ファイル名を指定すれば書き込んでくれる。間にパイプラインは必要ない。


 「file」ファイルに記載されているファイル名を元に、複数の新規ファイルを
  一度に作成したい。適切なコマンドは？
  （使用するコマンドはxargs/cat/touchの3つ。リダイレクト演算子は使用しない）
→
cat file | xargs touch
→|(パイプライン)はリダイレクト演算子ではない。
xargs コマンド
この書き方を覚えれていれば、自然と正解出来たのかもね。
xargsは標準入力をコマンドの引数に渡して実行するコマンドだから、これ以外あり得ないか。

---

## プロセスの作成、監視、終了

killコマンド
プロセスIDを指定してシグナルを送るコマンド。
kill -[シグナル名またはシグナルID] PID
kill -s [シグナル名またはシグナルID] PID
kill -SIGシグナル名 PID
1
2
9
15
18
19
20

killallコマンド
プロセス名を指定してシグナルを送るコマンド。
killall -[シグナル名またはシグナルID] プロセス名
killall -s [シグナル名またはシグナルID] プロセス名
killall -SIGシグナル名 プロセス名

pkillコマンド
プロセス名を指定してシグナルを送るコマンド。
-u ユーザ名
-g グループ名


フォアグラウンドで実行中のジョブを一時停止したい。
どのキーを押下する必要があるか？
Ctrl+Z


以下のコマンドを実行した。プロセスID「1234」に送られるシグナル名は？
（シグナル名は略さずに大文字で）
$ kill 1234
SIGTERM


psコマンドのオプションのうち、完全なフォーマットでプロセスを表示するUNIXオプションは？
-f


プロセスIDが10のプロセスをクリーンアップせずに強制的に終了させたい。
適切なコマンドは？(-sオプションを併用し、シグナル名は略さずに大文字で)
kill -s SIGKILL 10
→-s指定でもSIGまで入れられるんですね。


「ping local > log」コマンドをログアウト後もバックグラウンド
で実行し続けたい。適切なコマンドは？
nohup ping local > log &
→最後に&を付けるのが肝。


プロセスを一時停止するシグナルは？(省略した形、大文字で。アルファベット順に2つ)
STOP
TSTP
→省略だの何だの、指定がうぜーんだよ。しね。


 「killall mycom」コマンドと同等のコマンドを、シグナルを指定して実行したい。
  以下の下線部を埋めなさい。なお、-sオプションを必ず併用する事。
  （短い順に3つ。シグナル名の場合は大文字で）
  killall _____ mycom
-s 15
-s TERM
-s SIGTERM

 「killall mycom」コマンドと同等のコマンドを、シグナルを指定して実行したい。
  以下の下線部を埋めなさい。なお、-sオプションを必ず併用する事。
  （短い順に3つ。シグナル名の場合は大文字で）
  killall _____ mycom　
ps afx
→ハイフンはなし。


psコマンドのオプションのうち、動作中のプロセスの親子関係をツリー状で表示するオプションは？
f
→こっちはハイフンなし。ハイフンあると完全表示。


 実行中のプロセスから、rootユーザーが実行したプロセスのプロセスIDを検索したい。
  下線部に入る共通のオプションは？
  pgrep ____ 0
  pgrep ____ root
-U
→大文字のUらしい。クソが。
-uは実行ユーザー
-Uは実ユーザー
実ユーザーはプログラムを実行したユーザー。
実行ユーザーはそのプログラムの所有ユーザー扱いになる。
大抵は実ユーザーで事足りる。実行ユーザーとそのプログラムの所有権限がわかれるのはSUIDをセットされている場合だ。


  実行中の全てのbashプロセスのプロセスIDを表示したい。
  実行するコマンドは？（パイプを使わず1コマンドで）
pgrep bash
→全てのbashプロセスなんて大仰な言い方するからpsとオプションを真っ先に考えたが、
求めたいのはプロセスIDなので、素直にpgrepでよかったな。


  psコマンドのオプションのうち、現在実行中の全てのプロセスを表示するオプションは？
  (アルファベット順に2つ、また複数のオプションを組み合わせる場合もアルファベット順に指定)
  (「-」で始まるUNIXオプションは、完全なフォーマットでプロセスを表示)
ax
-ef
→uはいらない。aとxで全てのユーザーとデーモンがわかる。
-eは全てという意味。-fは完全表示。


  「killall mycom」コマンドと同等のコマンドを、シグナルを指定して実行したい。
  以下の下線部を埋めなさい。但し、-sオプションは使用しない事。
  （短い順に3つ。シグナル名の場合は大文字で）
  killall _____ mycom
-15
-TERM
-SIGTERM
→TERMでもSIGTERMでもどっちでもいいらしい。頭にハイフンはつくらしい。

---

## プロセスの実行優先度の変更

psコマンド
現在実行されているプロセスを表示する。
a 全てのユーザーのプロセス表示
f 親子関係をツリー状に表示
u ユーザー名も表示
x デーモンも表示
-e 全てのプロセスを表示
-l 詳細情報
-p PID 指定したpidのプロセス情報のみ表示
-C プロセス名 指定したプロセス名のプロセスのみ表示
-w 長い行は折り返して表示

topコマンド
現在実行中のプロセスの監視
システム稼働状況
CPUの状態
メモリとスワップの状態
プロセスの状態
ほぼ全ての情報が表示される。

親戚はfree,uptime

freeコマンド
メモリの利用状況

uptimeコマンド
システムの稼働時間や平均負荷


  プロセスのnice値を表示できるコマンドは？
  (アルファベット順に2つ。オプション指定が必要な方はハイフン無しで)
ps -l
top
→本当はハイフンが必要だが、ハイフン無しでという指定があるので従うこと。
-lは詳細表示。
詳細表示は-vタイプと-lタイプでわかれる。


 PIDが5のプロセスのnice値を-20に変更したい。適切なコマンドは？
  (オプションを全て省略したものと全て指定したものを回答)
renice -20 5
renice -n -20 5
→reniceはナイス値を指定する時、「--」としなくてよい。これはniceでやること。


 hogeユーザが起動している全てのプロセスのnice値を10にしたい。適切なコマンドは？
nice 10 -u hoge
→ナイス値を指定してからオプション。ナイス値を忘れないように。


  「test」プログラムを最も高い優先度で実行したい。適切なコマンドは？
  (オプションの数が多い方から先に2つ)
nice -n -20 test
nice --20 test

---

## 正規表現を使用してのテキストファイル検索

grepコマンド
-c
-f
-i
-n
-v
-E 拡張正規表現

sedコマンド
d マッチした行を削除
s 置換
y 変換


  grepコマンドで、検索パターンにマッチした行を表示する際、
  行頭に行番号を付けて表示させたい。適切なオプションは？
-n


  sedコマンドを使用して、「text」ファイル内の全ての「a」を「A」に、
  また「b」を「B」に置換したい。適切なコマンドは？
  (オプションは使用せず、編集コマンドは上記の順に指定)
sed y/ab/AB text


  catコマンドとgrepコマンドを使用して「text」ファイルから「hoge」という
  文字列を含む行を抽出したい。適切なコマンドは？
cat text | grep hoge


  grepコマンドで検索する際、検索パターンを正規表現ではなく
  固定文字列として検索したい。適切なオプションは？
-F


  sedコマンドを使用して、「text」ファイルの1行目から3行目を削除して
  表示したい。適切なコマンドは？
  (省略できるオプションは省略すること)
set 1,3d text


  grepコマンドで検索する際、大文字と小文字の区別をせずに検索したい。
  適切なオプションは？
-i


  sedコマンドを使用して、「text」ファイル内の全ての「ping」という文字列を
  「hoge」に置換し、また行頭が「#」の行を削除して表示したい。
  適切なコマンドは？(編集コマンドは上記の順に指定すること)
sed -r s/ping/hoge/g -e /^#/d text


  sedコマンドを使用して、「text」ファイルの各行の最初に現れる「ping」という文字列のみを
  「hoge」に置換したい。適切なコマンドは？(省略できるオプションは省略すること)
sed s/ping/hoge text


  sedコマンドを使用して、「text」ファイルに含まれる全ての末尾が「.exe」という文字列を
  「.sh」に置換したい。適切なコマンドは？
  （省略できるオプションは省略すること。また、正規表現は「'」で囲うこと）
sed 's/\.exe$/\.sh/g' text


  sedコマンドを使用して「text」ファイルの内容を編集して表示する際、
  編集コマンドを記述したスクリプトファイル「edit」を使用したい。
  適切なコマンドは？
sed -f edit text


  grepコマンドを使用して「text」ファイルから、「.*」という文字列を含む行を抽出したい。
  適切なコマンドは？(オプションを使用するほうから先に2つ、検索パターンは「'」で囲うこと)
grep -F '.*' text
grep '\.\*' text


 sedコマンドを使用して、「text」ファイルの行頭が「#」の行を
  削除して表示したい。適切なコマンドは？
  (省略できるオプションは省略すること)
grep /^#/d text
→dは行数指定じゃない場合、//で対象文字列を囲う必要がある模様。


  正規表現で、囲んだ部分のいずれかの一文字を意味する記号は？
  (2文字で）
[]


  grepコマンドで、検索パターンにマッチした行の行数のみを表示させたい。
  適切なオプションは？
-c

---

## ファイルの基本的な編集 1

viエディタで読み取り専用でファイルを開くためのオプションは？
-R
→vi -R とか余計な事は書かなくてよい。


  viエディタのコマンドモードで、カーソルをファイルの5行目へ移動することが出来るviコマンドは？
  (記号を使う方から先に2つ)
:5
5G
→ファイブジー。
:g5
!5
明らかに何かと混ざってる。


viエディタで、あるファイルを編集しているが、viエディタを終了することなく
カレントディレクトリにあるファイルを確認したい。適切なコマンドは？
:!ls
→:!の後にコマンド。我ながらよく覚えていたと思う。


viエディタであるファイルを編集しているが、別ファイルである「text」ファイルの
内容をカレント行の次の行に読み込みたい。適切なviコマンドは？
:r text
→「:!r」って書いてしまった。これはシェルコマンドの実行結果を挿入するコマンドになるので違う。


viエディタのコマンドモードで、画面を前の画面へ移動することが出来るviコマンドは？
Ctrl+b
→Cは大文字。+の間にスペースはいらない。書いてる事は間違ってなかった。


viエディタのコマンドモードで、画面を次の画面へ移動することが出来るviコマンドは？
Ctrl+f
→afterならまだわかるのだが・・・。
fore:全面でかろうじて覚えますか。


ファイルの変更内容を保存せずにviエディタを終了したい。適切なviコマンドは？
→:q!
「変更されている場合は終了したくない」という文言があれば「:q」だが、それがないので強制終了じゃないとダメらしい。


viエディタのコマンドモードで、カーソルを行末へ移動することが出来るviコマンドは？
\$ (ドル)
→これだけすっかり忘れてた。
因みに行の先頭はOらしい。O$pUserで覚えましょう。0が最初、$が後なのでそれっぽい。

viエディタのコマンドモードで、カーソルを行頭へ移動することが出来るviコマンドは？
0 (ゼロ)
→こいつらだけ全然覚えてなかった。なぜだろう。


  viエディタで編集しているファイルを、変更内容を保存しエディタを終了したい。
  適切なviコマンドは？(記号を使用するほうから先に、またアルファベット順に3つ)
:wq
:x
ZZ
→
:wq
:zzq
:xq
言いたいことはわかるけど、微妙に違った。
zzは大文字であることに注意。

---

## ファイルの基本的な編集 2

x delete
X baskspace
dd カレント行の切り取り
dw カレント行の単語を切り取り
yy カレント行のコピー
yw カレント行の単語をコピー
p 下に貼り付け
P 上に貼り付け(大文字は逆の法則)
r カーソル位置の1文字を置換する
u 直前の操作取消

/パターン 後方に向かってパターン検索
?パターン 前方に向かってパターン検索
n 次を検索
N 前を検索
:noh ハイライト表示を解除
:%s/A/B/ AをBに置換する(最初の1文字だけ)
:%s/A/B/g AをBに置換する(全て)

:set nu 行番号を表示
:set nonu 行番号を非表示
:set ts=タブ幅 タブ幅を指定

viエディタのコマンドモードにおいて、カーソルの左にバッファの内容を貼り付けるviコマンドは？
P
→上という話だったが？左もそうなのか？
まぁ大文字の法則があるから不思議ではないが、それなら教科書にそう書いて欲しいものだ。


viエディタのコマンドモードにおいて、カーソルの右にバッファの内容を貼り付けるviコマンドは？
p
→カーソルの下としか覚えていなかった。上下左右対応してるのね。


viエディタのコマンドモードにおいて、カーソル位置の単語をバッファにコピーするviコマンドは？
yw
→これも教科書に乗っていない。しかし、法則的にはあり得てもおかしくないか。


viエディタのコマンドモードにおいて、カーソルのある行を含めて3行をコピーし、
  カーソルの上に挿入したい。適切なviコマンドは？（3文字で）
3YP
→
3行とカーソルの上に貼り付けはわかるけど、Yを合わせることによってそれが同時に行えるのか？
これも教科書に乗っていない。


 viエディタのコマンドモードにおいて、カーソルのある行をコピーし、
  下の行に挿入したい。適切なviコマンドは？（3文字で）
yyp
→
コマンドつなげてるだけか？


  viエディタでファイルを編集する際、行番号が表示していたが、行番号を非表示にしたい。
  適切なviコマンドは？(短い方から先に2つ)
:set nonu
:set nonumber
→
全部教科書に乗っていなくて困る。
でも、まぁ話はわかるので、メモはする。

  
  viエディタでファイルを編集する際、行番号を付けてファイルを表示させたい。
  適切なコマンドは？(短い方から先に2つ)
:set nu
:set number


  viエディタでファイルを編集する際、タブの幅を10にしたい。
  適切なviコマンドは？(短い方から先に2つ)
:set ts=10
:set tabstop=10
→全部小文字。


 viエディタで編集しているファイルにある「ping」という文字列を、
  全て「hoge」に置換したい。適切なコマンドは？
:%s/ping/hoge/g
→頭のコロンを忘れずに。

