# Linuxのインストールとパッケージ管理(主題102)

## ハードディスクのレイアウト設計

 以下の特徴を持つ領域の名前は?（アルファベットの略称で）
  ・UEFIシステムでファームウエアが読み込まれた後、最初にアクセスされる
  ・FATでフォーマットされる
  ・ブートローダや起動に必要なドライバなどが置かれている
ESP
→
EFIシステムパーティション


論理ボリュームを作成するまでのコマンドは？（使用順に3つ）
pvcreate
vgcreate
lvcreate


  swap領域は物理メモリの何倍～何倍である事が推奨されるか。
  （それぞれ数字1文字で）
1
2

---

## ブートマネージャのインストール

**a**
 GRUB2の設定ファイルは?
/boot/grub/grub.cfg


**a**
GRUB Legacyの設定ファイルは?(アルファベット順に2つ)
/boot/grub/grub.conf
/boot/grub/menu.lst


**a**
 GRUB2の設定を直接編集できるファイルは?
  （フルパスでファイル名、ディレクトリ名の順に2つ）
/etc/default/grub
/etc/grub.d


  以下はGRUB2の設定ファイル「/boot/grub/grub.cfg」の抜粋である。ルートパーティションを
  2番目のディスクの3番目のパーティションに指定したい。どのように指定すれば良いか?
  set root=______________
(hd1,3)
→
書き方は(hd〇,〇)


  ルートパーティションを「/dev/sda2」に指定して起動させたい。起動プロンプトにおいて下線部に当てはまる記述は?
  grub> linux /boot/vmlinuz-2.6.35 _____________
root=/dev/sda2
→
スペースはいらない


ブートローダであるGRUB2の設定ファイルの内容を変更したい。変更内容を反映させるコマンドは?
grub-mkconfig


  GRUBの第一段階のプログラムをバックアップしたい。
  以下のコマンドの空欄に数値を入れなさい（より少ない値を指定すること）
  \# dd if=/dev/sda of=stage1_backup.img bs=[　　] count=1
440


 GRUB Legacyの設定ファイル「/boot/grub/menu.lst」において、ルートパーティションを
  1番目のディスクの4番目のパーティションに指定したい。どのように指定すれば良いか?
root(hd0,3)


 GRUB Legacyの設定ファイル「/boot/grub/menu.lst」において、ルートパーティションを
  2番目のディスクの3番目のパーティションに指定したい。どのように指定すれば良いか?
root (hd1,2)
→
ルートパーティションの指定はroot=(hd)の方式ではない。
そちらはカーネルイメージとカーネルオプションの設定に置ける書き方。
イコールは付けない。スペースは必須。


  systemdの動作するシステムで、実験的にグラフィカルログインモードで起動したい。
  起動プロンプトで指定すべきカーネルパラメータを答えよ（省略不可）
systemd.unit=graphical.target


**a**
第1段階のブートローダが通常格納される場所はどこか?(アルファベットで)
MBT


  以下はGRUB2の設定ファイル「/boot/grub/grub.cfg」の抜粋である。ルートパーティションを
  1番目のディスクの4番目のパーティションに指定したい。どのように指定すれば良いか?
  set root=______________
(hd0,4)


GRUB Legacyの設定ファイル「/boot/grub/menu.lst」において、システム起動時の
  カーネルイメージと起動オプションを指定したい。
  下線部に当てはまる設定項目は?
  __________ /boot/vmlinuz-2.6.35 root=/dev/hda1
kernel

---

## 共有ライブラリの管理

**a**
プログラムの実行時に、共有ライブラリの場所を検索するために使用されるファイルは?
/etc/ld.so.cache


**a**
  共有ライブラリを格納するためのディレクトリを新たに作成した。
  ldconfigコマンドを使用して共有ライブラリのキャッシュファイルを更新するためには、
  どのファイルに新しいディレクトリのパスを記述する必要があるか?
/etc/ld.so.conf


**a**
共有ライブラリのキャッシュファイル「/etc/ld.so.cache」を更新するコマンドは?
ldconfig


**a**
 共有ライブラリの検索パスを設定できる環境変数は?
LD_LIBRARY_PATH

---

## Debianパッケージ管理

ここは全部重要。後、問題をよく見ましょう。
コマンドなのかサブコマンドなのか。

  dpkgコマンドのアクションのうち、
  指定したパッケージからインストールされたファイルを一覧表示するアクションは?
  （短い方から先に2つ）
-L
-listfiles


  APTツールではネットワーク経由で最新のパッケージを取得できるが
  パッケージの取得元(リポジトリ)を設定するファイルは?
/etc/apt/sources.list


  APTツールにおいてパッケージ情報の検索・参照などを行うコマンドは?
apt-cache


  dpkgコマンドを使用して、インストール済みのパッケージを一覧表示させたい。
  適切なコマンドは?
  （アクションが短い方から先に2つ）
dpkg -l
dpkg --list


  dpkgツールにおいてインストール済みのパッケージを再設定するコマンドは?
dpkg-reconfigure

  apt-getコマンドのサブコマンドのうち、
  パッケージのデータベースを最新版に更新するサブコマンドは?
update


  dpkgコマンドのアクションのうち、
  指定したファイルのインストール元のパッケージを表示するアクションは?
  （短い方から先に2つ）
-S
--search
→
サーチの使いかた間違ってる。


  dpkgコマンドのアクションのうち、
  設定ファイルを含め完全にパッケージをアンインストールするアクションは?
  （短い方から先に2つ）
-P
--purge


  apt-cacheコマンドのサブコマンドのうち、
  指定したパッケージが依存しているパッケージの名前を一覧表示するサブコマンドは?
depends


apt-getコマンドのサブコマンドのうち、
  過去に取得したパッケージファイルを削除するサブコマンドは?
clean


 apt-getコマンドを使用して、ディストリビューションを最新版にしたい。
  適切なコマンドは?
apt-get dist-upgrade


  dpkgコマンドのアクションのうち、
  インストールが完了していない不完全なパッケージを表示するアクションは?
  （短い方から先に2つ）
-C
-audit
→
cは大文字であることに注意。


  apt-cacheコマンドのサブコマンドのうち、
  指定したパッケージのサイズやファイル名などを含めた情報を表示するサブコマンドは?
show


  apt-getコマンドのサブコマンドのうち、
  ディストリビューションを最新版にするサブコマンドは?
dist-upgrade


 dpkgツールの設定ファイルは?
/etc/dpkg/dpkg.cfg


  dpkgコマンドのオプションのうち、
  ディレクトリを再帰的に処理するオプションは?
-R
→
大文字であることに注意


  dpkgコマンドのアクションのうち、
  設定ファイルを残してパッケージをアンインストールするアクションは?
  （短い方から先に2つ）
-r
--remove


  apt-getコマンドのサブコマンドのうち、
  インストール済みの全パッケージをアップグレードするサブコマンドは?
upgrade


  apt-cacheコマンドのサブコマンドのうち、
  指定したパッケージ**へ**依存しているパッケージを含めた詳細情報を表示するサブコマンドは?
showpkg


 apt-cacheコマンドを使用して、「ssh」パッケージ**が**依存している
  パッケージの名前を一覧表示させたい。適切なコマンドは?
apt-cache depends ssh


 dpkgコマンドのアクションのうち、
  インストール済みのパッケージを一覧表示するアクションは?
  （短い方から先に2つ）
-l
--list


  dpkgコマンドのアクションのうち、
  指定したインストール済みパッケージの詳細情報を表示するアクションは?
  （短い方から先に2つ）
-s
--status


  dpkgコマンドのオプションのうち、
  同バージョンが既にインストールされている場合はインストール行わないオプションは?
-E


  apt-getコマンドのサブコマンドのうち、
  パッケージをインストールまたはアップグレードするサブコマンドは?
install

---

## RPMとYUMパッケージ管理 1

  rpmコマンドを使用して、インストール前に「postfix-1.i386.rpm」ファイルから
  インストールされるファイルを調べたい。適切なコマンドは?
  (オプションを先に指定し、併用オプションはアルファベット順でまとめて指定。また、それらは省略した形を使用)
rpm -qlp postfix-1.i386.rpm
→
l,--list : 指定したパッケージに含まれるファイルを表示


  rpmコマンドを使用して、インストールされている「postfix」パッケージの
  詳細情報を調べたい。適切なコマンドは?
  (オプション、併用オプションの順でまとめて指定。また、それらは省略した形を使用)
rpm -qi postfix
→
i,--info : 指定したパッケージの情報を表示


 rpmコマンドのオプションのうち、
  パッケージをアップグレード(なければインストール)するオプションは?
  （短い方から先に2つ）
-U
--upgrade
→
rpmにupdateはない。


  rpmコマンドのオプションのうち、
  パッケージをアップグレードする(なければインストールしない)オプションは?
  （短い方から先に2つ）
-F
--freshen
→
よく当たったなと思う。


rpmコマンドのオプションのうち、
  パッケージをアンインストールするオプションは?
  （短い方から先に2つ）
-e
--erase
→
rpmにremoveはない。

  rpmコマンドを使用して、依存関係を無視して「postfix」パッケージを
  強制的にアンインストールしたい。適切なコマンドは?
  (オプション、併用オプションの順で指定。また、オプションは省略した形を使用)
rpm -e --nodeps postfix

  rpmコマンドの併用オプションのうち、
  **設定ファイル**を一覧表示するオプションは?
  （短い方から先に2つ）
-c
--configfiles
→
configureではない。fileは複数形。


  rpmコマンドのオプションのうち、
  指定したパッケージが依存するファイルを表示するオプションは?
  （短い方から先に2つ）
-R
--requires
→
省略形は大文字。複数形に注意。


  rpmコマンドの併用オプションのうち、
  指定したファイルのインストール元のパッケージを表示するオプションは?
  （短い方から先に2つ）
-f
--file
→
使い方が違う奴。親戚はdpkgのserach。
インストール元のファイルという意味でのfileかな。


 rpmコマンドのオプションのうち、
  パッケージの検査を行うオプションは?
  （短い方から先に2つ）
-V
--verify
→
参考書には載っていなかった。オプションであって、併用オプションではない。


  rpmコマンドを使用して、インストールされている全パッケージの検査を行いたい。
  適切なコマンドは?
  (オプション、併用オプションの順でまとめて指定。また、それらは省略した形を使用)
rpm -Va


  rpmコマンドの併用オプションのうち、
  詳細情報を表示するオプションは?
-v
→verifyではない。省略形しか存在しない。


RPM系パッケージをcpio形式のアーカイブに変換するコマンドは?
rpm2cpio

---

## RPMとYUMパッケージ管理 2

yum
check-update アップデート可能なパッケージを表示する
update
install
remove
info パッケージの詳細な情報表示
list パッケージを一覧表示する
repolist
search
search all
grouplist
groupinstall

zypper
in install
rm remove
info
up update
lr repos リポジトリ一覧表示
refresh リポジトリ更新
lu list-updates アップデート可能なパッケージを表示
du dist-upgrade
se search


 yumコマンドを使用して、アップデート可能なパッケージを確認したい。
  適切なコマンドは?
yum check-update
→
言っていることはわかるが、存在感がなくてな。
list-updatesのほうがしっくり来るので、毎回それと間違いそうになる。
確認をcheckに変換する作業が必要だ。



  zypperコマンドのサブコマンドのうち、
  アップデート可能なパッケージを表示するサブコマンドは?
  （短い方から先に2つ）
lu
list-updates
→
yumもzypperもアップデート可能なパッケージの表示サブコマンドが存在する。
紛らわしい。単数形か複数形かは覚えたが、それがどっちかがいまだによくわからない。
yumならccheck-update。
zypperならlist-updates。


 YUMツールの設定ファイルは?
/etc/yum.conf
→
設定ファイルならconfかcfgは確定。
フォルダなら.dってパターンばかりだ。

---

## 仮想化のゲストOSとしてのLinux

IaaS
PaaS
SaaS
cloud-init

---

## 2週目に間違った問題

GRUB2の設定ファイルは?
/etc/grub/grub.cfg

/boot/grub/grub.cfg


プログラムの実行時に、共有ライブラリの場所を検索するために使用されるファイルは?
LD_LIBLARY_PATH

/etc/ld.so.cache



  yumコマンドのサブコマンドのうち、
  パッケージの詳細な情報を表示するサブコマンドは?
list

info



  rpmコマンドのオプションのうち、
  パッケージをアップグレード(なければインストール)するオプションは?
  （短い方から先に2つ）
-U
--update

--upgrade



  zypperコマンドのサブコマンドのうち、
  アップデート可能なパッケージを表示するサブコマンドは?
  （短い方から先に2つ）
up
list-updates

lu


  rpmコマンドの併用オプションのうち、
  設定ファイルを一覧表示するオプションは?
  （短い方から先に2つ）
-c
--configfile

--configfiles


 GRUB Legacyの設定ファイル「/boot/grub/menu.lst」において、ルートパーティションを
  2番目のディスクの3番目のパーティションに指定したい。どのように指定すれば良いか?
(hd1,2)

root (hd1,2)


  apt-getコマンドを使用して、「apache2」パッケージをアンインストールしたい。
  適切なコマンドは?
apt-get erase apache2

apt-get remove apache2


  GRUB2の設定を直接編集できるファイルは?
  （フルパスでファイル名、ディレクトリ名の順に2つ）
/boot/grub/default
/boot/grub.d

/etc/default/grub
/etc/grub.d/


  apt-getコマンドのサブコマンドのうち、
  過去に取得したパッケージファイルを削除するサブコマンドは?
clear
clean


 rpmコマンドの併用オプションのうち、
  指定したパッケージの詳細を表示するオプションは?
  （短い方から先に2つ）
-L
--listfiles

-i
--info


  apt-getコマンドのサブコマンドのうち、
  ディストリビューションを最新版にするサブコマンドは?
update

dist-upgrade


 ブートローダであるGRUB2の設定ファイルの内容を変更したい。変更内容を反映させるコマンドは?
grub-reconfigure

grub-mkconfig


  rpmコマンドを使用して、インストール前に「postfix-1.i386.rpm」ファイルから
  インストールされるファイルを調べたい。適切なコマンドは?
  (オプションを先に指定し、併用オプションはアルファベット順でまとめて指定。また、それらは省略した形を使用)
rpm -Lpq postfix-1.i386.rpm

rpm -qlp postfix-1.i386.rpm


  共有ライブラリを格納するためのディレクトリを新たに作成した。
  ldconfigコマンドを使用して共有ライブラリのキャッシュファイルを更新するためには、
  どのファイルに新しいディレクトリのパスを記述する必要があるか?
LD_LIBLARY_PATH

/etc/ld.so.conf



  apt-cacheコマンドのサブコマンドのうち、
  指定したパッケージが依存しているパッケージの名前を一覧表示するサブコマンドは?
depens
depends


 rpmコマンドのオプションのうち、
  パッケージをアンインストールするオプションは?
  （短い方から先に2つ）
-r
--remove

-e
--erase


  GRUB Legacyの設定ファイル「/boot/grub/menu.lst」において、ルートパーティションを
  1番目のディスクの4番目のパーティションに指定したい。どのように指定すれば良いか?
root=(hd0,3)

root (hd0,3)


  yumコマンドを使用して、アップデート可能な全てのパッケージをアップデートしたい。
  適切なコマンドは?
update
yum update


GRUB Legacyの設定ファイルは?(アルファベット順に2つ)
/boot/grub.conf
/boot/grub/menu.lst

/boot/grub/grub.conf
/boot/grub/menu.lst


 パッケージ情報の検索・参照などは行えないが、パッケージ情報のデータベースを使って
  依存関係を調整しながらパッケージのインストール・アンインストールなどを行える
  Debianパッケージの管理用コマンドは?
dpkg

apt-get


  yumコマンドのサブコマンドのうち、
  パッケージをアンインストールするサブコマンドは?
erase

remove


  rpmコマンドを使用して、依存関係を無視して「postfix」パッケージを
  強制的にアンインストールしたい。適切なコマンドは?
  (オプション、併用オプションの順で指定。また、オプションは省略した形を使用)
rpm -r --nodeps postfix

rpm -e --nodeps postfix


  apt-getコマンドを使用して、ディストリビューションを最新版にしたい。
  適切なコマンドは?
dist-upgrade
apt-get dist-upgrade


 rpmコマンドのオプションのうち、
  指定したパッケージが依存するファイルを表示するオプションは?
  （短い方から先に2つ）
-d
--depends

-R
--requires


  dpkgコマンドのアクションのうち、
  指定したインストール済みパッケージの詳細情報を表示するアクションは?
  （短い方から先に2つ）
-L
--list-updates

-s
--status


  zypperコマンドのサブコマンドのうち、
  パッケージの詳細情報を表示するサブコマンドは?
show

info


  rpmコマンドを使用して、インストールされている「postfix」パッケージの
  詳細情報を調べたい。適切なコマンドは?
  (オプション、併用オプションの順でまとめて指定。また、それらは省略した形を使用)
rpm -qi postfix


 rpmコマンドの併用オプションのうち、
  インストール済みの全パッケージを表示するオプションは?
  （短い方から先に2つ）
-l
--list

-a
--all


systemdの動作するシステムで、実験的にグラフィカルログインモードで起動したい。
  起動プロンプトで指定すべきカーネルパラメータを答えよ（省略不可）
set graphical.target

systemd.unit=graphical.target



  YUMツールの設定ファイルは?
/etc/yum.cnf

/etc/yum.conf


  dpkgコマンドを使用して、インストール済みのパッケージを一覧表示させたい。
  適切なコマンドは?
  （アクションが短い方から先に2つ）
-l
--list

dpkg -l
dpkg --list


  zypperコマンドのサブコマンドのうち、
  リポジトリの一覧を表示するサブコマンドは?
  （短い方から先に2つ）
rl
repos

lr
repos


 dpkgコマンドのアクションのうち、
  指定したパッケージからインストールされたファイルを一覧表示するアクションは?
  （短い方から先に2つ）
-L
-listfiles

--listfiles


 rpmコマンドのオプションのうち、
  パッケージの検査を行うオプションは?
  （短い方から先に2つ）
-c
--check

-V
--verify


  rpmコマンドの併用オプションのうち、
  指定したパッケージの変更履歴を表示するオプションは?
--change-log

--changelog


  rpmコマンドの併用オプションのうち、
  指定したパッケージに含まれるファイルを表示するオプションは?
  （短い方から先に2つ）
-L
--list-files

-l
--list


 YUMツールではネットワーク経由で最新のパッケージを取得できる。
  パッケージの取得元(リポジトリ)を設定するファイルが格納されているディレクトリは?
/etc/yum/sources.lst

/etc/yum.repos.d/



  以下の特徴を持つ領域の名前は?（アルファベットの略称で）
  ・UEFIシステムでファームウエアが読み込まれた後、最初にアクセスされる
  ・FATでフォーマットされる
  ・ブートローダや起動に必要なドライバなどが置かれている
EFI

ESP
EFIシステムパーティション


  dpkgツールの設定ファイルは?
/etc/dpkg.conf

/etc/dpkg/dpkg.cfg


dpkgコマンドのアクションのうち、
  指定したファイルのインストール元のパッケージを表示するアクションは?
  （短い方から先に2つ）
-r
--require

-S
--search


  rpmコマンドの併用オプションのうち、
  指定したファイルのインストール元のパッケージを表示するオプションは?
  （短い方から先に2つ）
-l
--list

-f
--file


rpmコマンドを使用して、インストールされている全パッケージの検査を行いたい。
  適切なコマンドは?
  (オプション、併用オプションの順でまとめて指定。また、それらは省略した形を使用)
rpm -c -aV

rpm -Va


  yumコマンドを使用して、アップデート可能なパッケージを確認したい。
  適切なコマンドは?
check-update

yum check-update


apt-cacheコマンドを使用して、キーワード「ssh」を含む
  パッケージを表示させたい。適切なコマンドは?
apt-cashe serach ssh

apt-cache search ssh



---

## メモ

オプション・サブコマンド・併用オプションを全て答えよ

●dpkg 10個
-E
-G
-R --recursive
-i --install
-r --remove
-P --purge
-l --list インストール済みのパッケージを表示
-L --listfiles 指定したパッケージからインストールされたファイルを一覧表示する
-s --status 詳細情報
-S --search 指定したファイルのインストール元のパッケージを表示する
-C --audit インストールが完了していない不完全なパッケージを表示する
/etc/dkpg/dkpg.cfg
dkpg-reconfigure


●apt-get 6個
install パッケージをインストールまたはアップグレードする
upgrade
dist-upgrade
remove
update パッケージのデータベースを最新に更新する
clean
/etc/apt/sources.list


●apt-cache 4個
show
showpkg 指定したパッケージへ依存しているパッケージを含めた詳細情報を表示する
depends
search


●rpm インストール・アップデート・アンインストール 併用 8個
-i --install
-U --upgrade
-F --freshen
-e --erase --nodeps
-v 詳細表示
-h --hash 経過表示
--nodeps 依存を無視
--test 実際には行わない
--nomd5 MD5によるファイルの改ざんを検査しない

●rpm 照会モード 8個
-q --query パッケージの照会を行うオプション
-V --verify パッケージの検査を行うオプション

-a --all
-p --package packfilename
-c --configfiles
-i --info 詳細情報
-f --file flename 指定したファイルのインストール元のパッケージを表示
-l --list 指定したパッケージに含まれるファイルを表示
-R --requires 依存しているファイル
--changelog


●yum 11個
check-update アップデート可能なパッケージを表示する
update 指定したパッケージをアップデートする
install 指定したパッケージをインストールする
remove 指定したパッケージをアンインストールする
info 指定したパッケージの詳細情報表示
list 全パッケージ情報を一覧表示
repolist リポジトリ一覧を表示
search パッケージ情報をキーワードで検索
search all パッケージ情報をキーワードで検索(説明文含む)
grouplist パッケージグループをリスト表示する
groupinstall 指定したグループのパッケージをインストールする
/etc/yum.conf
/etc/yum.repos.d


●zypper 9個
in install
up update
rm remove
lu list-updates アップデート可能なパッケージを表示
dup dist-upgrade
se search
info packname 詳細情報
lr repos リポジトリ一覧表示
refresh リポジトリ更新


list,info,serachの順で覚える。
→
rpmはsearchがない。
yumはserachallまである。
zypperはlistがない。

upgradeはrpmまで



 「/sbin/init」の代わりに「/bin/bash」を起動したい。起動プロンプトにおいて下線部に当てはまる記述は?
  grub> kernel /boot/vmlinuz-2.6.35 _____________
init=/sbin/bash

  ルートパーティションを「/dev/sda2」に指定して起動させたい。起動プロンプトにおいて下線部に当てはまる記述は?
  grub> linux /boot/vmlinuz-2.6.35 _____________
root=/dev/sda2

 systemdの動作するシステムで、実験的にグラフィカルログインモードで起動したい。
  起動プロンプトで指定すべきカーネルパラメータを答えよ（省略不可）
  init=graphical.target

  systemd.unit=graphical.target

メンテナンス
メンテナンス用にシングルユーザモードで起動したい。起動プロンプトにおいて下線部に当てはまる記述は?
  grub> kernel /boot/vmlinuz-2.6.35 _____________
  (数字を使用するものを先に、その後アルファベット順で)
1
s
single

dpkg
/etc/dpkg/dpkg.cfg

yum
/etc/yum.conf
/etc/yum.repos.d/

apt
/etc/apt/sources.list


grub2
/boot/grub/grub.cfg

grub
/boot/grub/grub.conf
/boot/grub/menu.lst
