# 102メモ

## よく間違える問題・気を付ける事

``` txt : 7
```

``` txt : 8
## ServerLayout
入出力デバイスとスクリーンの指定

## XクライアントとXサーバーの設定の順番と起動順
xhost → xclient → xeyes


xhostの+と-はそのままの意味。
+と-が逆の意味になっているのはsetコマンド。


## xdmの設定ファイル系


※仮想マシンへのリモートデスクトップ接続について正しいもの
SPICEでは仮想マシンの画面出力を直接扱える
VNCサーバは仮想マシンのゲストOSにインストールする
→
VNCは仮想マシンのゲストOS（仮想マシン上で動作するOS）にインストールしたVNCサーバがゲストOSの画面出力をキャプチャしてクライアントに送信するのに対して、
SPICEでは仮想マシンのホスト（仮想環境の土台）にインストールしたSPICEサーバが仮想マシンの画面出力をクライアントに送信して直接操作することができます。



## 同じキー入力を一定時間無視するアクセシビリティ
バウンスキー
→
同じキー入力→手が震えて何回も同じキーを入力してしまう→バウンドしている。→バウンスキー
```

``` txt : 9


```

``` txt : 10

```

``` txt : 11
## インタフェースeth0を有効化したい。

ip link set eth0 up
→
インタフェースを有効化・無効化するには、linkオブジェクトにsetコマンドを発行します。その際、値を以下の書式で指定します。
ip link set インタフェース up|down

```

``` txt : 12
■suコマンド
・引数に「-」をつけると、切り替わる先のユーザの環境変数を使用する
・ユーザー名を指定しない場合、rootユーザへ切り替わる
・ユーザを切り替える時に求められるパスワードは、切り替わる先のユーザのパスワード
・但し、rootユーザから別のユーザに切り替わる時はパスワードは要求されない

■ユーザ「user1」のパスワードをいつでも変更できるようにしたい
chage -m 0 user1

■パスワードの有効期限に関する設定が可能なコマンドは、「chage」、「passwd」、「usermod」コマンドです。
「passwd」コマンドでパスワードの最長有効日数を10日にする場合は「passwd -x 10 user1」
「usermod」コマンドにはこれを実現するオプションは存在しませんが、
アカウントの有効期限やパスワードの使用期限が切れてからアカウントを永久に使用不能になるまでの日数を設定できる。
→[usermod -e]

■find パーミッション系全般
suid,sgid
```

## locateコマンドなるものは存在しない

ロケールの確認はlocaleコマンドで行う。locateではない。
まぁ、ロケールって単語しか出てこないからlocaleしかないんだけど、なんでlocate何て選んだのだろうか。

## sが付くか迷う物

●/etc/group :: グループに関する情報が格納されているファイル  
groupsと迷う。

●groupsコマンド  
groupにしてしまった。  
→上の2つがあるからややこしく感じるのでは？

●aliasコマンド  
●newasliasesコマンド  

aliasesコマンドはない。ノリでそう答えてしまいそうになる。  

■dnsのhost系  
・/etc/hosts          :: IPアドレスとホスト名の対応付けファイル。
・/etc/hostname       :: ホスト名のみを設定するファイル(Debian系,RHEL7以降)
・hostコマンド        :: DNSサーバーを使ってホストやドメインに関する情報を表示する。最も基本となるコマンド。最小出力。
・hostnamectl         :: systemdが動作するシステムにおける、ホスト名や関連する情報の表示、ホスト名の設定を行うコマンド。
※「nmcli general hostname ホスト名」でも表示可能。
・hostnameコマンド    :: 自ホストのホスト名やドメインを参照したり、ホスト名を一時的に変更するコマンド。

●timedatectl list-timezones  
list-timezoneと迷う。  

## journalctlの気を付けるオプション

-a,--all見たいにずれていなければいいのだが、ずれてる奴が毎回迷う。

ログ出力10行  
・--lines 10  
・-n  

表示可能なログをすべて表示  
--full  
-l  

ログをリアルタイムに表示  
-follow  
-f  

## dが付くファイル、付かないファイル

ntpdの設定ファイルを間違えてしまった。  
/etc/ntpd.confなるものは存在しない。  
ざっと見返してみたが、デーモンで○○dってついて、そのまま○○d.confって形式のファイルはxinetd.confしかないみたい。  
なので、それ以外は○○.confでよい。  

と、思ったが、CUPSもd.confタイプだったか。  
これはデーモンの設定ファイルか。デーモンに対する設定なのか、サービスそのものに対する設定ファイルなのか、色々あるな・・・。
これは中々きつい。

・ntpd  
・/etc/ntp.conf  
・chronyd          :: ntpdに代わるNTPサーバ/クライアントであるChronyのデーモン。
・/etc/chrony.conf :: Chronyの設定ファイル。
・/etc/systemd/journald.conf

・xinetd           :: スーパーサーバデーモン。ネットワークからのリクエストを受け付けるデーモン。  
・/etc/xinetd.conf :: xintedの全体的な設定を行うファイル。  

・CUPS(Common Unix Printing System) :: これまで使われてきた「lpd」に代わる新しいWebブラウザベースの印刷システム。
・cupsd      :: UNIXの印刷サービスCUPSのデーモン。
・/etc/cups/cupsd.conf    :: cupsdの設定ファイル。

## bashの起動ファイルは絶対に確認

## DNS関連のファイルとコマンドは絶対に確認

## 時間書式まとめ

date MMDDhhmmCCYY.ss

chage YY-MM-DD

crontab書式 [分] [時] [日] [月] [曜日] [実行ユーザー名(システム用設定ファイルでのみ指定)] [コマンド]

at [YY] [MM]

## ntpqはとにかく-p付けておけばおけ

## ロケール一覧覚えておけ

始まりはLCだからね。  
LC_MAPはないよ。  

---

## 間違えた問題

### シェルとシェルスクリプト

#### env

指定した環境変数の値を一時的に削除してコマンド実行するのは次のうちどれか。
設定されている環境変数の値を一時的に指定された値に変更してコマンド実行するのは次のうちどれか。

→

env全般確認する。
envはenvededなので、環境変数に関する事全般と覚えていいかもしれない。  
それこそ、環境変数を一時的に無効にするとか、なかったことにするとか、そういうのばかりだからね。  

シェルのオプションの設定状態を確認したい。下図の( )に入る適切なコマンドは次のうちどれか。  
→  
set -o  
何もオプションを指定しないと何かあるってのを思い出したけど、そうじゃなかったら間違えてる。  
要注意。  

#### 4734

bashのログイン時、環境設定ファイルを読み込む順番で正しいものを答えなさい。

→

「/etc/profile」2.「~/.bash_profile」3.「~/.bashrc」4.「/etc/bashrc」  
これを見るに、とりまprifileを先に読めばおけ。  

あと、profile系の順番も確認しておく。  
~/.bash_profile , ~/.bash_login , ~/.profile  

最初にプロファイルはいい。次にログインで最後にまたプロファイルという訳の分からない並びである事。  

#### 5144

ログインシェルとしてbashが起動した際に、読み込む設定がない場合は読み込まれないファイルはどれか。

→

一番読まれそうなファイルが読まれないのが意外。  
Linuxわからん。  

~/.bashrc

#### 4936

対話型シェルを起動した際に読み込まれるファイルはどれか（2つ選択）  

→

対話型シェルは起動スクリプトは実行されているので、起動したときに走るrcだけで十分。  

/etc/bashrc  
~/.bashrc  

#### 4659

Debian系のシステムで全ユーザーのbash起動時に共通の処理を実行させたい。編集すべきファイルはどれか。

→  

bash.bashrcとかいうふざけた奴。  

#### 5068

以下のコマンドを実行すると、コマンドを実行したユーザ名が表示されるようにしたい。空欄(　)に入るものはどれか。  
echo "My name is (　　　　　)."  

→

意外なのを間違えた。  
phpの要領で$まではよかったけど、NAME何てねーよって話。  
答えはUSERです。

#### 4560

エイリアス機能を利用し、コマンドラインから「rm」と入力した場合に「rm -i」コマンド（対話式の削除）が実行されるようにしたい。適切なコマンドは次のうちどれか。

→

ここにきて超基本的な問題を間違えるようになってしまった。  
バッククォートは関数実行するときの話であって、普通に設定するだけならシングルでいいですよ。  
alias rm='rm -i'  

#### 5035

カレントディレクトリでのlsコマンドの結果は以下である。

$ls
dir1 dir2 test1.txt test2.txt

上記と同様に、下記の実行結果にするためには、事前にどれを入力すれば良いか。（2つ選択）

$echo $RESULT
dir1 dir2 test1.txt test2.txt

→

4560のバッククォートが活躍するのはこっち。

``` txt
RESULT=`ls`  
RESULT=$(ls)
```

#### noglob , noclobber , ignoreeof

パス名のワイルドカードによる展開（*や?）を無効に設定したい。 → noglob  
リダイレクト「>」によるファイルの上書きを禁止にしたい。 → noclobber  
キーボード操作を誤って、「Ctrl + D」を押してしまった際のログアウト処理を一時的に無効にしたい。 → noignore  

■グロブ  
グロブ（英: glob）とは主にUnix系環境において、ワイルドカードでファイル名のセットを指定するパターンのことである。  
例えば、UNIXのコマンド「mv *.xlsx 営業実績/」はカレントディレクトリから営業実績/ディレクトリへと.xlsxで終わる全てのファイルを移動する。  
ここで、\*は「任意の文字列」を表すワイルドカードであり、\*.xlsxはグロブである。\*以外に一般的なワイルドカードは疑問符 (?) であり、これは任意の1文字を表す。  

片方がわかってしまえば問題ない。

---

### 管理タスク

#### 4838

既に存在するグループアカウント「ProjectA」のグループ名を「ProjectB」へ変更したい。適切なコマンドは次のうちどれか。

→

-gを選択したが、これはgidを変更するオプション。
名前だけなので-n  

#### 4918

システムで使用するタイムゾーンを指定するテキストファイルはどれか。

→  

タイムゾーンに関する設定ファイルだけを並べる。  
・/etc/timezone  :: システムで使用するタイムゾーンを指定するテキストファイル。  
・/etc/localtime :: システムクロックの時刻からローカルタイムへ変換するための時差情報が格納されている。  
・/usr/share/zoneinfo/ :: タイムゾーンの情報がバイナリファイルとして格納されているディレクトリ。  

#### 5038

「hogescript」スクリプトを日曜の毎時間30分に実行したい。crontabファイルの適切な設定は次のうちどれか。（2つ選択）

``` txt
hogescript 30 * * * 0
hogescript 30 0-23 * * 6
30 0-23 * * 6 hogescript
30 0-0 * * 0 hogescript
30 0-23 * * 7 hogescript
30 * * * 0 hogescript
```

→

日曜なので0か7。  
30はいいとして、時間は0-23 or [*]だ。  
そもそも指定しないという選択肢。  
0-0は0時ピッタリにしかやらないからダメ。  

#### 4727

下記の表示を得たい。適切なコマンドは次のうちどれか。

→

catで開けるやつとそうでない奴をまとめる。  
それがわかっていないから、`crontab -l`に逃げる。  

・/var/spool/cron/ユーザ名  :: ユーザ用のcrontabファイル。エディタで編集不可(cat不可)。crontabからのみ可能。
・/etc/crontab       :: システムに定期的に実行させたいジョブを設定するファイル。主に以下4つのディレクトリに置かれたスクリプトを実行する。
・crontabコマンド :: ユーザ用のcronの設定を行うコマンド。コマンドの定時実行のスケジュール管理コマンド。  

``` txt
crontab [オプション]

オプション
-e(edit)      :: エディタを使ってcrontabファイルを編集する
-l(list)      :: crontabファイルの内容を表示する
-r(remove)    :: crontabファイルを削除する
-i            :: crontabファイル削除時に確認する
-u ユーザー名 :: ユーザーを指定してcrontabファイルを編集する。(rootユーザーのみ可)
```

なるほど。
システムのクーロン設定は編集可能だが、ユーザーのクーロン設定は編集不可。
なのでcrontabコマンドを挟んで実行するというわけか。

まずcatで開ける事。  
中身に実行ユーザーの記述がある事で、システム用のcron設定`/etc/crontab`だとわかる。
