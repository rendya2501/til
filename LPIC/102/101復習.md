# 102で101復習

結構忘れてる。  
よく受かったな。  
今なら余裕で資格はく奪レベルだ。  
というわけで、思い出したいので、ここで復習します。  

---

## exportコマンド  

環境変数やシェル変数を設定するコマンド。  
環境変数を定義したり、シェル変数を環境変数に、環境変数をシェル変数に変更する。  

``` txt
export [オプション] [変数名[=値]…]

オプション
-f → シェル変数を参照する
-n → 指定した環境変数をシェル変数に変える
-p → 全てのエクスポートされた変数と関数を全て一覧表示する。
```

**exportコマンドの引数に指定するシェル変数の先頭には`$`は付かない**  

シェル変数DISPLAYを定義  
`DISPLAY=localpc:0`  

シェル変数DISPLAYを環境変数に設定  
`export DISPLAY`  

シェル変数定義と同時に環境変数に設定  
`export DISPLAY=localpc:0`  

環境変数DISPALYを削除  
`export -n DISPLAY`  

---

## envコマンド

環境変数が表示される。  

---

## printenvコマンド

現在設定されている環境変数を確認するコマンド  

---

## setコマンド

シェル変数と環境変数を表示する。  
環境変数確認のための問題で大体セットでついてくる奴。  
詳しくは102の範囲なのでそっちでやる。  

---

## systemctlコマンド  

システム起動時のサービス起動デーモンsystemdのコントロール用コマンド  

---

## ナイス値

プロセスの優先度を表す値。  
-20から19まであり、-20が一番高い。  
デフォルトは0。  

[プロセス優先度(NICE値)を変更する方法](https://qiita.com/hana_shin/items/438dfe93a765ffa337ae)

---

## findコマンド

ファイルやディレクトリを検索するコマンド  

``` txt
find [ディレクトリ] [検索式]
ディレクトリを省略した場合、カレントディレクトリ以下が対象となる。

検索式
-name → ワイルドカードを使用してファイルやディレクトリの一部のみ指定した検索ができる
-atime → 最終アクセス時刻で検索
-mtime → 最終更新時刻で検索
-perm → アクセス権で検索
-size → ファイルサイズ(ブロック単位)で検索
-type → ファイルの種類で検索。 d:ディレクトリ l:シンボリックリンク f:ファイル
-user ユーザー名 : ファイルの所有者で検索
-uid → ユーザーIDで作成したファイルを検索
-print → マッチしたファイルの表示(省略可能)
-print0 → 検索結果をnull文字で区切る
-exec コマンド || \; → マッチしたファイルに対してコマンドを実行する
-ok コマンド || \; → マッチしたファイルに対してコマンドを実行する(確認あり)
-mindepth → 指定した階層より下を検索
-maxdepth → 指定した階層まで検索
```

/homeディレクトリ以下から、ファイル名の末尾が「.rpm」のファイルを検索する。  
`find /home -name "*.rmp"`  

/dataディレクトリ以下から過去1日以内に更新されたファイルを検索する。  
`find /data -type f -mtime -1`  

/usr/binディレクトリ以下からSUIDが設定されたファイルを検索する。  
`find /usr/bin -type f -perm -u+s`  

/tmpディレクトリ以下から所有者がstudentであるファイルやディレクトリを検索する。  
`find /tmp -user student`  

カレントディレクトリ以下から30日を超える日数の間アクセスされていないファイルを検索し、削除する。  
`find -atime +30 -exec rm {} \`  

現在のディレクトリ以下にあるシンボリックリンクファイルを探す  
`find -type l`  

/binディレクトリ内で、一般ユーザーが実行してもroot権限で実行されるファイルを検索する。  
`find /bin -uid 0 -perm /4000`  
uid 0はrootユーザーを表す。0は固定値。  
`/4000`の構文はSUID,SGIDのいずれか片方でも設定されているファイルを検索する場合の構文な模様。  

[【Linux】 findコマンドとパーミッション](https://www.ricecake24book.com/linux-find-perm/)  

SUIDとSGIDが両方設定されているファイルを検索する  
`find /usr -perm -6000`  

SUIDとSGIDのいずれか片方でも設定されているファイルを検索する。  
`find /usr -perm /6000`  

`+`の場合も`/`と同じ動作ではあるが、指定の仕方が古く警告が表示されるらしい。`/`を使って検索すべしとのこと。  
`find /usr -perm +6000`  

``` txt : <https://atmarkit.itmedia.co.jp/ait/articles/1809/13/news037.html>  
実行時の権限を指定するSUID（Set User ID）とSGID（Set Goup ID）というパーミッションがLinuxには用意されています。  
SUIDが設定されているファイルを探したい場合は「u」を付けて「-perm -u+s」と指定するか、パーミッションに「4000」を足して「-perm -4000」のように指定します。  
同様に、SGIDが設定されているファイルを探したい場合は「g」を付けて「-perm -g+s」とするか、「2000」を足して「-perm -2000」のように指定します。  
```

---

## touchコマンド

ファイルのタイムスタンプを変更するコマンド。  
存在しないファイル名を指定することで、内容の入っていないファイルを新規作成する機能も持っている。  
なので、本来の使い方はされず、もっぱらファイルを作るコマンドと化している。  

---

## catコマンド

ファイルを連結するためのコマンド。  
conCATenate(繋ぐ、連結する)  
ファイルの内容をサクッと確認するためにも使われる。  

``` txt
car [オプション] ファイル1 ファイル2 ...

オプション
-n → 行番号を付ける。
-b → 行番号を付ける。但し空白行には付けない。
-s → 連続した空行を1行にする。

他にも色々。101で出たのは-nだけ。
```

---

## ヒアドキュメント  

第3章、GNUとUNIXコマンドの内容。  

`コマンド << 終了文字` :: 終了文字が現れるまで標準入力へ送る  

``` bash
echo 'hoge'
echo 'fuga'
echo 'piyo'
```

``` bash
cat << EOS
hoge
fuga
piyo
EOS
```

---

## ブロックデバイスファイル  

前提としてデバイスファイルである事。  
アクセス時に文字単位ではなく、ブロック単位でデータを転送するものを「ブロックデバイス」と呼ぶ。  
ハードディスクドライブやUSB,CR-ROM,メモリ領域などのデバイスファイルはこのように呼ばれるらしい。  

---

## bash

多くのUNIX系OSで標準的に用いられるシェルプログラムの1つ。  
shをパワーアップしたシェル。  
正式名称は`Bourne Again Shell`  
Bourne AgainはBorn Again(新生)と作成者のBourneとを掛け合わせた物らしい。  

シェルは利用者からOSへの操作の受付や操作の実行結果の表示等を担うプログラム。  

## sh

Bourneシェル。  
bashの前身。  
Stephen Bourne（スティーブ・ボーン）氏が1977年に開発した。  
ゆえにBourneシェル  
