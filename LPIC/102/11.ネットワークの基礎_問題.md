# ネットワークの基礎 白本問題

ネットワークの問題は基本情報でやったことが結構出るので、楽といえば楽。  

---

## 1 ○
64-2-1 = 61

---

## 2 ○
C : 24ビット

---

## 3 ×
あるIPアドレスがローカルサブネットワーク上のホストかリモートネットワーク上のホストかを決定するために、  
ローカルホストによって使用されるものは何ですか？  

正解はネットマスクらしいが、色々わからん。  
ネットマスク自体はサブネットマスクの事らしいが、それってローカルホストによって使用されるものなのか？  

---

## 4 ○
IANAで定められているIPv4のプライベートアドレスはどれか？3つ選択  

B,C,D  
→正解だった。


念のためここに書いておくか。  

A : 10.0.0.0 ~ 10.255.255.255  
B : 172.16.0.0 ~ 172.31.255.255  
C : 192.168.0.0 ~ 192.168.255.255  

---

## 5 ○
IPv6のアドレスの説明で正しいものはどれか？3つ選択  

①A:128ビットのアドレス空間を持つ  
②D:連続した0は省略できる。  
③B:グローバルユニキャストアドレスは一意？
→正解。だけどグローバルユニキャストはわからなかった。  

接頭にuniが付いたらそれは1つという意味。
ユニキャストはPC同氏が通信するときに1対1で通信する方式の事。

グローバルユニキャストアドレスはインターネット上で使用するアドレス。
リンクローカルアドレスは同一リンク上でのみ有効なアドレス。
ユニークローカルユニキャストアドレス : IPv4のプライベートアドレスに相当する、サイト内で使用するローカルなアドレス。  

---

## 6 ○
IPv6の正しいアドレス表示

A : `2001:503:ba3e::2:30`  

---

## 7 ×
IPv6の説明で正しいもの3つ選択  
○A
○B
×C
○Dブロードキャストはサポートしない

ブロードキャストはサポートしないそうです。  
まじか。  
てか、おれ全然IPv6の事について知らないよなぁ。  

---

## 8 ○
下記の内容が記述されているファイル名はどれか？

C. /etc/services  

サービスとポート番号が記載されているから。  

---

## 9 ○
コネクションレスの、データ信頼性の低いトランスポート層のプロトコルを大文字3文字で記述
→
UDP

こんなレベルの問題が出てくれるならどんなにうれしいことか。  
DiagramかDatagramかど忘れした。
Dataramです。
というか、データのやり取りするんだからこうなるよな。  

---

## 10 ×
ポート番号の値についての説明で正しいもの2つ。  

○A:ポート番号の範囲は0~65535  
×B:IANAが割り当てたウェルノウンポートはIANAの許可なしに使用することは出来ない  
○C:非特権ユーザーが使用できるポート番号の最小値は1024  

- 0はIANAが予約している  
- ウェルノウンポートのサービスとポート番号の登録は定められた手順によってIANAに対して行う必要がある。  
しかし、ポートの使用において許可を得る必要はない。  
- 0～1023は特権ユーザーのみアクセスできる  
システムポートと呼ばれる。  
- 1024~49151はRegistatredPorts
有名どころの企業が使ってる。  

---

## 11 ×
ネットワークデーモンから起動されるデーモンは、スタンドアロンデーモンとしても起動できます。  
次のデーモンの内、スタンドアロンデーモンを起動するデーモンはどれですか？2つ。  

→  
起動プロセスを選択すればよろしい。  
なので、sysVinitを採用しているなら、[init]だし、systemdを採用しているなら[systemd]だ。  
初見では全くわからないが、覚えてしまえばなんてことはない。  

スタンドアロンデーモン : xinitdを経由することなく、initあるいはsystemdから起動されるデーモン  
xinitd : ネットワークからのサービスリクエストの受付をするデーモン  

※SysV init  
/etc/rc3.d rc5.d  
/etc/init.d  
とかのやつ。  

---

## 12 ×
アクティブなネットワークの情報とUNIXドメインソケット接続、ルーティングテーブルを表示できるコマンドは？

route
netstat -r
ip route show

ルーティングテーブルの表示だけで3種類もあるのか。  
問題文では、ルーティングテーブル以外にも色々表示する必要があるので、netstat一択となる。  

---

## 13 ×
netstatコマンドを実行した表示内容の説明で正しいもの3つ。  

あー。これ参考書でやってないので仕方ない。

smtpって文言があるので、smtpサーバーになっている事にしましょう。
ドメイン名が表示されているので、DNSサーバーになっている事にしましょう。
Active Internet connectionという文言がある場合SSH接続は成功してるっぽいので、後は対象ですが、localaddressにlocaldomainとあるので、普通にDを選びそうです。

正解はABCですので、多分間違っていたでしょう。  

A : プロトコルTCP,サービス名はSMTP → SMTPサーバー  
B : プロトコルはUDP,サービス名はdomain(DNSサーバーのサービス名はdomain) → DNSサーバー  
C : プロトコルはTCP,サービス名はssh(サーバーはsshd)  

注目すべきは4行目のLocal Address見たいですね。  
ここにサービス名が表示されるので、それを見れば、このサービスが動いているから○○サーバーとして機能していると見ることができるみたい。  

---

## 14 ○
次の表示結果を得るコマンドラインはどれか？  
netstat

見た感じ全てのプロトコルが表示されているので、-a。  
名前解決されているのでは-nはない。こいつはIPアドレスで表示するオプションだった気がする。  
ルーティングテーブルが表示されている気配はないので-rもない。
プロトコル指定系の-t -uは意味ない。
なので、netstat -aですかね。

---

## 15 ×
インターネットに接続した環境で`netstat -a`,`netstat -r`コマンドを実行したところhangしてしまい何も結果が帰ってこない。
もっとも考えられる原因は？

→
-rなので、ルーティングテーブルの参照。  
-aはDNS必要だけど、それだと-rの説明が付かない。
コマンドオプションの謝りってあるのか？

インターフェースっぽいNISにしてみますか。
普通にDNSだった。-rにも関係するのか。メモメモ。

→
-nを付けないと基本的に名前解決する。
DNSサーバーから応答がないとハングする。  
-rでルーティングテーブルの事は一切触れられていない。

※ハングアップ
PCやアプリケーションから応答がなくなり、操作が出来なくなること  

※NIS(Network Information Service)  
主にUNIX系OSで利用されるシステム管理ソフトウェアの1つ。  
同じネットワークに接続された複数のPC間でシステムの設定情報を共有することが出来るシステム。  

---

## 16 ○
ホストをネットワークに接続しました。  
このホストとローカルホスト間でIPレベルで接続されているかどうかを確認する一般的なコマンドはどれですか？  

→
IPレベルなんてping一択

---

## 17 ○
PINGコマンドが利用しているプロトコルは？

→
ICPMだよなぁ？

---

## 18 △
IPv4の環境でデフォルトゲートウェイを設定しましたが、インターネット上のサーバーにアクセス出来ません。  
経路のどこに問題があるかをUDP及びICMPパケットを送信して調べたいと考えています。
実行するコマンドは？  

→
routepath or traceroute
プロトコルの指定があるので、どっちかのコマンドがそれを使っているということだろう。
まぁ応え見ちゃったから`traceroute`らしいんですけどね。  

→
traceroute : IPパケットが最終的な宛先ホストにたどり着くまでの経路をトレースして表示する。  

- パケット送信に使用するデフォルトのプロトコルはUDP。  
- UDPポートのデフォルトは33434番で、送信するたびにインクリメントする。  
- [-l]オプションを付けることでICMPパケットを送信できる。  
- routepathはtracerouteよりも機能が少なく、特権を必要とするRAWパケットを生成するオプションもない。  

---

## 19 ×
あるホストでTCPポート58769が接続待ち状態ですが、このポートをどのプロセスがオープンしているか不明です。  
プロセスを特定するためのコマンドを2つ選択。  

→  
netstatとifconfigでは無かろうか。  
lsofとtcpdumpは明らかに違うと思うけど・・・。  
netstatはプロトコル名が表示されるのは知っているが、ポート番号まで表示されたっけ？  
→されてる。LocalAddressとForeingAddressにはIPアドレスとポート番号、名前解決によってホスト名とサービス名が表示される。

→  
なんとlsofだって。始めて知ったんだが？  

netstat → ネットワークに関する様々な情報を表示するコマンド  
ifconfig → ネットワークインターフェースに関する操作を行うコマンド  
lsof → New

●lsof
プロセスによってオープンされているファイルの一覧を表示するコマンド  
引数にファイル名をした場合、そのファイルをオープンしているプロセスを表示する。  

``` txt
lsof [オプション] [ファイル名]

オプション
-i : オープンしているポートとプロセスを表示する。
-i:ポート番号 : 指定のポートをオープンしているプロセスを表示する。
-i:サービス名 : 指定のサービスをオープンしているプロセスを表示する。
-p プロセスID : 指定したプロセスがオープンしているファイルを表示する。
-P : ポート番号をサービス名に変換せず、数値のままで表示する。
```

---

## 20 ○
ネットワークインターフェースカードethc0のアドレスを192.168.1.1に設定するためのコマンド  

→  
ネットワークインターフェースの設定や情報の表示はifconfigだった気がする。  
概要だけはわかるけど設定の仕方は忘れた。  
ifconfigで正解ではあった。

→  
ipアドレスの設定  
ifconfig インターフェス名 IPアドレス  

情報の表示  
ifconfig単体。  

他のIPアドレス設定コマンドは？
`ip addr add 10.10.0.5/24 dev eth`  

小豆本の時も同じ疑問を持っていた模様。  
でも2つしかないならいいかな。  

---

## 21 ×
ipコマンドの説明で正しいものはどれか？2つ  

→  
×B,D  
○A,D  

→  
ipコマンドはifconfigコマンドに変わる新しいコマンド。  
なので、ネットワークインターフェースの設定と表示もできる。  


---

## 22 ○
ルーティングテーブルのエントリ追加  

→
D : route add -net 172.17.0.0 netmask 255.255.0.0 gw 172.16.255.254  

→  
IPアドレスの設定だけではなく、ルーティングテーブルへのエントリ追加も紛らわしく感じる原因の1つだな。  

---

## 23 ×

cat /proc/sys/net/ipv4/____  

→  
いや、さっぱりわからんが？  
このファイルはやったことないと思うけど。  

`ip_forward`だって。  
やっぱり知らない。  

→  

### /proc/sys/net/ipv4/ip_forwardファイル

- Linuxをルーターにするにはルーティングテーブルの設定の他に、1つのネットワークI/Fから別のネットワークI/Fへのパケットのフォワーディングを許可する設定が必要。  
- フォーワーディングはカーネル変数ip_forwardの値を1にする事でオンになり、0にすることでオフになる。  
- カーネル情報なので格納場所は`/proc/sys/net/ipv4/ip_forward`  

---

## 24 ○

デフォルトゲートウェイとして172.16.255.253を追加するコマンドはどれか。  

→
C : route add default gw 172.16.255.253  

→
デフォルトゲートウェイ設定コマンド  
`route add default gw ipアドレス`  

デフォルトルートを指定する場合は、宛先を`default`にする。  

---

## 25 ○

デフォルトルートについての説明で正しいものはどれか。1つ  

→  
C : ルーティングテーブルのどのエントリにも一致しない時に参照される。  

→
わかりそうでわからないサイトでデフォルトゲートウェイは最後に参照されるって言われた気がする。  
というのも、IPのルール的に「この宛先はどこですか？」ってまず一番近いネットワークに問い合わせて、どこにもなかったときに、個々にはないから仕方ないからデフォルトに任せるねって流れになってるって言ってた気がする。

---

## 26 ○

netstat -nr の結果について言えること2つ。  

→  
A,D  

→  
ルーティングテーブルは条件に当てはまったものから実行される。  
192.168.2.1宛は192.168.2.0/24のネットの1番宛と余裕で読めるので、これしかない。  

いや、微妙に違うか？
別に上からってわけでなくてもよい？
全部に当てはまらなかったらdgwに行くって認識でいいのかな。  
ロンゲストマッチ。  
最も当てはまる条件が長いもの。
上から順は間違いかも。  

``` txt : 重要
-nオプションで名前解決しない場合のDestination「0.0.0.0」と表示されるのがデフォルトルート。
```

---

## 27 ×

デフォルトゲートウェイエントリを削除するコマンドはどれか？3つ。  

→  
○A : route del default gw 172.17.255.254  
×B : route del default gw  
○D : ip route del default  

C : route del default  

→  
ipコマンドにdelなんて聞いてなかったが、addがあるならあってもいいだろうということで選んだら正解。  
なぜ省略したのか。  

routeコマンドのデフォの削除にgwの文言は必要ない模様。  

``` txt
route del default gw IPアドレス or インターフェース名
route del defualt
```

---

## 28 ×

ネットワークインターフェースの受信パケット、受信バイト、送信パケット、送信バイト数を表示するコマンドはどれか？2つ。  

→  
×A,D
○A,B

ネットワークインターフェースという地点でifconfigかip  
ip link show の構文なのでDしかない。  

→  
コマンドの概要の認識はよかったが、ip -sの構文を知らなかったからダメだった。  

`-s link`はデータリンク層(link)の統計情報(statistics)を表示するオプション  

---

## 29 ○

NetworkManagerについて正しい説明2つ。  

→  
A : ネットワークインターフェースの自動設定ができる  
C : デフォルトルートの自動設定ができる  
ネットワークマネージャーというくらいなんだから、自動設定出来ないとね？  
ネットワークインターフェースまで設定するならデフォルトルートの設定も出来ないとね？  

→  
特にないが、NetworkManagerが何なのか復習しておく必要がある。  

---

## 30 ×

nmcliの第一引数として指定するものはどれか？3つ。  

→  
○B : connection
×D : ethernet
○E : general

A : device

→  
覚えるのさぼったからね。仕方ないね。  
基礎のほうにまとめるからそっち見ればよろしい。  

ethernetとwifiはdeviceのサブコマンド

---

## 31 ○

nmcliでwi-fiのアクセスポイント、my-wifiに接続するコマンドはどれか？

→
C : nmcli device wifi connect My-WiFi  

機能復習したばかりだからね。
D : nmcli connect wifi device My-Wifi
deviceがそんなところに出てくるのはおかしいのでない。
A,BはWifi何ていう第一引数はない。  

---

## 32 ○

ホスト名をxamhost.localdomainに変更したい。コマンド名は？  
___ examhost.localdomain  

→
hostname

他にも
hostnamectl
/etc/hostnameの直接編集
があったはず。  
てか、この問題、hostnamectlでもよかったのでは？何が違いがあったのか？
あー、hostnamectlのばあい `set-hostname <HOSTNAME>`ってやらないといけないんだ。納得。  

因みにhostnameは一時的。再起動すると基に戻る。  
hostnamectlと/etc/hostnameの変更は永続的。  
hostnamectlは再起動したら反映される。  
hostnameは即時反映。  
うん。ややこしいな。

`hostname <HOSTNAME>`  
`hostnamectl set-hostname <HOSTNAME>`  

---

## 33 ○

/etc/hostsのエントリの正しい記述はどれか？2つ  

→  
ipv6かv4か。  
前に書くか後ろに書くか。  
その組み合わせでしかない。  

A,D
先にIPアドレス。後にホスト名。  
なぜなら、先にIPアドレスを書いている例が多いから。
これはつまり引っ掻けるためにやっているはず!!!

勝ち申した。

→  

/etc/hostsファイルとは？  
IPアドレスとホスト名の対応情報を格納するファイル  

書式 : `IPアドレス ホスト名 別名 ...`

---

## 34 ×

DNSクライアントホスト上で、どのDNSサーバーに対し問い合わせを行うべきかを定義するファイルの名前を絶対パスで記述してください。  

→  
言い回しが。
/etc/nsswitchはどの順番で問い合わせるかだったな。  
他に2つあったが、何だったか。  

×/etc/network
○/etc/resolv.conf

超ど忘れした。  

---

## 35 ○

DNSサービスを利用するために、適切なファイルにDNSサーバのIPアドレスを正しく指定したが、ネットワークアプリケーションが名前解決出来ない。  
考えられる原因は何か？1つ。  

→  
D  
まぁ、この脈絡で行けば、/etc/nsswitch.confが来るよね。  
「ネットワークインターフェースのIPアドレスが正しく設定されていない」が一番迷ったかな。  
でも、名前解決できないって書いてあるから、これはそもそも通信ができない状態だから違うか。  

---

## 36 ×

``` txt : /etc/resolv.conf
search mylpic.com
nameserver 172.16.1.1
nameserver 192.168.20.1
```

この記述内容で正しいものはどれか？1つ。  

→  
×A : 常にmylpic.comを検索する  
○B : ドットがないホスト名はmylpic.comを検索する。  

まじか・・・。  
nameserverは上から順って覚えたからなんてことはなかったけど、searchの理解が疎かだったな。  
というか、もう一つあったよな。何だっけ。  

→  
**searchの指定を行った場合、ドットがないホスト名についてはsearchで指定したドメインを検索する。**  
nameserverの指定は3台まで。  
上から順に実行する。  
応答がタイムアウトした場合などで次のDNSサーバーへの問い合わる。  

---

## 37 ○

逆引きDNSとは何ですか？1つ。

→  
IPアドレスからドメイン名を求めることでは？  
C  
これは特にいうことはない。  

---

## 38 ○

DNSのサービスを利用して、ホスト名に対応したIPアドレスを取得したい場合に使用するコマンドについての説明で適切なものはどれか？2つ  

→  
hostnameはホスト名なので違う。  
dnsdomainnameは聞いたことがない。  
なのでA,B hostコマンドとdigコマンド  

一応dnsdomainnameコマンドは存在する見たい。  
システムのDNSドメイン名を表示するコマンドだって。  

→  
digは直近でやったからわかるけど、hostは再確認しないと。  

``` txt
host [オプション] [-t 問い合わせタイプ] ドメイン名 [DNSサーバー]

正引き ホスト名からIPアドレスを取得する
host mail.lpi.org
逆引き IPアドレスからホスト名を取得する
host 69.90.69.237

dig [@DNSサーバ] ドメイン [問い合わせタイプ]

正引き
dig mail.lpi.org
逆引き
dig -x 69.90.69.237 +short
```

---

## 39 ○

ポート番号25番でサービスするのはどのようなホストか？  

→  
A : SMTPサーバー  
OP25B(Outbound Port 25 Blocking)って言うもんね。  
outbound : 外国行きの、市街に向かう  
外部の25番ポートに接続させない。  
外部の25番ポートに接続させたくば、ISPの認証を受けないと送信出来ないようにした。  
因みに25の代わりのサブミッションポートが587(SMTP AUTH)ね。  

ウェルノウンポートも覚えなおさないとな。  

---

## 40 ×

次のプログラムの内、メール転送エージェント(MTA)はどれか？3つ  

→
A : Postfix
E : Thunderbird

でもサンダーバードってメーラーっていうクライアントソフトであって、転送エージェントとはまた別では？  
正直知らないので答えを見ます。  

A : Postfix  
B : Sendmail  
D : Exim  
の3つだそうです。  
メール転送エージェントについては参考書になかったので仕方ないかと。  

---

# 41



今日でネットワーク終わるな。
