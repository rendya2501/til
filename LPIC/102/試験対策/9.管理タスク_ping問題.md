# ユーザーインターフェースとデスクトップ ping問題

## 最強WEB問題集

---

### 5072

-pは知らない。やってない。  
2週目で覚える。

---

### 4773

実行権が問題だ。
他はreadだけでいいのかぁ・・・。ダメだ。根本的にわからない。

あたりはしたけど、需要な概念だから復習しないと。
というか、根本的に忘れてるので復習したい。

ファイルの種別、所有者のアクセス権、グループのアクセス権、その他ユーザーのアクセス権
通常ファイルは「-」、ディレクトリは「d」、リンクは「l」  

---

### 4792

グループに関する情報は/etc/group。
そのまんま。

「/etc/group」ファイルの書式については参考をご確認ください。

したがって正解は
・/etc/group
です。

その他の選択肢については以下の通りです。
・/etc/passwd
ユーザのアカウント情報が格納されているファイルですので、誤りです。

・/etc/shadow
暗号化されているパスワード（シャドウパスワード）や、パスワードの有効期限に関する情報が格納されているファイルですので、誤りです。

・/etc/skel
ユーザの新規作成時にホームディレクトリにコピーされるファイルが格納されているディレクトリですので、誤りです。

・/etc/account
存在しないファイルです。

---

### 4841

ユーザ「test」のUIDを確認したい。適切なコマンドは次のうちどれか。
usermod -l test
id -G test
usermod -G test
id -g test
id -u test

正解

id -u test

解説

ユーザのUID（ユーザID）や、所属するグループのGID（グループID）を確認するには「id」コマンドを使用します。
idコマンドの書式と主なオプションは以下の通りです。

id [オプション] [ユーザ名]
<img src="/mondai3/img/jpg/k35096.jpg">
ユーザ名を省略すると、コマンドを実行したユーザの情報が表示されます。
また、オプションを省略すると、UIDと所属する全てのグループのGIDを表示します。

上記の書式および表より、正解は
・id -u test
です。

以下は実行例です。
id -u test
1000

その他の選択肢については上表のとおり、誤りです。なお、「usermod」は既存のユーザの設定を変更するコマンドですので、誤りです。

→

ユーザーIDっ何だっけ？
→
UIDとは、複数の利用者（user）を一意に識別するための識別子（identifier）。 または、一意（unique）の識別子。 具体的な仕様や規約はシステムの種類によって異なる。

まんまか。  

---

### 4640

ユーザのパスワードを設定・変更するコマンドは次のうちどれか。(2つ選択)
modpass
password
usermod -p
chgpass
passwd

正解

passwd

usermod -p

解説

以下はユーザ・グループアカウントに関するコマンドをまとめたものです。
<img src="/mondai3/img/jpg/k34989.jpg">

また、usermodコマンドの-pオプションで暗号化済みのパスワードを設定することができます。

したがって正解は
・passwd
・usermod -p
です。

「passwd」コマンドをオプション無しで実行すると、パスワードの設定・変更ができます。自分以外のユーザのパスワードを変更できるのは、rootユーザのみです。

例）rootユーザがユーザtestuserのパスワードを設定・変更する場合
【図を表示】

例）一般ユーザが自身のパスワードを変更する場合
【図を表示2】

usermodコマンドの-pオプションでは、crypt関数で暗号化済みのパスワードを設定します。rootユーザが実行できます。

例）ユーザtestuserのパスワードを暗号化済みの「xynhyrsnDvkYw」に変更する
【図を表示5】

その他の選択肢については以下の通りです。
・password
・modpass
・chgpass
存在しないコマンドです。

---

### 5024

対話的ログインを禁止する方法として、正しいコマンドを選べ。（2つ選択）

passwd -nologin hoge2
userdel hoge2
usermod -s /bin/false hoge2
usermod -L hoge2
chsh -s /sbin/nologin hoge2

正解
usermod -s /bin/false hoge2
chsh -s /sbin/nologin hoge2

解説
メールサーバやFTPサーバなどでは、ユーザアカウントは必要ですが、ユーザがシステムにログインしシェルを利用する必要が無い場合もあります。このような場合に対話的ログインを禁止します。
対話的ログインを禁止するにはログインシェルを「/bin/false」または「/sbin/nologin」に設定します。

ログインシェルは「usermod -s」や「useradd -s」（ユーザ作成時）コマンドで設定できます。
また、シェル変更専用のchshコマンドでも変更が可能です。オプションでシェルを指定する場合「chsh -s」を使用します。
なお、ログインシェルに設定するシェルは「/etc/shells」ファイルに登録されている必要があります。

したがって正解は
・usermod -s /bin/false hoge2
・chsh -s /sbin/nologin hoge2
です。

以下は実行例です
「usermod -s」の実行例
【図を表示3】
「chsh -s」の実行例
【図を表示4】

以下はログイン時の例です。
「/bin/false」を設定した場合
<img src="/mondai3/img/jpg/k35247.jpg">

「/sbin/nologin」を設定した場合
<img src="/mondai3/img/jpg/kk35247.jpg">

その他の選択肢は以下のとおりです。

・usermod -L hoge2
アカウントがロックされてしまいます。

・passwd -nologin hoge2
このようなオプションの使い方はありませんし、passwdコマンドで対話的ログインを禁止することはできません。

・userdel hoge2
アカウントが削除されてしまいます。

---

### 4781

「/etc/shadow」ファイルのパーミッションとして適切なものは次のうちどれか（3つ選択）

666
400
444
000
777
600
200

正解
400
600
000

解説
「/etc/shadow」ファイルには、暗号化されているパスワード（シャドウパスワード）や、パスワードの有効期限に関する情報が格納されています。
「/etc/shadow」ファイルのパーミッションには「400（r--------）」、「600（rw-------）」、「000（---------）」などがあり、ディストリビューションやバージョンによって異なります。いずれの場合もrootユーザのみが読み書き可能な設定です。

したがって正解は
・000
・400
・600
です。

以下は「/etc/shadow」ファイルのパーミッションの例です。
【図を表示】

その他の選択肢は正しいパーミッションではありません。

→
[パーミッション000](https://oshiete.goo.ne.jp/qa/6781290.html)  
>パーミッション000とは
>・オーナー権限 読み込み不可・書き込み不可・実行不可
>・グループ権限 読み込み不可・書き込み不可・実行不可
>・他者権限 読み込み不可・書き込み不可・実行不可
>ということです。
>
>例えるならば、ハシゴを利用して屋根に上ったが、上ってきたハシゴを蹴り飛ばしてしまったような感じです。
>自分ではどうすることも出来ず、別の人がハシゴをかけ直してくれるのを頼むしかありません。

大丈夫なのか・・・？

---

### 4789

年末年始の休暇の間、ユーザ「user3」にアカウントを使用させないようにしたい。適切な方法はどれか（4つ選択）
「useradd -l user3」コマンドを実行する
「passwd -u user3」コマンドを実行する
「passwd -l user3」コマンドを実行する
「/etc/passwd」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
「usermod -L user3」コマンドを実行する
「/etc/shadow」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する

正解
「/etc/shadow」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
「/etc/passwd」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
「passwd -l user3」コマンドを実行する
「usermod -L user3」コマンドを実行する

解説

アカウントを削除することなく一時的に使用不可にすることで、不正アクセスによって休暇中ユーザーのアカウントを乗っ取られることを防ぐことができます。
アカウントを一時的に使用不可にするには主に以下の2つの方法があります。

・「/etc/passwd」または「/etc/shadow」ファイルの該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
・「passwd -l」または「usermod -L」コマンドでパスワードをロックする。

以下は「/etc/passwd」と「/etc/shadow」ファイルの記載例です。
【図を表示5】

「passwd」と「usermod」コマンドの書式は以下のとおりです。

passwd [オプション] [ユーザ名]
usermod [オプション] [ユーザ名]

passwdコマンドのオプション
【図を表示】

usermodコマンドのオプション
<img src="/mondai3/img/jpg/k34945.jpg">

したがって正解は
・「/etc/shadow」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
・「/etc/passwd」の該当ユーザのパスワードフィールドの1文字目に「!」または「*」を追加する
・「passwd -l user3」コマンドを実行する
・「usermod -L user3」コマンドを実行する
です。

以下は実行例です。

・「passwd」コマンドでパスワードにロックを掛ける場合
passwd -l user3
Locking password for user user3.
passwd: Success

・「usermod」コマンドでパスワードにロックを掛ける場合
usermod -L user3

なお、パスワードにロックをかけると「/etc/shadow」の該当ユーザのパスワードフィールドの1文字目に「!」が追加されます。
<img src="/mondai3/img/jpg/kkk35178.jpg">

その他の選択肢については以下の通りです。
・「passwd -u user3」コマンドを実行する
パスワードをアンロック（解除）するコマンドですので、誤りです。

・「useradd -l user3」コマンドを実行する
ユーザを追加するコマンドですので、誤りです。

→
なぜあるコマンドで設定できるのに、別のそれ専用のコマンドも存在するのか？
関数の粒度の問題じゃない？
パスワードならパスワードだけなのはわかるけど、ユーザーは？ってなったらパスワードまで設定出来たほうがいいわけで。
というわけで、プログラムするときに似たような感じで設計するでしょ。
そういうことでは。

