# セキュリティ 白本問題

## 1 ○

ログアウトすることなく、別のユーザーIDとグループIDを持つ新たなシェルを起動するコマンドはどれか？1つ。  

→  
A : SU  

選択肢的にこれしかない。  
別のユーザーでログインするだけかと思ったら、別のユーザーでログインしてシェルを立ち上げるってのが正確な表現みたいだ。  
なのでまとめる。  

---

## 2 ○

指定したユーザー権限で特定のコマンドを実行するコマンド。1つ  

→  
SUDO  
言わずもがな。  

---

## 3 ○

あるユーザーがroot権限でアプリを実行できるかどうか判断する時、sudoが読みこむ設定ファイルは何ですか？1つ。  

→  
/etc/sudoers  
問題2をまとめるついでにやったので問題なし。  
まぁ、これは問題ないのだが、中に何を設定するのかは問題だ。  

---

## 4 ○

xinetdの設定ファイル名を絶対パスで記述してください。  

→  
/etc/xinetd.conf  
確かこれしかないだろうなと思ったら当たった。  

その前にxinetdって何だっけ？  
→ネットワークからのリクエストを受け付けるデーモン。  
こいつがリクエストを受け取って、登録されているサービスを起動するんだっけかな。  
いわゆるスーパーサーバープログラムって奴だ。  

---

## 5 ×

xinetdの設定ファイルを編集しました。  
xinetdデーモンの再起動をせずにシグナルをxinetdに送ることで編集を有効にしたい。  
killあるいはpkillコマンドの引数で指定するシグナルの名前を記述してください。  

→  
killコマンドの復習をしないとねぇ。  
忘れたので答え見ますよ。  

HUP or SIGHUP

→  

``` txt
killコマンド
プロセスIDを指定してシグナルを送るコマンド。

kill -[シグナル名またはシグナルID] PID
kill -s [シグナル名またはシグナルID] PID
kill -SIGシグナル名 PID
```

``` txt
pkillコマンド
プロセス名を指定してシグナルを送るコマンド。

pkill [オプション] [シグナル] プロセス名

オプション
-u ユーザ名 : 指定した実行ユーザーによるプロセス対象とする。
-g グループ名 : 指定したプロセスグループのいずれかに属するプロセスを対象とする。
```

``` txt
シグナル名 シグナルID 説明
HUP   1  ハングアップ（端末との接続が切断）
INT   2  キーボードからの割り込み
QUIT  3  キーボードからのプロセスの中止
KILL  9  強制終了
TERM 15  通常終了
CONT 18  一時停止中のプロセスを再開
STOP 19  一時停止
```

実行例  
`pkill -HUP xinetd`  
`kill -HUP xinetdのプロセス名`  

なんでハングアップで有効になるんだ？  
うーん。そういうものと覚えたほうがいいのかねぇ。

---

## 6 ×

xinetd設定ファイルで、サービスを提供するために使われるネットワークアドレスを指定する属性名を記述してください。  

→  
知らん。  
重要度も低い問題だ。答え。  
あー。小豆本の方で面倒だからって飛ばした部分だ。  
まぁ、いい復習の機会になったじゃないか。  

`only_from`  

一回まとめて見たけど、問題文がチンプンカンプンだ。  

---

## 7 ○

TCP Wrepperによって特定のサービスだけを許可したい場合、設定するファイルはどれですか？3つ。  

→  
3つって選択肢の事だよな？  
hosts.allowとdeny何だけど、それぞれ1つとどっちもの3つって事なのか？  
ならB,C,Dだがそれでいいのか？  

うーん。合ってた。  
なんとも腑に落ちないな。  

---

## 8 ○

TCP Wrapperによるアクセス制御でアクセスの拒否を設定るファイルは何ですか？1つ。  

→  
/etc/hosts.deny  
まぁ・・・特にないわ。  

---

## 9 ×

一般的にTCP Wrapperで保護されないものはどれか？1つ。  

→  
auth  

プロトコルでないものを選べばいいのでは？  
あ!プロトコルじゃなくてサービスじゃないものだ。  
ftpってプロトコルであり、起動するサービスなわけだよな。  
httpだけがプロトコルでサービスじゃないからこいつが答えだ。  

どうやら俺の推理は外れたようだ。  

libwrapによるTCP Wrapperで保護されるのは、xinetdから起動されるサービスとlibwrapを利用したサーバが提供するサービス。  
httpはApatchWebサーバーの管轄。  
libwrapを使わない独自のアクセス制御機構を持つ。  

---

## 10 ×

公開鍵暗号と公開鍵認証について正しい説明3つ。  

→  
×A : 秘密鍵と公開鍵は1対多  
○B : 公開鍵は秘密鍵から算出される  
○C : 公開鍵で暗号化し、秘密鍵で復号する  
○F : 認証では秘密鍵で認証データを作成し、公開鍵で検証する  

→  
まさか間違えるとは。  
1対多じゃないの？  
秘密鍵って公開鍵から作られるの？割と知らなかったんだが？  

配布のコストとしては1体多だが、対応としては1体1ということか？

うん。よく答えを見てみると使われる秘密鍵と公開鍵は1体多って書いてあるな。  
配布の対応って文言があれば話は別だが、これは暗号と復号の関係の事だから1対1しかないわな。  

- 公開鍵暗号方式は非対称暗号方式とも呼ばれる。  
- 暗号化と復号の鍵が異なる方式。  
- 秘密鍵を乱数で生成し、秘密鍵から大きな2つの素数の積や離散対数により公開鍵を生成する。  
- 秘密鍵と公開鍵は1対1対応。  
- 秘密鍵から公開鍵が計算されるが、その逆の演算は実質不可能(宇宙が出来上がるまでの時間を書ければ出来なくはないが、計算時間に対して割に合わな過ぎる。)  
- データ送信側は受信側から事前に取得してある公開鍵でデータを暗号化して受信側に送り、受信側は自分の秘密鍵でデータを復号する。  
- 公開鍵認証では、被認証側が自分の秘密鍵で認証データを作成して認証側に送り、認証側では被認証側の公開鍵で認証データを検証する。  

---

## 11 ○

ほすとexamhostにログインするネットワークコマンドの内、通信路を暗号化するものはどれですか？1つ。  

→
ssh examhost  
まさかこれだけか？  
これだけだった・・・。  

---

## 12 ○

sshのknown_hostsファイルには何が格納されているか？1つ。  

→
一度接続したホストの情報。  
のはずなんだが、もっと具体的な内容だった。  
だけど、一度接続したホスト情報に基づけば、Aしかない。

A : サーバーのホスト名、IPアドレス、公開鍵  

イエーイ。正解。  

---

## 13 ○

sshファイルのknown_hostsはどこに作られますか？1ツ  

→  
sshクライアント  

接続した側が知ってるホストなので、クライアントですよね。  

---

## 14 ○

/etc/ssh/ssh_known_hostsファイルのは___ホストキー(公開鍵)が含まれている。  

→  
設定ディレクトリにある。  
ホームディレクトリではない。  
システム設定だから、システムの全てのユーザーが利用可能ではないですかね？  

当たった。  
てか、これ小豆本でもやってないな。  

クライアントがパスフレーズの入力なしにサーバーにログインするホストベース認証の場合には、クライアントの公開鍵を格納し、  
サーバーホスト上に置いてサーバーがクライアントからのアクセスを許可する際にも使用される。  

---

## 15 ×

/etc/ssh_known_hostsのパーミッションはどれが適切か？  

→  
なんか600って見えた気がしたので、rootのみが読み書きできるで。  

マージか。  
Cの「全てのユーザーがreadできる」が正解な模様。  

/etc/ssh_known_hostsファイルはすべてのユーザーが実行したssgコマンドが参照するファイルなので、全てのユーザーがreadできるパーミッションになっていないといけない。  
ファイルシステムなので、書き込みはできない。  

---

## 16 ○

rootがsshでログインできないようにするために、sshサーバーの設定ファイルのディレクティブの記述で正しいものはどれか？1つ。  

→  
しらねー。  
rootユーザーがsshコマンドを使ってサーバーにログインできないようにするってこと？  

Permitの問題なのだろうか。
でもPermitがない選択肢は1つで明らかにRootユーザーのログインを許可しているのでなし。
yesnoで選択するタイプの場合、否定のディレクティブをわざわざyesするなんて面倒な事はしないはずなので、B「PermitRootLogin no」で。  

当たったー。俺の推理も割といい線言ってるんだな。  

また色々設定項目があるので、詳しくまとめるなら明日だな。  

---

## 17 ○

sshで外部サーバーへ接続する際に使用するオプションを編集するユーザーの設定ファイルは何ですか？  
ファイル名のみ。  

→  
`config`  

多分、.ssh/configのこと言ってるんだろうなぁと思って書いたら当たった。  

どうでもいいけど、PortとかHostとかの名前ってディレクティブっていうんですね。  
覚えておこう。  

---

## 18 ○

sshコマンドのオプションの説明で謝っているものはどれか？1つ。  

→  
-Pはポートではなく、プロトコルだったような？
ポートの指定は小文字のpだったような？
なのでB 「-Pでsshサーバーのポート番号を指定する」  

あたったぜー。  
これも詳しくはまた明日。

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---

## 1

---
