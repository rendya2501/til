# 日付関係

---

## 本日の日付

■ **SQL SERVER**

``` SQL
-- 2022-05-29 16:20:15.047
SELECT GETDATE()
-- 2022-05-29 16:20:15.0482426
SELECT SYSDATETIME()
-- 2022-05-29 16:20:15.047
SELECT CURRENT_TIMESTAMP
```

---

## Time型をString型に変換する

Time(7)型の`07:23:00.0000000`を`07:23`にしたかった。  

``` sql
    -- 108 → HH:MM:SS → 07:23:00
    CONVERT(NVARCHAR,[Frame].[StartTime],108)
    -- 07:23:00 → 07:23
    LEFT(CONVERT(NVARCHAR,[Frame].[StartTime],108), 5)
```

108[HH:mm:ss]と112[YYYYMMDD]を多用すると思われる。  

|Style|日付|
|---|---|
|100 | 01 2 2019 3:04AM        |
|101 | 01/02/2019              |
|102 | 2019.01.02              |
|103 | 02/01/2019              |
|104 | 02.01.2019              |
|105 | 02-01-2019              |
|106 | 02 01 2019              |
|107 | 01 02, 2019             |
|108 | 03:04:05                |
|109 | 01 2 2019 3:04:05:677AM |
|110 | 01-02-2019              |
|111 | 2019/01/02              |
|112 | 20190102                |
|113 | 02 01 2019 03:04:05:677 |
|114 | 03:04:05:677            |
|120 | 2019-01-02 03:04:05     |
|121 | 2019-01-02 03:04:05.677 |
|126 | 2019-01-02T03:04:05.677 |
|127 | 2019-01-02T03:04:05.677 |

[SQL Serverで日付型を文字列に変換する](https://it-engineer-info.com/database/2630/)  

---

## FORMAT関数による時間の変換の代替案

SQLServer2008ではFORMAT関数が使えない。  
使うならCONVERT関数になる。  

※FORMAT関数は 2012 以降の模様。  

``` sql
FORMAT([スタート時間], 'HH:mm:ss'),
```

``` sql
CONVERT(VARCHAR, [スタート時間], 108),
```

[SQL Serverで日付型を文字列に変換する](https://it-engineer-info.com/database/2630/)  

---

## 文字列から日付型への変換

`CONVERT(DATETIME,'yyyymmdd')`  

or  

`CAST('yyyymmdd' AS DATETIME)`  

[【SQLServer】CONVERT で文字列から日付型に変換する | SQLServer初心者でもスッキリわかる](https://sql-oracle.com/sqlserver/?p=189#toc3)  
