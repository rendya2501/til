# バンドルの最小実装

バンドルを生成するためだけの一連の流れ。  
実行しても何もしないバンドルが生成される。  

---

## 開発環境  

- Windows10  
- .Net 6以上  
- GitBash or CommandPrompt  
- VSCode or GitBash_vim  

---

## webプロジェクトで作成する場合

プロジェクト作成  
`dotnet new web`  

dotnet-efツールのローカルインストール  
`dotnet new tool-manifest`  
`dotnet tool install dotnet-ef`  

NuGetパッケージのインストール  
`dotnet add package Microsoft.EntityFrameworkCore`  
`dotnet add package Microsoft.EntityFrameworkCore.Design`  
`dotnet add package Microsoft.EntityFrameworkCore.SqlServer`  

Program.csを以下のように書き換える  

- `using Microsoft.EntityFrameworkCore;`の追加  
- `builder.Services.AddDbContext<DbContext>(options =>options.UseSqlServer());`を追加  

``` cs
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext<DbContext>(options =>options.UseSqlServer());
var app = builder.Build();

app.MapGet("/", () => "Hello World!");

app.Run();
```

バンドル発行  
`dotnet ef migrations bundle`  

---

## consoleプロジェクトで作成する場合

プロジェクト作成  
`dotnet new console`  

dotnet-efツールのローカルインストール  
`dotnet new tool-manifest`  
`dotnet tool install dotnet-ef`  

NuGetパッケージのインストール  
`dotnet add package Microsoft.EntityFrameworkCore`  
`dotnet add package Microsoft.EntityFrameworkCore.Design`  
`dotnet add package Microsoft.EntityFrameworkCore.SqlServer`  
`dotnet add package Microsoft.Extensions.Hosting`  

Program.csを以下のように書き換える  

```cs
using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;

using IHost host = Host.CreateDefaultBuilder(args)
    .ConfigureServices(services => services.AddDbContext<DbContext>(options => options.UseSqlServer()))
    .Build();
```

バンドル発行  
`dotnet ef migrations bundle`  
