# 基本

## INSERT

<https://itsakura.com/sql-insert>  

``` sql
-- ●INSERT文 (列名を書かない)  
INSERT INTO テーブル名 VALUES ( ‘値1′ [ , ‘値2’ ]・・・);


-- ●INSERT文 (列名を書く)
INSERT INTO テーブル名 ( テーブルの列名1 [ , テーブルの列名2 ]・・・) VALUES ( ‘値1′ [ , ‘値2’ ]・・・);


-- ●INSERT文 (select文の結果をinsertする)
INSERT INTO テーブル名 SELECT 項目名 FROM テーブル名
INSERT INTO syain1 ( id, name ) SELECT id, name FROM syain2
```

---

## UPDATE

<https://qiita.com/ryota_i/items/d17c7630bacb36d26864>  

特定テーブルにおける、条件に当てはまるレコードの特定のカラムの値を任意の値に書き換える。  
日本語に直して予約語さえ覚えてしまえば、なんてことはないな。  

```sql
-- ●基本
UPDATE テーブル名
SET 列名1 = 値1 [,列名2 = 値2]・・・
WHERE (条件);


-- ●UPDATE文のset句で副問合せを使用する
UPDATE syain
SET name = (
    select name
    from test
    where id = 2)
WHERE id = 2;


-- ●UPDATE文のwhere句で副問合せを使用する(where in)
-- https://sqlazure.jp/r/sql-server/403/
UPDATE syain
SET name = 'テスト'
WHERE id in (
    select id from test
    where name = 'TEST'
);

-- ●inner join 1
-- UPDATE SET FROM JOIN WHERE の流れを意識すれば、まぁ何とか鳴るでしょう。  
UPDATE
    [Table]
SET
    [Table].col1 = [other_table].col1,
    [Table].col2 = [other_table].col2
FROM
    [Table]
    INNER JOIN
        [other_table]
    ON
        [Table].id = [other_table].id


-- ●inner join 2
UPDATE
    テーブル名1 
    INNER JOIN テーブル名2 
    ON テーブル名1.列名X = テーブル名2.列名X
SET
    テーブル名1.列名1 = テーブル名2.列名2;
-- 下記でも同じ
UPDATE
    テーブル名1,テーブル名2
SET
    テーブル名1.列名1 = テーブル名2.列名2
WHERE
    テーブル名1.列名X = テーブル名2.列名X;


-- ●UPDATE文でCASE式を使用する
UPDATE
    syain
SET
    name = case id
        when 1 then '鈴木一郎'
        when 2 then '田中二郎'
        when 3 then '佐藤三郎'
    end,
    romaji = case
        when id > 1 then 'tokumei'
        ELSE 'i.suzuki'
    end
WHERE
    id in(1, 2, 3)
```

---

## DELETE文

```sql
-- ●基本
DELETE FROM テーブル名 WHERE (条件);


-- ●join
-- https://stackoverflow.com/questions/16481379/how-can-i-delete-using-inner-join-with-sql-server
-- DELETE FROM JOIN WHEREの流れは基本的に同じ見たい。それさえ分かれば後は十分だろう。
-- joinの場合、削除するテーブルを指定する必要があるので、DELETEの後ろにエイリアスを指定する(テーブル名ではダメ見たい)。
DELETE w
FROM WorkRecord2 w
INNER JOIN Employee e
ON EmployeeRun=EmployeeNo
WHERE Company = '1' AND Date = '2013-05-06'


-- ●複数テーブルの削除
-- https://hamalabo.net/mysql-multi-delete
-- 通常の場合
DELETE FROM M_UserData WHERE UserId = 1;
DELETE FROM T_TimeCard WHERE UserId = 1;

-- 複数テーブルの場合
DELETE User,Time
FROM M_UserData As User
LEFT JOIN T_TimeCard AS Time
ON User.UserId = Time.UserId
WHERE User.UserId = 1
```

---

## Truncate

```sql
Truncate table テーブル名;
```
